//////////////////////////////////////////////////////////////////////
// Pano2VR 6.0 alpha/16570 HTML5/CSS3 & WebGL Panorama Player       //
// License: Red Square Productions Pty Ltd                          //
// (c) 2018, Garden Gnome Software, http://ggnome.com               //
//////////////////////////////////////////////////////////////////////

function G(){var p="perspective",e=["Webkit","Moz","O","ms","Ms"],k;for(k=0;k<e.length;k++)"undefined"!==typeof document.documentElement.style[e[k]+"Perspective"]&&(p=e[k]+"Perspective");"undefined"!==typeof document.documentElement.style[p]?"webkitPerspective"in document.documentElement.style?(p=document.createElement("style"),e=document.createElement("div"),k=document.head||document.getElementsByTagName("head")[0],p.textContent="@media (-webkit-transform-3d) {#ggswhtml5{height:5px}}",k.appendChild(p),
e.id="ggswhtml5",document.documentElement.appendChild(e),k=5===e.offsetHeight,p.parentNode.removeChild(p),e.parentNode.removeChild(e)):k=!0:k=!1;return k}function N(){var p;if(p=!!window.WebGLRenderingContext)try{var e=document.createElement("canvas");e.width=100;e.height=100;var k=e.getContext("webgl");k||(k=e.getContext("experimental-webgl"));p=!!k}catch(b){p=!1}return p}
var __extends=this&&this.__extends||function(p,e){function k(){this.constructor=p}for(var b in e)e.hasOwnProperty(b)&&(p[b]=e[b]);p.prototype=null===e?Object.create(e):(k.prototype=e.prototype,new k)},ggP2VR;
(function(p){var e=function(){function b(a){this.g=null;this.Rf=this.zk=this.lb=!1;this.Bb=this.Ma=this.Aa=0;this.f=70;this.Ta=0;this.autoplay=this.Wf=!1;this.id="";this.i=this.pan=0;this.g=a;this.Xc=this.Dc=100;this.nd=1}b.prototype.Ib=function(a){var d;if(d=a.getAttributeNode("id"))this.id=d.nodeValue.toString();if(d=a.getAttributeNode("pan"))this.pan=Number(d.nodeValue);if(d=a.getAttributeNode("tilt"))this.i=Number(d.nodeValue)};b.prototype.Ul=function(a){var d="",c=this.g,b=!0;if(c.$f){var g=
new p.sa(0,0,-100);g.Aa(-this.i*Math.PI/180);g.Ma(this.pan*Math.PI/180);g.Ma(-c.pan.c*Math.PI/180);g.Aa(c.i.c*Math.PI/180);g.Bb(c.N.c*Math.PI/180);.01<=g.z&&(b=!1)}c.vc&&(d+="perspective("+a+"px) ");d=d+("translate3d(0px,0px,"+a+"px) ")+("rotateZ("+c.N.c.toFixed(10)+"deg) ");d+="rotateX("+c.i.c.toFixed(10)+"deg) ";d+="rotateY("+(-c.pan.c).toFixed(10)+"deg) ";d+="rotateY("+this.pan.toFixed(10)+"deg) ";d+="rotateX("+(-this.i).toFixed(10)+"deg) ";a=1E4;var g=this.b.videoWidth,l=this.b.videoHeight;if(0==
g||0==l)g=640,l=480;0<this.Dc&&(g=this.Dc);0<this.Xc&&(l=this.Xc);0<g&&0<l&&(this.b.width=g,this.b.height=l,this.b.style.width=g+"px",this.b.style.height=l+"px");0<this.f&&(a=g/(2*Math.tan(this.f/2*Math.PI/180)));d+="translate3d(0px,0px,"+(-a).toFixed(10)+"px) ";d+="rotateZ("+this.Bb.toFixed(10)+"deg) ";d+="rotateY("+(-this.Ma).toFixed(10)+"deg) ";d+="rotateX("+this.Aa.toFixed(10)+"deg) ";this.nd&&1!=this.nd&&(d+="scaleY("+this.nd+") ");d+="translate3d("+-g/2+"px,"+-l/2+"px,0px) ";this.b.style[c.Wa+
"Origin"]="0% 0%";this.lb&&(d="",1==this.Ta&&(d+="scale("+Math.min(c.m.width/g,c.m.height/l)+") "),d+="translate3d("+-g/2+"px,"+-l/2+"px,0px) ");this.Kn!=d&&(this.Kn=d,this.b.style[c.Wa]=d,this.b.style.visibility=b?"visible":"hidden",this.Rf&&this.zk==this.lb&&(this.b.style[c.Vc]="all 0s linear 0s"),this.zk=this.lb)};b.prototype.Al=function(){this.b&&(this.b.style.visibility="hidden")};b.prototype.Je=function(){var a=this.g;a.Z?(this.b.style.left=a.m.width/2+"px",this.b.style.top=a.m.height/2+"px"):
(this.b.style.left=a.margin.left+a.m.width/2+"px",this.b.style.top=a.margin.top+a.m.height/2+"px")};return b}();p.Ip=e;var k=function(b){function a(a){b.call(this,a);this.fj=this.dh=this.wf=this.ja=!1;this.Ef=this.Db=null;this.xe=this.Cg=0;this.Qh=this.ej=this.Ae=!1;this.url=[];this.loop=0;this.level=1;this.Ac=0;this.mode=1;this.dk=10;this.Uh=this.Gb=0;this.ka=1;this.Mc=this.zc=this.yc=this.Lc=0}__extends(a,b);a.prototype.Dl=function(){this.ja&&this.Qh?this.Qh=!1:(!this.ja&&this.g.$f&&(this.xd(),
this.addElement()),0==this.loop?this.ja?(this.Db=null,this.Pc()):this.b.play():0<this.Sc?(this.Sc--,this.ja||(this.b.currentTime=0),this.dh&&(this.Wc&&0==this.Wc.gain.value||0==this.qc.gain.value&&0==this.tc.gain.value&&0==this.rc.gain.value&&0==this.sc.gain.value)||(this.ja?(this.Db=null,this.Pc()):this.b.play())):this.ja&&(this.Db=null,this.Ae=!1))};a.prototype.ei=function(){var a=this.g.Ia;a&&(this.ja||(this.source=a.createMediaElementSource(this.b)),2==this.mode||3==this.mode||5==this.mode?(this.Te=
a.createChannelSplitter(2),this.qc=a.createGain(),this.rc=a.createGain(),this.sc=a.createGain(),this.tc=a.createGain(),this.Hf=a.createChannelMerger(2),this.ja||this.source.connect(this.Te),this.Te.connect(this.qc,0),this.Te.connect(this.rc,0),this.Te.connect(this.sc,1),this.Te.connect(this.tc,1),this.qc.connect(this.Hf,0,0),this.rc.connect(this.Hf,0,1),this.sc.connect(this.Hf,0,0),this.tc.connect(this.Hf,0,1),this.Hf.connect(a.destination)):(this.Wc=a.createGain(),this.ja||this.source.connect(this.Wc),
this.Wc.connect(a.destination)))};a.prototype.wg=function(){var a=this.g.Ia;this.lb||this.fj||(this.qc.gain.setValueAtTime(this.Lc,a.currentTime),this.tc.gain.setValueAtTime(this.Mc,a.currentTime),this.rc.gain.setValueAtTime(this.yc,a.currentTime),this.sc.gain.setValueAtTime(this.zc,a.currentTime))};a.prototype.Zh=function(){var a=this.g,c=this.g.Ia;if(this.b||this.ja){var b,g=this.pan-a.pan.c;for(b=this.i-a.i.c;-180>g;)g+=360;for(;180<g;)g-=360;var l=this.Ac,h=this.dk;0==h&&(h=.01);0>h&&(h=a.f.c);
this.Kb||(this.Kb=new p.sa,this.Kb.fk(this.pan,this.i));0!=this.mode&&1!=this.mode||!c||this.Wc&&this.Wc.gain.setValueAtTime(this.level*a.W*this.ka,c.currentTime);if(2==this.mode&&c){var v=.5*Math.cos(g*Math.PI/180)+.5;this.Lc=Math.sqrt(v)*this.ka*this.level*a.W;this.Mc=Math.sqrt(v)*this.ka*this.level*a.W;this.yc=Math.sqrt(1-v)*this.ka*this.level*a.W;this.zc=Math.sqrt(1-v)*this.ka*this.level*a.W;this.wg()}if(3==this.mode){0>g?g<-this.Gb?g+=this.Gb:g=0:g=g>this.Gb?g-this.Gb:0;var m=this.level;b=Math.abs(b);
b=b<this.Uh?0:b-this.Uh;var k=1-b/h;if(Math.abs(g)>h||0>k)v=m*l*a.W,c?(this.Lc=v*this.ka,this.Mc=v*this.ka,this.zc=this.yc=0,this.wg()):this.b.volume=m*l*a.W;else if(v=1-Math.abs(g/h),c){var e=m*(l+(1-l)*k*v)*a.W,v=m*l*a.W;0<=g?(this.Lc=e*this.ka,this.Mc=v*this.ka):(this.Lc=v*this.ka,this.Mc=e*this.ka);2*Math.abs(g)<h?(v=1-Math.abs(2*g)/h,e=m*(l+(1-l)*k*v)*a.W,v=.5*m*(1-l)*k*(1-v)*a.W,0<=g?(this.Mc=e*this.ka,this.zc=v*this.ka,this.yc=0):(this.Lc=e*this.ka,this.yc=v*this.ka,this.zc=0)):(v=1-(Math.abs(2*
g)-h)/h,e=.5*m*(1-l)*k*v*a.W,0<=g?(this.zc=e*this.ka,this.yc=0):(this.yc=e*this.ka,this.zc=0));this.wg()}else this.b.volume=m*(l+(1-l)*k*v)*a.W}4==this.mode&&(Math.abs(g)<this.Gb&&Math.abs(b)<this.Uh?this.wf||(this.wf=!0,this.Sc=this.loop-1,this.ja?this.Ae||this.Pc():this.b.play()):this.wf=!1);5==this.mode&&(b=180*Math.acos(a.vi.Gh(this.Kb))/Math.PI,b<this.Gb?c?(this.Lc=this.level*a.W*this.ka,this.Mc=this.level*a.W*this.ka,this.zc=this.yc=0,this.wg()):this.b.volume=this.level*a.W:c?(b<this.Gb+h?(0>
g?g=g>-this.Gb?0:g+this.Gb:g=g<this.Gb?0:g-this.Gb,e=1-Math.max(b-this.Gb,0)/h,v=Math.max(1-Math.abs(g)*Math.cos(this.i*Math.PI/180)/h,0),0<g?(this.Lc=this.level*(e*(1-this.Ac)+this.Ac)*a.W*this.ka,this.Mc=this.level*(e*v*(1-this.Ac)+this.Ac)*a.W*this.ka,this.yc=0,this.zc=this.level*e*(1-v)*a.W*this.ka):(this.Lc=this.level*(e*v*(1-this.Ac)+this.Ac)*a.W*this.ka,this.Mc=this.level*(e*(1-this.Ac)+this.Ac)*a.W*this.ka,this.yc=this.level*e*(1-v)*a.W*this.ka,this.zc=0)):(e=this.level*this.Ac*a.W,this.Lc=
e*this.ka,this.Mc=e*this.ka,this.zc=this.yc=0),this.wg()):(b-=this.Gb,b<h&&0<h?(v=1-Math.abs(b/h),this.b.volume=this.level*(l+(1-l)*v)*a.W):this.b.volume=l*a.W));6==this.mode&&(b=180*Math.acos(a.vi.Gh(this.Kb))/Math.PI,Math.abs(b)<this.Gb?this.wf||(this.wf=!0,this.Sc=this.loop-1,this.ja?this.Ae||this.Pc():this.b.play()):this.wf=!1)}};a.prototype.Vj=function(){var a=this;a.Db=this.g.Ia.createBufferSource();a.Db.addEventListener("ended",function(){a.Dl()},!1);2==a.mode||3==a.mode||5==a.mode?a.Db.connect(a.Te):
a.Db.connect(a.Wc)};a.prototype.to=function(a){var c=this,b=this.g.Ia;c.Vj();this.g.L("createBufferSoundSource()");b.decodeAudioData(a,function(a){c.Ef=a;c.Db.buffer=a;c.g.L("audio Data decoded");c.ej&&(c.Pc(),c.ej=!1)})};a.prototype.Pc=function(){var a=this.g.Ia,c=this.xe;this.Ef?(null==this.Db&&(this.Vj(),this.Db.buffer=this.Ef),this.Cg=a.currentTime-c,this.xe=0,this.Ae=!0,this.Qh=!1,this.Db.start(0,c),this.g.L("buffer Source started")):(this.g.L("bufferSoundPlay() -> no audio buffer -> playWhenReady"),
this.ej=!0)};a.prototype.li=function(){var a=this.g.Ia.currentTime-this.Cg;this.Se();this.xe=a};a.prototype.Se=function(){this.Db&&this.Ae&&(this.Qh=!0,this.Db.disconnect(),this.Db.stop(0),this.Db=null);this.Cg=this.xe=0;this.Ae=!1};a.prototype.wm=function(){var a=this.g.Ia;return this.xe?this.xe:this.Cg?a.currentTime-this.Cg:0};a.prototype.xm=function(a){this.Se();this.xe=a;this.Pc()};a.prototype.addElement=function(){var a=-1,c=this,b=this.g,g=this.g.Ia;try{for(var l=!1,h=0;h<b.T.length;h++)b.T[h].id==
c.id&&(a=h,null==b.T[h].b&&!b.T[h].ja||b.T[h].url.join()!=c.url.join()||b.T[h].loop!=c.loop||b.T[h].mode!=c.mode||(l=!0));if(l)b.L("Keep playing "+c.id);else{if(0<=a){var v=b.T[a];if(null!=v.b||v.ja)if(g&&b.Fa.enabled)b.Fa.Gg.push(v),1!=b.C.Pa&&2!=b.C.Pa&&b.Fa.Ci(v);else{try{v.ja?v.li():v.b.pause()}catch(e){b.L(e)}try{v.xd()}catch(e){b.L(e)}}}if(g&&b.Ld&&(2==this.mode||3==this.mode||5==this.mode)){if(0<c.url.length){c.ja=!0;c.ei();var m=new XMLHttpRequest;m.open("GET",b.fc(c.url[0]),!0);m.responseType=
"arraybuffer";m.onload=function(){c.to(m.response)};m.send();c.dh=!1}}else{c.b=document.createElement("audio");c.b.crossOrigin=b.crossOrigin;c.b.setAttribute("class","ggmedia");b.cf&&c.b.setAttribute("id",b.cf+c.id);for(h=0;h<c.url.length;h++)l=void 0,l=document.createElement("source"),""!=c.url[h]&&"#"!=c.url[h]&&(l.crossOrigin=b.crossOrigin,l.setAttribute("src",b.fc(c.url[h])),c.b.appendChild(l));c.b.volume=c.level*b.W;0<c.b.childNodes.length&&(b.U.appendChild(c.b),c.b.addEventListener("ended",
function(){c.Dl()},!1),g&&(c.ei(),c.dh=!1,0==c.loop&&c.source.mediaElement&&(c.source.mediaElement.loop=!0)))}1<=c.loop&&(c.Sc=c.loop-1);0<=a?b.T[a]=c:b.T.push(c);c.Zh();1!=c.mode&&2!=c.mode&&3!=c.mode&&5!=c.mode||!(0<=c.loop)||g&&b.Fa.enabled||(c.ja||(c.b.autoplay=!0),c.autoplay=!0);0==c.mode&&0<=c.loop&&(c.autoplay=!0)}}catch(e){this.g.L(e)}};a.prototype.xd=function(){try{this.g.L("Remove Snd:"+this.id),this.ja||(this.g.U.removeChild(this.b),this.b=null)}catch(a){this.g.L(a)}};a.prototype.Ib=function(a){b.prototype.Ib.call(this,
a);var c;(c=a.getAttributeNode("url"))&&this.url.push(c.nodeValue.toString());if(c=a.getAttributeNode("level"))this.level=Number(c.nodeValue);if(c=a.getAttributeNode("loop"))this.loop=Number(c.nodeValue);if(c=a.getAttributeNode("mode"))this.mode=Number(c.nodeValue);if(c=a.getAttributeNode("field"))this.dk=Number(c.nodeValue);if(c=a.getAttributeNode("ambientlevel"))this.Ac=Number(c.nodeValue);if(c=a.getAttributeNode("pansize"))this.Gb=Number(c.nodeValue);if(c=a.getAttributeNode("tiltsize"))this.Uh=
Number(c.nodeValue);for(a=a.firstChild;a;)"source"==a.nodeName&&(c=a.getAttributeNode("url"))&&this.url.push(c.nodeValue.toString()),a=a.nextSibling};return a}(e);p.lm=k;k=function(b){function a(a){b.call(this,a);this.poster="";this.Bb=this.Ma=this.Aa=0;this.f=50;this.Ta=0;this.bd=this.Wf=!1}__extends(a,b);a.prototype.me=function(){1!=this.Ta&&4!=this.Ta||this.Sf(!this.lb);2==this.Ta&&this.g.gl(this.id)};a.prototype.Sf=function(a){var c=this.g,b=c.Ia;if(1==this.Ta||4==this.Ta)if(this.lb=a,this.g.Cb)(c=
c.ia)&&c.activateSound(this.id,this.lb?1:0);else{if(this.lb)this.b.style.pointerEvents="auto",this.b.style.cursor="pointer",this.b.play(),this.b.style.zIndex=(c.Ng+8E4).toString(),this.b.style[this.g.Vc]="all 1s ease 0s",c.ze(this.id);else{this.b.style.pointerEvents="none";this.b.style.cursor="default";this.b.style.zIndex=c.Ng.toString();this.b.style[this.g.Vc]="all 1s ease 0s";this.fj=!0;var g=this;setTimeout(function(){g.fj=!1},1E3)}if(b&&(2==this.mode||3==this.mode||5==this.mode)){var b=b.currentTime,
l=this.qc.gain.value,h=this.tc.gain.value,v=this.rc.gain.value,m=this.sc.gain.value;this.lb?(this.qc.gain.linearRampToValueAtTime(l,b),this.qc.gain.linearRampToValueAtTime(this.level*c.W,b+1),this.tc.gain.linearRampToValueAtTime(h,b),this.tc.gain.linearRampToValueAtTime(this.level*c.W,b+1),this.rc.gain.linearRampToValueAtTime(v,b),this.rc.gain.linearRampToValueAtTime(0,b+1),this.sc.gain.linearRampToValueAtTime(m,b),this.sc.gain.linearRampToValueAtTime(0,b+1)):(this.qc.gain.linearRampToValueAtTime(l,
b),this.qc.gain.linearRampToValueAtTime(this.Lc,b+1),this.tc.gain.linearRampToValueAtTime(h,b),this.tc.gain.linearRampToValueAtTime(this.Mc,b+1),this.rc.gain.linearRampToValueAtTime(v,b),this.rc.gain.linearRampToValueAtTime(this.yc,b+1),this.sc.gain.linearRampToValueAtTime(m,b),this.sc.gain.linearRampToValueAtTime(this.zc,b+1))}this.Rf=!0;this.g.Vl()}2==this.Ta&&(a?this.g.ze(this.id):this.g.dj(this.id))};a.prototype.Tf=function(){this.Rf=!1;this.b.style[this.g.Vc]="none"};a.prototype.Ap=function(){0==
this.loop?this.b.play():0<this.Sc?(this.Sc--,this.b.currentTime=0,this.b.play()):this.Mk=!1};a.prototype.Ib=function(a){b.prototype.Ib.call(this,a);var c;if(c=a.getAttributeNode("poster"))this.poster=String(c.nodeValue);if(c=a.getAttributeNode("rotx"))this.Aa=Number(c.nodeValue);if(c=a.getAttributeNode("roty"))this.Ma=Number(c.nodeValue);if(c=a.getAttributeNode("rotz"))this.Bb=Number(c.nodeValue);if(c=a.getAttributeNode("fov"))this.f=Number(c.nodeValue);if(c=a.getAttributeNode("width"))this.Dc=Number(c.nodeValue);
if(c=a.getAttributeNode("height"))this.Xc=Number(c.nodeValue);this.nd=(c=a.getAttributeNode("stretch"))?Number(c.nodeValue):1;if(c=a.getAttributeNode("clickmode"))this.Ta=Number(c.nodeValue);if(c=a.getAttributeNode("handcursor"))this.Wf=1==Number(c.nodeValue)};a.prototype.addElement=function(){var a=this,c=this.g;try{a.b=document.createElement("video");a.b.setAttribute("class","ggmedia");a.b.crossOrigin=c.crossOrigin;a.b.hidden=!0;a.b.addEventListener("click",function(a){a.stopPropagation()});c.cf&&
a.b.setAttribute("id",c.cf+a.id);if(c.Kg)a.b.setAttribute("webkit-playsinline","webkit-playsinline"),a.b.setAttribute("style","display: none; max-width:none;");else if(a.b.setAttribute("style","max-width:none;pointer-events:none;"),a.b.setAttribute("webkit-playsinline","webkit-playsinline"),1==a.Ta||4==a.Ta)a.b.addEventListener(c.am(),function(){a.Tf()},!1),a.b.addEventListener("transitionend",function(){a.Tf()},!1);var b;for(b=0;b<a.url.length;b++){var g=void 0,g=document.createElement("source");
g.crossOrigin=c.crossOrigin;g.setAttribute("src",c.fc(a.url[b]));a.b.appendChild(g)}""!=a.poster&&(a.b.poster=c.fc(a.poster),0>a.loop&&(a.b.a="none"));a.b.volume=a.level*c.W;1<=a.loop&&(a.Sc=a.loop-1);(1==a.mode||2==a.mode||3==a.mode||5==a.mode)&&0<=a.loop&&(a.b.autoplay=!0,a.Mk=!0,a.autoplay=!0);c.J.push(this);c.Kg?c.U.appendChild(a.b):(a.b.style.position="absolute",a.Dc&&(a.b.width=a.Dc),a.Xc&&(a.b.height=a.Xc),c.D.appendChild(a.b),a.ei());a.b.addEventListener("ended",function(){a.Ap()},!1)}catch(l){c.L(l)}};
a.prototype.registerElement=function(a,c){this.bd=!0;this.b=c;this.id=a;this.level=1;this.g.J.push(this)};a.prototype.xd=function(){var a=this.g;a.Kg&&(a.H.deleteTexture(this.lc),this.lc=0,a.U.removeChild(this.b));a.Wl&&a.D.removeChild(this.b);this.b=null};return a}(k);p.Ij=k;k=function(b){function a(a){b.call(this,a);this.url="";this.Bb=this.Ma=this.Aa=0;this.f=50;this.Ta=0;this.Wf=!1;this.Xc=this.Dc=100;this.nd=1}__extends(a,b);a.prototype.Ib=function(a){b.prototype.Ib.call(this,a);var c;if(c=a.getAttributeNode("url"))this.url=
c.nodeValue.toString();if(c=a.getAttributeNode("rotx"))this.Aa=Number(c.nodeValue);if(c=a.getAttributeNode("roty"))this.Ma=Number(c.nodeValue);if(c=a.getAttributeNode("rotz"))this.Bb=Number(c.nodeValue);if(c=a.getAttributeNode("fov"))this.f=Number(c.nodeValue);if(c=a.getAttributeNode("width"))this.Dc=Number(c.nodeValue);if(c=a.getAttributeNode("height"))this.Xc=Number(c.nodeValue);this.nd=(c=a.getAttributeNode("stretch"))?Number(c.nodeValue):1;if(c=a.getAttributeNode("clickmode"))this.Ta=Number(c.nodeValue);
if(c=a.getAttributeNode("handcursor"))this.Wf=1==Number(c.nodeValue);for(a=a.firstChild;a;)"source"==a.nodeName&&(c=a.getAttributeNode("url"))&&(this.url=c.nodeValue.toString()),a=a.nextSibling};a.prototype.Tf=function(){this.Rf=!1;this.b.style[this.g.Vc]="none"};a.prototype.me=function(){1!==this.Ta&&4!==this.Ta||this.Sf(!this.lb)};a.prototype.Sf=function(a){var c=this.g;if(1===this.Ta||4===this.Ta)this.lb=a,this.g.Cb?(a=this.g.ia)&&a.activateSound(this.id,this.lb?1:0):(this.lb?(this.b.style.pointerEvents=
"auto",this.b.style.cursor="pointer",this.b.style.zIndex=(c.Ng+8E4).toString()):(this.b.style.pointerEvents="none",this.b.style.cursor="default",this.b.style.zIndex=c.Ng.toString()),this.b.style[c.Vc]="all 1s ease 0s",this.Rf=!0,c.Ql())};a.prototype.addElement=function(){var a=this,c=this.g;try{a.b=document.createElement("img");a.b.setAttribute("style","-webkit-user-drag:none; max-width:none; pointer-events:none;");a.b.setAttribute("class","ggmedia");a.b.hidden=!0;a.b.addEventListener("click",function(a){a.stopPropagation()});
c.cf&&a.b.setAttribute("id",c.cf+a.id);a.b.ondragstart=function(){return!1};if(1===a.Ta||4===a.Ta)a.b.addEventListener(c.am(),function(){a.Tf()},!1),a.b.addEventListener("transitionend",function(){a.Tf()},!1);a.b.setAttribute("src",c.fc(a.url));a.Dc&&(a.b.width=a.Dc);a.Xc&&(a.b.height=a.Xc);c.Za.push(a);a.b.style.position="absolute";c.D.appendChild(a.b)}catch(b){c.L("Error addimage:"+b)}};a.prototype.xd=function(){this.g.D.removeChild(this.b);this.b=null};return a}(e);p.jm=k;e=function(b){function a(a){b.call(this,
a);this.alpha=this.Qj=50;this.type=0;this.color=16777215}__extends(a,b);a.prototype.Ib=function(a){b.prototype.Ib.call(this,a);var c;if(c=a.getAttributeNode("blinding"))this.Qj=Number(c.nodeValue);if(c=a.getAttributeNode("alpha"))this.alpha=Number(c.nodeValue);if(c=a.getAttributeNode("type"))this.type=Number(c.nodeValue);if(c=a.getAttributeNode("color"))this.color=1*Number(c.nodeValue)};return a}(e);p.km=e;e=function(){function b(a){this.type="empty";this.Cl=this.id=this.target=this.description=this.title=
this.url="";this.Mg=100;this.Vf=20;this.ci=!1;this.b=null;this.ib=this.oa=this.i=this.pan=0;this.cc=a.w.cc;this.$b=a.w.$b;this.bc=a.w.bc;this.Zb=a.w.Zb;this.bf=a.w.bf;this.Lg=[]}b.prototype.Ye=function(){this.id=this.id;this.pan=this.pan;this.tilt=this.i;this.url=this.url;this.target=this.target;this.title=this.title;this.description=this.description;this.skinid=this.Cl;this.obj=this.b};b.prototype.Ib=function(a){var d;if(d=a.getAttributeNode("url"))this.url=d.nodeValue.toString();if(d=a.getAttributeNode("target"))this.target=
d.nodeValue.toString();if(d=a.getAttributeNode("title"))this.title=d.nodeValue.toString();if(d=a.getAttributeNode("description"))this.description=d.nodeValue.toString();if(d=a.getAttributeNode("id"))this.id=d.nodeValue.toString();if(d=a.getAttributeNode("skinid"))this.Cl=d.nodeValue.toString();if(d=a.getAttributeNode("width"))this.Mg=Number(d.nodeValue);if(d=a.getAttributeNode("height"))this.Vf=Number(d.nodeValue);if(d=a.getAttributeNode("wordwrap"))this.ci=1==Number(d.nodeValue);d=a.getAttributeNode("pan");
this.pan=1*(d?Number(d.nodeValue):0);d=a.getAttributeNode("tilt");this.i=1*(d?Number(d.nodeValue):0);if(d=a.getAttributeNode("bordercolor"))this.cc=1*Number(d.nodeValue);if(d=a.getAttributeNode("backgroundcolor"))this.$b=1*Number(d.nodeValue);if(d=a.getAttributeNode("borderalpha"))this.bc=1*Number(d.nodeValue);if(d=a.getAttributeNode("backgroundalpha"))this.Zb=1*Number(d.nodeValue);if(d=a.getAttributeNode("handcursor"))this.bf=1==Number(d.nodeValue);for(a=a.firstChild;a;){if("vertex"==a.nodeName){var c=
{pan:0,i:0};d=a.getAttributeNode("pan");c.pan=1*(d?Number(d.nodeValue):0);d=a.getAttributeNode("tilt");c.i=1*(d?Number(d.nodeValue):0);this.Lg.push(c)}a=a.nextSibling}this.Ye()};return b}();p.qh=e})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(b,a){this.x=b;this.y=a}e.prototype.$a=function(b,a){this.x=b;this.y=a};e.prototype.pd=function(b,a,d){var c=a.y-b.y;this.x=b.x+(a.x-b.x)*d;this.y=b.y+c*d};e.prototype.vm=function(b,a,d,c,f){var g;g=new e;g.pd(b,d,f);b=new e;b.pd(d,c,f);d=new e;d.pd(c,a,f);a=new e;a.pd(g,b,f);g=new e;g.pd(b,d,f);b=new e;b.pd(a,g,f);this.x=b.x;this.y=b.y};e.prototype.ii=function(b,a,d,c,f){var g=new e,l=.5,h=.25,v;do g.vm(b,a,d,c,l),v=g.x-f,l=0<v?l-h:l+h,h/=2;while(.01<Math.abs(v));
this.x=g.x;this.y=g.y};return e}();p.oc=e})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(b,a,d,c,f){this.x=b;this.y=a;this.z=d;this.fd=c;this.Kb=f}e.prototype.$a=function(b,a,d,c,f){this.x=b;this.y=a;this.z=d;this.fd=c;this.Kb=f};e.prototype.toString=function(){return"("+this.x+","+this.y+","+this.z+") - ("+this.fd+","+this.Kb+")"};e.prototype.Aa=function(b){var a=Math.sin(b);b=Math.cos(b);var d=this.y,c=this.z;this.y=b*d-a*c;this.z=a*d+b*c};e.prototype.yo=function(){var b=this.y;this.y=-this.z;this.z=b};e.prototype.xo=function(){var b=this.y;
this.y=this.z;this.z=-b};e.prototype.Ma=function(b){var a=Math.sin(b);b=Math.cos(b);var d=this.x,c=this.z;this.x=b*d+a*c;this.z=-a*d+b*c};e.prototype.zo=function(){var b=this.x;this.x=-this.z;this.z=b};e.prototype.Bb=function(b){var a=Math.sin(b);b=Math.cos(b);var d=this.x,c=this.y;this.x=b*d-a*c;this.y=a*d+b*c};e.prototype.rl=function(){var b=this.x;this.x=-this.y;this.y=b};e.prototype.yd=function(b){return this.Aa(b*Math.PI/180)};e.prototype.Be=function(b){return this.Ma(b*Math.PI/180)};e.prototype.Ce=
function(b){return this.Bb(b*Math.PI/180)};e.prototype.clone=function(){return new e(this.x,this.y,this.z,this.fd,this.Kb)};e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};e.prototype.normalize=function(){var b=this.length();0<b&&(b=1/b,this.x*=b,this.y*=b,this.z*=b)};e.prototype.Gh=function(b){return this.x*b.x+this.y*b.y+this.z*b.z};e.prototype.fk=function(b,a){var d;d=Math.cos(a*Math.PI/180);this.x=d*Math.sin(b*Math.PI/180);this.y=Math.sin(a*Math.PI/180);
this.z=d*Math.cos(b*Math.PI/180)};e.prototype.rm=function(){return 180*Math.atan2(-this.x,-this.z)/Math.PI};e.prototype.sm=function(){return 180*Math.asin(this.y/this.length())/Math.PI};e.prototype.pd=function(b,a,d){this.x=b.x*d+a.x*(1-d);this.y=b.y*d+a.y*(1-d);this.z=b.z*d+a.z*(1-d);this.fd=b.fd*d+a.fd*(1-d);this.Kb=b.Kb*d+a.Kb*(1-d)};return e}();p.sa=e})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(){this.vl()}e.prototype.vl=function(){this.Qb=1;this.hc=this.Rb=this.yb=0;this.Sb=1;this.Tb=this.Eb=this.ic=0;this.Fb=1};e.prototype.clone=function(b){this.Qb=b.Qb;this.yb=b.yb;this.Rb=b.Rb;this.hc=b.hc;this.Sb=b.Sb;this.ic=b.ic;this.Eb=b.Eb;this.Tb=b.Tb;this.Fb=b.Fb};e.prototype.Mo=function(b){var a=Math.cos(b);b=Math.sin(b);this.Qb=1;this.hc=this.Rb=this.yb=0;this.Sb=a;this.ic=-b;this.Eb=0;this.Tb=b;this.Fb=a};e.prototype.No=function(b){var a=Math.cos(b);
b=Math.sin(b);this.Qb=a;this.yb=0;this.Rb=b;this.hc=0;this.Sb=1;this.ic=0;this.Eb=-b;this.Tb=0;this.Fb=a};e.prototype.Oo=function(b){var a=Math.cos(b);b=Math.sin(b);this.Qb=a;this.yb=-b;this.Rb=0;this.hc=b;this.Sb=a;this.Tb=this.Eb=this.ic=0;this.Fb=1};e.prototype.Jo=function(b){this.Mo(b*Math.PI/180)};e.prototype.Ko=function(b){this.No(b*Math.PI/180)};e.prototype.Lo=function(b){this.Oo(b*Math.PI/180)};e.prototype.yd=function(b){this.Ic||(this.Ic=new e,this.Nd=new e);this.Ic.Jo(b);this.Nd.clone(this);
this.multiply(this.Ic,this.Nd)};e.prototype.Be=function(b){this.Ic||(this.Ic=new e,this.Nd=new e);this.Ic.Ko(b);this.Nd.clone(this);this.multiply(this.Ic,this.Nd)};e.prototype.Ce=function(b){this.Ic||(this.Ic=new e,this.Nd=new e);this.Ic.Lo(b);this.Nd.clone(this);this.multiply(this.Ic,this.Nd)};e.prototype.multiply=function(b,a){this.Qb=b.Qb*a.Qb+b.yb*a.hc+b.Rb*a.Eb;this.yb=b.Qb*a.yb+b.yb*a.Sb+b.Rb*a.Tb;this.Rb=b.Qb*a.Rb+b.yb*a.ic+b.Rb*a.Fb;this.hc=b.hc*a.Qb+b.Sb*a.hc+b.ic*a.Eb;this.Sb=b.hc*a.yb+
b.Sb*a.Sb+b.ic*a.Tb;this.ic=b.hc*a.Rb+b.Sb*a.ic+b.ic*a.Fb;this.Eb=b.Eb*a.Qb+b.Tb*a.hc+b.Fb*a.Eb;this.Tb=b.Eb*a.yb+b.Tb*a.Sb+b.Fb*a.Tb;this.Fb=b.Eb*a.Rb+b.Tb*a.ic+b.Fb*a.Fb};e.prototype.ao=function(b){var a,d,c;a=b.x;d=b.y;c=b.z;b.x=a*this.Qb+d*this.yb+c*this.Rb;b.y=a*this.hc+d*this.Sb+c*this.ic;b.z=a*this.Eb+d*this.Tb+c*this.Fb};return e}();p.cl=e})(ggP2VR||(ggP2VR={}));
(function(p){p.aa={create:function(e){var k;"undefined"!=typeof Float32Array?k=new Float32Array(16):k=Array(16);e&&(k[0]=e[0],k[1]=e[1],k[2]=e[2],k[3]=e[3],k[4]=e[4],k[5]=e[5],k[6]=e[6],k[7]=e[7],k[8]=e[8],k[9]=e[9],k[10]=e[10],k[11]=e[11],k[12]=e[12],k[13]=e[13],k[14]=e[14],k[15]=e[15]);return k},set:function(e,k){k[0]=e[0];k[1]=e[1];k[2]=e[2];k[3]=e[3];k[4]=e[4];k[5]=e[5];k[6]=e[6];k[7]=e[7];k[8]=e[8];k[9]=e[9];k[10]=e[10];k[11]=e[11];k[12]=e[12];k[13]=e[13];k[14]=e[14];k[15]=e[15];return k},pe:function(e){e[0]=
1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e},multiply:function(e,k,b){b||(b=e);var a=e[0],d=e[1],c=e[2],f=e[3],g=e[4],l=e[5],h=e[6],v=e[7],m=e[8],q=e[9],p=e[10],r=e[11],u=e[12],t=e[13],x=e[14];e=e[15];var z=k[0],n=k[1],C=k[2],A=k[3],y=k[4],B=k[5],D=k[6],E=k[7],F=k[8],H=k[9],I=k[10],J=k[11],K=k[12],L=k[13],M=k[14];k=k[15];b[0]=z*a+n*g+C*m+A*u;b[1]=z*d+n*l+C*q+A*t;b[2]=z*c+n*h+C*p+A*x;b[3]=z*f+n*v+C*r+A*e;b[4]=y*a+B*g+D*m+
E*u;b[5]=y*d+B*l+D*q+E*t;b[6]=y*c+B*h+D*p+E*x;b[7]=y*f+B*v+D*r+E*e;b[8]=F*a+H*g+I*m+J*u;b[9]=F*d+H*l+I*q+J*t;b[10]=F*c+H*h+I*p+J*x;b[11]=F*f+H*v+I*r+J*e;b[12]=K*a+L*g+M*m+k*u;b[13]=K*d+L*l+M*q+k*t;b[14]=K*c+L*h+M*p+k*x;b[15]=K*f+L*v+M*r+k*e;return b},translate:function(e,k,b){var a=k[0],d=k[1];k=k[2];if(!b||e==b)return e[12]=e[0]*a+e[4]*d+e[8]*k+e[12],e[13]=e[1]*a+e[5]*d+e[9]*k+e[13],e[14]=e[2]*a+e[6]*d+e[10]*k+e[14],e[15]=e[3]*a+e[7]*d+e[11]*k+e[15],e;var c=e[0],f=e[1],g=e[2],l=e[3],h=e[4],v=e[5],
m=e[6],q=e[7],p=e[8],r=e[9],u=e[10],t=e[11];b[0]=c;b[1]=f;b[2]=g;b[3]=l;b[4]=h;b[5]=v;b[6]=m;b[7]=q;b[8]=p;b[9]=r;b[10]=u;b[11]=t;b[12]=c*a+h*d+p*k+e[12];b[13]=f*a+v*d+r*k+e[13];b[14]=g*a+m*d+u*k+e[14];b[15]=l*a+q*d+t*k+e[15];return b},scale:function(e,k,b){var a=k[0],d=k[1];k=k[2];if(!b||e==b)return e[0]*=a,e[1]*=a,e[2]*=a,e[3]*=a,e[4]*=d,e[5]*=d,e[6]*=d,e[7]*=d,e[8]*=k,e[9]*=k,e[10]*=k,e[11]*=k,e;b[0]=e[0]*a;b[1]=e[1]*a;b[2]=e[2]*a;b[3]=e[3]*a;b[4]=e[4]*d;b[5]=e[5]*d;b[6]=e[6]*d;b[7]=e[7]*d;b[8]=
e[8]*k;b[9]=e[9]*k;b[10]=e[10]*k;b[11]=e[11]*k;b[12]=e[12];b[13]=e[13];b[14]=e[14];b[15]=e[15];return b},rotate:function(e,k,b,a){var d=b[0],c=b[1];b=b[2];var f=Math.sqrt(d*d+c*c+b*b);if(!f)return null;1!=f&&(f=1/f,d*=f,c*=f,b*=f);var g=Math.sin(k),l=Math.cos(k),h=1-l;k=e[0];var f=e[1],v=e[2],m=e[3],q=e[4],p=e[5],r=e[6],u=e[7],t=e[8],x=e[9],z=e[10],n=e[11],C=d*d*h+l,A=c*d*h+b*g,y=b*d*h-c*g,B=d*c*h-b*g,D=c*c*h+l,E=b*c*h+d*g,F=d*b*h+c*g,d=c*b*h-d*g,c=b*b*h+l;a?e!=a&&(a[12]=e[12],a[13]=e[13],a[14]=e[14],
a[15]=e[15]):a=e;a[0]=k*C+q*A+t*y;a[1]=f*C+p*A+x*y;a[2]=v*C+r*A+z*y;a[3]=m*C+u*A+n*y;a[4]=k*B+q*D+t*E;a[5]=f*B+p*D+x*E;a[6]=v*B+r*D+z*E;a[7]=m*B+u*D+n*E;a[8]=k*F+q*d+t*c;a[9]=f*F+p*d+x*c;a[10]=v*F+r*d+z*c;a[11]=m*F+u*d+n*c;return a},Tm:function(e,k,b,a,d,c,f){f||(f=p.aa.create());var g=k-e,l=a-b,h=c-d;f[0]=2*d/g;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=2*d/l;f[6]=0;f[7]=0;f[8]=(k+e)/g;f[9]=(a+b)/l;f[10]=-(c+d)/h;f[11]=-1;f[12]=0;f[13]=0;f[14]=-(c*d*2)/h;f[15]=0;return f},perspective:function(e,k,b,a,d){e=
b*Math.tan(e*Math.PI/360);k=e*k;return p.aa.Tm(-k,k,-e,e,b,a,d)},Mp:function(e,k,b,a,d,c,f){f||(f=p.aa.create());var g=k-e,l=a-b,h=c-d;f[0]=2/g;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=2/l;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=-2/h;f[11]=0;f[12]=-(e+k)/g;f[13]=-(a+b)/l;f[14]=-(c+d)/h;f[15]=1;return f}}})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(b){this.la=p.aa.create();this.nb=p.aa.create();this.Yc=0;this.Va=[];this.bg=!1;this.tj=this.Gi=this.jj=1;this.Ve=1E6;this.Wg=[!1,!1,!1,!1,!1,!1];this.Ph=!1;this.zi=[];this.Jj=8;this.Un=new p.cl;this.Id=[];this.g=b;if(b.Ld||b.mh)b.Eg=2}e.prototype.Zf=function(){var b=this.g.H;if(b){var a=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n\t\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\tgl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n\t\t\t\t\t}");
b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(console&&console.log(b.getShaderInfoLog(a)),alert(b.getShaderInfoLog(a)),a=null);var d=b.createShader(b.VERTEX_SHADER);this.Cc(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n\t\t\t\tattribute vec2 aTextureCoord;\n\t\t\t\tuniform mat4 uMVMatrix;\n\t\t\t\tuniform mat4 uPMatrix;\n\t\t\t\tuniform float uZoffset;\n\t\t\t\tvarying vec2 vTextureCoord;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n\t\t\t\t\tgl_Position.z += uZoffset;\n\t\t\t\t\tvTextureCoord = aTextureCoord;\n\t\t\t\t}");
this.F=b.createProgram();this.gf(this.F,d,a);this.F.$=b.getAttribLocation(this.F,"aVertexPosition");b.enableVertexAttribArray(this.F.$);this.F.xa=b.getAttribLocation(this.F,"aTextureCoord");b.enableVertexAttribArray(this.F.xa);this.F.Pd=b.getUniformLocation(this.F,"uPMatrix");this.F.lg=b.getUniformLocation(this.F,"uMVMatrix");this.F.qf=b.getUniformLocation(this.F,"uSampler");this.F.di=b.getUniformLocation(this.F,"uZoffset");a=b.createShader(b.VERTEX_SHADER);this.Cc(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n\t\t\t\tuniform vec2 uCanvasDimensions;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tvec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n\t\t\t\t\tgl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n\t\t\t\t}");
d=b.createShader(b.FRAGMENT_SHADER);this.Cc(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform vec3 uColor;\n\t\t\t\tuniform float uAlpha;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = vec4(uColor, uAlpha);\n\t\t\t\t}");this.ud=b.createProgram();this.gf(this.ud,a,d);this.ud.$=b.getAttribLocation(this.ud,"aVertexPosition");b.enableVertexAttribArray(this.ud.$);d=b.createShader(b.VERTEX_SHADER);this.Cc(d,"precision highp float;\n\t\t\t\tattribute vec3 aVertexPosition;\n\t\t\t\tvarying vec2 vTextureCoord;\n\t\t\t\tuniform vec2 uCanvasDimensions;\n\t\t\t\tuniform vec4 uRect;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tvec2 pos = vec2(uRect.x + uRect.z*aVertexPosition.x,uRect.y + uRect.w*aVertexPosition.y);\n\t\t\t\t\tvec2 pointNorm = (pos / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n\t\t\t\t\tgl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 1.0, 1.0);\n\t\t\t\t\tvTextureCoord.s=aVertexPosition.x;\n\t\t\t\t\tvTextureCoord.t=1.0-aVertexPosition.y;\n\t\t\t\t}");
a=b.createShader(b.FRAGMENT_SHADER);this.Cc(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = texture2D(uSampler,vTextureCoord);\n\t\t\t\t}");this.Mf=b.createProgram();this.gf(this.Mf,d,a)}};e.prototype.lh=function(){var b=this.g,a=b.H,d,c;a?(d=a.createShader(a.FRAGMENT_SHADER),c=this.Li(13),this.Cc(d,c),c=a.createShader(a.VERTEX_SHADER),
this.Cc(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
this.ll=a.createProgram(),this.gf(this.ll,c,d),d=a.createShader(a.FRAGMENT_SHADER),c=this.Li(4),this.Cc(d,c),c=a.createShader(a.VERTEX_SHADER),this.Cc(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
this.ml=a.createProgram(),this.gf(this.ml,c,d),d=a.createShader(a.FRAGMENT_SHADER),c=this.Li(b.s.format),this.Cc(d,c),c=a.createShader(a.VERTEX_SHADER),this.Cc(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
this.nl=a.createProgram(),this.gf(this.nl,c,d),this.Ih||(this.Ih=a.createBuffer())):this.g.L("No WebGL to initRemapShader!")};e.prototype.Cc=function(b,a){var d=this.g.H;d.shaderSource(b,a);d.compileShader(b);d.getShaderParameter(b,d.COMPILE_STATUS)||(console&&console.log(d.getShaderInfoLog(b)),O&&alert(d.getShaderInfoLog(b)))};e.prototype.gf=function(b,a,d){var c=this.g.H;c.attachShader(b,a);c.attachShader(b,d);c.linkProgram(b);c.getProgramParameter(b,c.LINK_STATUS)||(alert("Could not initialise shader program"),
console&&console.log(c.getError()));c.useProgram(b)};e.prototype.Li=function(b){var a=this.g,d;d="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#define M_PI 3.14159265358979323846\nvarying vec2 dst;\nuniform vec2 srcScale;\nuniform vec2 srcOffset;\nuniform float rectDstDistance;\nuniform float fisheyeDistance;\nuniform float stereoDistance;\nuniform float directionBlend;\nuniform mat4 matRotate; // = mat4( 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0 );\nconst float rectSrcDistance = 1.0;\nuniform vec2 tonemap;\n";
d=(13==b?d+"uniform samplerCube cubeTexture;":d+"uniform sampler2D tileTexture;\n")+"void main()\n{\n";d+="vec4 direction;\n";d+="vec2 src;\n";d+="vec2 srcCord;\n";d+="vec2 texc;\n";var c=this.vk(a.ya());a.ya()!=a.jc&&0!=a.jc?(a=this.vk(a.jc),d+="vec4 direction1,direction2;\n",d+=c.replace("direction=","direction1="),d+=a.replace("direction=","direction2="),d+="direction=normalize(mix(direction1, direction2,1.0-directionBlend));\n"):d+=c;d+="direction=direction*matRotate;\n";13==b&&(d+="direction.z=-direction.z;",
d+="gl_FragColor = textureCube(cubeTexture, direction.xyz);");4==b&&(d+="float iz=1.0/(direction.z * rectSrcDistance);\n",d+="src.x=-direction.x*iz;\n",d+="src.y= direction.y*iz;\n",d+="texc=src * srcScale + srcOffset;\n",d+="if (",d+="(direction.z<0.0) && ",d+="(texc.x>=0.0) && (texc.x<=1.0) && (texc.y>=0.0) && (texc.y<=1.0)) {\n",d+="  gl_FragColor = texture2D(tileTexture, texc);\n",d+="} else {\n",d+="  discard;\n",d+="}\n");1==b&&(d+="src.x=atan(float(-direction.x), float(-direction.z));",d+=
"src.y=asin(direction.y);\n",d+="texc=src * srcScale + srcOffset;\n",d+="gl_FragColor = texture2D(tileTexture, texc);\n");14==b&&(d+="vec2 cf;\n",d+="if ((direction.z<0.0) && (direction.z<=-abs(direction.x)) && (direction.z<=-abs(direction.y))) {\n",d+="  src.x=-direction.x/direction.z;\n",d+="  src.y=+direction.y/direction.z;\n",d+="  cf.x=1.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.x>=0.0) && (direction.x>=abs(direction.y)) && (direction.x>=abs(direction.z))) {\n",d+="  src.x=+direction.z/direction.x;\n",
d+="  src.y=-direction.y/direction.x;\n",d+="  cf.x=3.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.z>=0.0) && (direction.z>=abs(direction.x)) && (direction.z>=abs(direction.y))) {\n",d+="  src.x=-direction.x/direction.z;\n",d+="  src.y=-direction.y/direction.z;\n",d+="  cf.x=5.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.x<=0.0) && (direction.x<=-abs(direction.y)) && (direction.x<=-abs(direction.z))) {\n",d+="  src.x=+direction.z/direction.x;\n",d+="  src.y=+direction.y/direction.x;\n",d+="  cf.x=1.0;cf.y=1.0;\n",
d+="}\n",d+="if ((direction.y>=0.0) && (direction.y>=abs(direction.x)) && (direction.y>=abs(direction.z))) {\n",d+="  src.x=+direction.x/direction.y;\n",d+="  src.y=-direction.z/direction.y;\n",d+="  cf.x=5.0;cf.y=1.0;\n",d+="}\n",d+="if ((direction.y<=0.0) && (direction.y<=-abs(direction.x)) && (direction.y<=-abs(direction.z))) {\n",d+="  src.x=-direction.x/direction.y;\n",d+="  src.y=-direction.z/direction.y;\n",d+="  cf.x=3.0;cf.y=1.0;\n",d+="}\n",d+="texc.x=(cf.x+src.x*srcScale.x) / 6.0;\n",d+=
"texc.y=(cf.y+src.y*srcScale.y) / 4.0;\n",d+="gl_FragColor = texture2D(tileTexture, texc);\n");return d+="}\n"};e.prototype.vk=function(b){var a="";switch(b){case 4:a+="direction.x=dst.x*rectDstDistance;\ndirection.y=dst.y*rectDstDistance;\ndirection.z=-1.0;\n";break;case 12:a+="float r,ph,ro;\nr=length(dst.xy)*0.5;\nro=atan(float(dst.x),float(-dst.y));\nph=r / fisheyeDistance;\ndirection.x= sin(ph) * sin(ro);\ndirection.y=-sin(ph) * cos(ro);\ndirection.z=-cos(ph);\n";break;case 9:a+="float n;\nvec2 ind;\nind=dst*stereoDistance;\nn=1.0 + ind.x*ind.x + ind.y*ind.y;\ndirection.x=2.0*ind.x/n;\ndirection.y=2.0*ind.y/n;\ndirection.z=(n-2.0)/n;\n"}return a+
"direction.w=0.0;\ndirection=normalize(direction);\n"};e.prototype.Fk=function(b){var a,d,c,f,g=this.g,l=this.g.H;this.ui=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,this.ui);var h=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];for(a=0;12>a;a++)2>a%3&&(h[a]*=b);l.bufferData(l.ARRAY_BUFFER,new Float32Array(h),l.STATIC_DRAW);this.ce=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,this.ce);var e=[1,0,0,0,0,1,1,1];l.bufferData(l.ARRAY_BUFFER,new Float32Array(e),l.STATIC_DRAW);this.Rc=l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,
this.Rc);var m=[0,1,2,0,2,3];l.bufferData(l.ELEMENT_ARRAY_BUFFER,new Uint16Array(m),l.STATIC_DRAW);var h=[],m=[],e=[],q=new p.sa;for(b=0;6>b;b++){c=b%3;f=3>b?1:0;for(d=0;4>d;d++){q.x=-1;q.y=-1;q.z=1;for(a=0;a<d;a++)q.rl();e.push((0>q.x?.33:0)+.33*c,(0>q.y?0:.5)+.5*f);if(4>b)for(a=0;a<b;a++)q.zo();else 5==b?q.yo():q.xo();h.push(q.x,q.y,q.z)}a=4*b;m.push(0+a,1+a,2+a,0+a,2+a,3+a)}g.s.Gj=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,g.s.Gj);l.bufferData(l.ARRAY_BUFFER,new Float32Array(h),l.STATIC_DRAW);
g.s.Rh=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,g.s.Rh);l.bufferData(l.ARRAY_BUFFER,new Float32Array(e),l.STATIC_DRAW);g.s.Ri=l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,g.s.Ri);l.bufferData(l.ELEMENT_ARRAY_BUFFER,new Uint16Array(m),l.STATIC_DRAW);this.Mn=l.createBuffer();this.Ln=l.createBuffer()};e.prototype.Ni=function(b){var a=this;return function(){try{if(b.eo)return;var d=a.g.H;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,1);var c=!1;null!=b.te&&b.te.complete?b.Ak||(d.bindTexture(d.TEXTURE_2D,
b),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,b.te),c=b.Ak=!0):null!=b.jf&&b.jf.complete&&(d.bindTexture(d.TEXTURE_2D,b),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,b.jf),c=!0);c&&(b.loaded=!0);d.bindTexture(d.TEXTURE_2D,null);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,0)}catch(f){a.g.L(f)}a.g.update(2)}};e.prototype.Gk=function(){var b,a,d=this.g,c=d.H;if(this.Va)for(;0<this.Va.length;)c.deleteTexture(this.Va.pop());this.Va=[];for(var f=0;6>f;f++)a=c.createTexture(),this.Yc++,
a.jf=null,a.te=null,a.Ak=!1,c.bindTexture(c.TEXTURE_2D,a),c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),d.We[f]&&(b=new Image,b.crossOrigin=d.crossOrigin,b.src=d.fc(d.We[f]),a.jf=b,b.addEventListener&&b.addEventListener("load",this.Ni(a),!1),d.Lb.push(b)),this.Va.push(a);for(f=0;6>f;f++)d.Xg[f]&&
(b=new Image,b.crossOrigin=d.crossOrigin,b.src=d.fc(d.Xg[f]),b.addEventListener?b.addEventListener("load",this.Ni(this.Va[f]),!1):b.onload=this.Ni(this.Va[f]),this.Va[f].te=b,d.Lb.push(b));for(f=0;f<d.J.length;f++)d.J[f].bd||(d.J[f].lc=c.createTexture(),d.Yc++,c.bindTexture(c.TEXTURE_2D,d.J[f].lc),c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));d.s.lc=c.createTexture();d.Yc++;c.bindTexture(c.TEXTURE_2D,d.s.lc);c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.bindTexture(c.TEXTURE_2D,null)};e.prototype.Gp=function(){var b=this.g;if(b.m.width!=b.D.offsetWidth||b.m.height!=b.D.offsetHeight)b.m.width=b.D.offsetWidth,
b.m.height=b.D.offsetHeight;b.he&&(b.Ec(0),b.gd());if(b.H){var a=b.H;this.Xh();a.clear(a.DEPTH_BUFFER_BIT);a.useProgram(this.F);this.tf(0);a.uniform1i(this.F.qf,0);a.enableVertexAttribArray(this.F.$);a.enableVertexAttribArray(this.F.xa);a.bindBuffer(a.ARRAY_BUFFER,this.ce);a.vertexAttribPointer(this.F.xa,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Rc);a.uniform1f(this.F.di,1E-4);a.vertexAttribPointer(this.F.$,3,a.FLOAT,!1,0,0);p.aa.pe(this.nb);p.aa.perspective(b.Pb(),
b.mb.width/b.mb.height,.1,100,this.nb);a.uniformMatrix4fv(this.F.Pd,!1,this.nb);for(b=0;6>b;b++)this.tf(b),a.bindBuffer(a.ARRAY_BUFFER,this.ui),a.vertexAttribPointer(this.F.$,3,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.ce),a.vertexAttribPointer(this.F.xa,2,a.FLOAT,!1,0,0),6<=this.Va.length&&this.Va[b].loaded&&(a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.Va[b]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Rc),a.uniform1i(this.F.qf,0),a.uniformMatrix4fv(this.F.lg,!1,this.la),a.uniformMatrix4fv(this.F.Pd,
!1,this.nb),a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0))}};e.prototype.Xh=function(){var b=this.g;if(b.h.lf&&6<b.h.lf.length){var a=parseInt(b.h.lf);b.H.clearColor((a>>16&255)/255,(a>>8&255)/255,(a>>0&255)/255,1)}};e.prototype.tf=function(b,a){void 0===a&&(a=1);var d=this.g;p.aa.pe(this.la);p.aa.rotate(this.la,a*-d.N.c*Math.PI/180,[0,0,1]);p.aa.rotate(this.la,a*-d.i.c*Math.PI/180,[1,0,0]);-1==a?p.aa.rotate(this.la,-d.pan.c*Math.PI/180,[0,1,0]):p.aa.rotate(this.la,(180-d.pan.c)*Math.PI/180,[0,
1,0]);d.ab&&(p.aa.rotate(this.la,-d.ab.pitch*Math.PI/180,[1,0,0]),p.aa.rotate(this.la,d.ab.N*Math.PI/180,[0,0,1]));4>b?p.aa.rotate(this.la,-Math.PI/2*b,[0,1,0]):p.aa.rotate(this.la,Math.PI/2*(5==b?1:-1),[1,0,0])};e.prototype.jp=function(b){var a=this;return function(){a.zi.push(b)}};e.prototype.Km=function(b){this.g.Ca=!0;this.g.Tc=!0;b.loaded=!0;b.kj=0;b.Rd=0;var a=this.g.H;this.ak();a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,1);if(null!=b.h&&b.h.complete){b.eb=a.createTexture();this.g.Yc++;a.bindTexture(a.TEXTURE_2D,
b.eb);try{a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b.h)}catch(d){a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array([128,128,128,250])),this.g.L(d)}}this.g.update(2)};e.prototype.ak=function(){this.g.Ga&&this.g.Ga--;0==this.g.Ga&&this.g.O&&this.g.O.ggLoadedLevels&&this.g.O.ggLoadedLevels()};e.prototype.Lm=function(){if(0<this.zi.length){var b=this.zi.shift();this.Km(b)}};e.prototype.bo=function(b){var a=this;return function(){a.g.Ca=!0;a.g.Tc=!0;var d=
a.g.h;try{if(null!=b&&b.complete){var c=d.I[d.I.length-1],f=d.Ka;c.height=c.width=b.width-2*f;c.M=c.ea=1;for(var g=0;6>g;g++){var l=new p.Kd;l.K=document.createElement("canvas");a.g.Z?(l.K.width=c.width+2*f,l.K.height=c.height+2*f):(l.K.width=d.G+2*f,l.K.height=d.G+2*f);l.Qa=l.K.getContext("2d");l.K.style[a.g.Wa+"Origin"]="0% 0%";l.K.style.overflow="hidden";l.K.style.position="absolute";l.h=b;var h=c.width+2*f,e=c.height+2*f;l.Qa&&l.Qa.drawImage(b,0,g*e,h,e,0,0,h,e);if(a.g.Z&&a.g.H){var m=a.g.H;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,
1);l.eb=m.createTexture();a.g.Yc++;m.bindTexture(m.TEXTURE_2D,l.eb);try{m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,l.K)}catch(q){a.g.L(q)}m.bindTexture(m.TEXTURE_2D,null);m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,0)}a.g.Kc&&(l.K.Jd=-1,a.g.D.insertBefore(l.K,a.g.D.firstChild));c.V[g]=l}c.loaded=!0}}catch(q){a.g.L(q)}a.g.update(2)}};e.prototype.Ml=function(b){var a=this;return function(){a.g.Ca=!0;a.g.Tc=!0;a.ak();b.h=null}};e.prototype.Ep=function(){var b=this.g,a=b.h,d=b.h.I;b.he&&(b.Ec(0),
b.gd());if(b.H){var c=b.H;c.useProgram(this.F);this.Xh();c.clear(c.DEPTH_BUFFER_BIT);c.enable(c.DEPTH_TEST);p.aa.pe(this.nb);p.aa.perspective(b.Pb(),b.mb.width/b.mb.height,.1,100,this.nb);c.uniformMatrix4fv(this.F.Pd,!1,this.nb);b.Sl();b.Xi();var f=b.Di(),g;for(g=d.length-1;g>=f;){var l=d[g],h=1;g==d.length-1&&0==a.Ka&&(h=a.G/(a.G-.5));for(var e=0;6>e;e++){var m;m=this.g.jb.cb[e];var q=m.ye;if(m.gc&&0<q.Wd&&0<q.Ke&&0<q.scale||l.cache){m.Ca=!1;var k;m.Re[g]||(m.Re[g]={Ya:0,ub:0,wb:0,xb:0});k=m.Re[g];
l.cache?(k.Ya=0,k.ub=0,k.wb=l.M-1,k.xb=l.ea-1):b.wk(l,q,k);for(var q=!0,r=k.ub;r<=k.xb;r++)for(var u=k.Ya;u<=k.wb;u++){var t=u+r*l.M+e*l.M*l.ea,x=l.V[t];x||(x=l.V[t]=new p.Kd);this.ah()?x.h||(x.Rd?x.Rd--:(this.vh(x,l,b.Fe(e,g,u,r)),b.Ca=!0)):this.g.xc++;if(x.eb){if(!x.af){t=.5*g+1;x.af=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,x.af);var z=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];z[3]=u*a.G-a.Ka;z[0]=Math.min((u+1)*a.G,l.width)+a.Ka;z[7]=r*a.G-a.Ka;z[1]=Math.min((r+1)*a.G,l.height)+a.Ka;z[4]=z[1];z[6]=z[3];
z[9]=z[0];z[10]=z[7];for(var n=0;12>n;n++)z[n]=0==n%3?h*t*(-2*z[n]/l.width+1):1==n%3?h*t*(-2*z[n]/l.height+1):t;c.bufferData(c.ARRAY_BUFFER,new Float32Array(z),c.STATIC_DRAW)}}else q=!1;x.visible=m.gc}k.Ui=q}}g--}for(e=0;6>e;e++)if(m=b.jb.cb[e],m.gc)for(q=m.ye,this.tf(e),c.uniform1i(this.F.qf,0),c.uniformMatrix4fv(this.F.Pd,!1,this.nb),c.uniformMatrix4fv(this.F.lg,!1,this.la),c.enableVertexAttribArray(this.F.$),c.enableVertexAttribArray(this.F.xa),c.bindBuffer(c.ARRAY_BUFFER,this.ce),c.vertexAttribPointer(this.F.xa,
2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.Rc),c.useProgram(this.F),g=f;g<=d.length-1;){l=d[g];if(m.gc&&0<q.Wd&&m.Re[g]&&0<=m.Re[g].Ya){k=m.Re[g];for(r=k.ub;r<=k.xb;r++)for(u=k.Ya;u<=k.wb;u++)t=u+r*l.M+e*l.M*l.ea,(x=l.V[t])&&x.eb&&(c.uniform1f(this.F.di,1E-4*(u%2+r%2*2)),c.bindBuffer(c.ARRAY_BUFFER,x.af),c.vertexAttribPointer(this.F.$,3,c.FLOAT,!1,0,0),c.bindTexture(c.TEXTURE_2D,x.eb),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0)),x.visible=m.gc;k.Ui&&(g=d.length)}g++}this.lj();b.Tc=!1}};e.prototype.ah=function(){return this.g.Ga<this.g.Eg};e.prototype.vh=function(b,a,d){var c=this.g;c.Qi++;b.h=new Image;b.kj++;b.Rd=1<<b.kj;b.h.onload=this.jp(b);b.h.onerror=this.Ml(b);b.h.onabort=this.Ml(b);b.h.crossOrigin=c.crossOrigin;
b.h.setAttribute("src",d);c.L("load "+d);a.cache&&c.Lb.push(b.h);0==this.g.Ga&&c.O&&c.O.ggReLoadedLevels&&c.O.ggReLoadedLevels();this.g.Ga++};e.prototype.$l=function(){var b=this.g,a=b.h;b.he&&(b.Ec(0),b.gd());if(b.H){var d=b.H;this.Xh();O&&d.clearColor(.2,0,0,1);d.clear(d.DEPTH_BUFFER_BIT);d.disable(d.DEPTH_TEST);d.disable(d.CULL_FACE);d.bindBuffer(d.ARRAY_BUFFER,this.Ih);var c=[0,0];c[2]=b.m.width;c[3]=0;c[4]=b.m.width;c[5]=b.m.height;c[6]=0;c[7]=b.m.height;d.bufferData(d.ARRAY_BUFFER,new Float32Array(c),
d.STATIC_DRAW);this.g.xc=0;if(!this.uc||this.bg)0<a.I.length?this.Im():this.Jm();b.s.$c?this.lo():(d.enable(d.DEPTH_TEST),d.depthRange(0,1),d.depthFunc(d.LESS),this.Ph=!1,0<a.I.length&&this.Fp(),this.uc&&!this.Ph&&this.ko())}};e.prototype.Vo=function(b,a,d,c,f,g,l){var h=this.g,e=h.h,m=h.m,q=d*e.G/a.width,k=(d+1)*e.G/a.width;d=c*e.G/a.height;a=(c+1)*e.G/a.height;1<k&&(f*=2,k=1);1<a&&(f*=2,a=1);f=Math.min(this.Jj,f);var k=(k-q)/f,r=(a-d)/f;c=a=0;var u,t,e={x:0,y:0},x={x:0,y:0},z=0;b.kh=0;var n=h.mg,
C=new p.sa,A=this.Un;A.vl();4>g?A.Be(-90*g):A.yd(5==g?90:-90);h.ab&&(A.Ce(h.ab.N),A.yd(-h.ab.pitch));A.Be(-h.pan.c);A.yd(h.i.c);A.Ce(h.N.c);for(g=0;g<=f;g++)for(var y=0;y<=f;y++)u=2*(q+y*k)-1,t=2*(d+g*r)-1,C.x=1*u,C.y=1*t,C.z=-1,C.normalize(),A.ao(C),u=this.tk(C,e,h.ya()),0!=h.jc&&1>n&&(u=u&&this.tk(C,x,h.jc),e.x=e.x*n+x.x*(1-n),e.y=e.y*n+x.y*(1-n)),u?-1E10<e.x&&1E10>e.x&&-1E10<e.y&&1E10>e.y?-2<e.x&&2>e.x&&-2<e.y&&2>e.y&&(a+=e.x,c+=e.y,z++):e.x=NaN:e.x=NaN,b.Zc[b.kh++]=e.x,b.Zc[b.kh++]=e.y;0<z?(a/=
z,c/=z):l=0;for(d=0;d<b.kh;d+=2)e.x=b.Zc[d],e.y=b.Zc[d+1],h=e.x-a,q=e.y-c,e.x+=h*l,e.y+=q*l,b.Zc[d]=m.width/2+e.x*m.width/2,b.Zc[d+1]=m.height/2-e.y*m.width/2;this.Wo(b,f)};e.prototype.tk=function(b,a,d){var c=!0;switch(d){case 0:case 4:d=1/(b.z*this.jj);a.x=-b.x*d;a.y=b.y*d;0<b.z&&(c=!1);break;case 9:1==b.z&&(c=!1);d=1/((1-b.z)*this.tj);a.x=b.x*d;a.y=-b.y*d;break;case 12:if(d=Math.sqrt(b.x*b.x+b.y*b.y),0==d)a.x=0,a.y=0;else{var f=2*this.Gi*Math.acos(-b.z)/d;if(2<d)return!1;a.x=f*b.x;a.y=-f*b.y}}return c};
e.prototype.Wo=function(b,a){for(var d=this.g,c=[],f,g=b.od=0;g<a;g++)for(var l=0;l<a;l++){c[0]=g+l*(a+1);c[1]=g+1+l*(a+1);c[2]=g+(l+1)*(a+1);c[3]=g+1+(l+1)*(a+1);f=!0;for(var h=0;4>h;h++)isNaN(b.Zc[2*c[0]])&&(f=!1);if(f){for(var e=!1,m=!1,q=!1,k=!1,h=0;4>h;h++){var p=b.Zc[2*c[h]];p<d.m.width&&(m=!0);0<=p&&(e=!0);p=b.Zc[2*c[h]+1];p<d.m.height&&(q=!0);0<=p&&(k=!0)}if(f=f&&m&&e&&q&&k)b.ne[b.od++]=c[0],b.ne[b.od++]=c[3],b.ne[b.od++]=c[2],b.ne[b.od++]=c[0],b.ne[b.od++]=c[1],b.ne[b.od++]=c[3]}}};e.prototype.Fp=
function(){var b=this.g,a=b.h,d=b.h.I;b.he&&(b.Ec(0),b.gd());if(b.H){var c=b.H,f=this.ml;c.useProgram(f);this.Aj(f);c.enable(c.CULL_FACE);c.cullFace(c.FRONT);c.enable(c.DEPTH_TEST);p.aa.pe(this.nb);p.aa.perspective(b.Pb(),b.mb.width/b.mb.height,.1,100,this.nb);c.uniformMatrix4fv(c.getUniformLocation(f,"uPMatrix"),!1,this.nb);this.g.xc=0;b.Xi();var g=b.Di(),l,h=0;l=d.length-1;for(var e={},m=d[l];m.kf&&0<l;)l--,m=d[l];for(var q=l,k=q,r=0;6>r;r++)for(var u=0;u<m.ea;u++)for(var t=0;t<m.M;t++){var x=t+
u*m.M+r*m.M*m.ea;e[x]=1}for(;l>=g;){var z={},m=d[l],n=null;0<l&&(n=d[l-1]);var C;C=!0;for(var A in e)if(e.hasOwnProperty(A)){var x=Number(A),y=m.V[x],r=Number(Math.floor(x/(m.M*m.ea))),u=Math.floor((x-r*m.M*m.ea)/m.M),t=Math.floor(x-(u*m.M+r*m.M*m.ea)),B;if(6<=r)console.log("Grrr...");else if(B=this.g.jb.cb[r],B.Ca=!1,y||(y=m.V[x]=new p.Kd,b.L("create "+x)),this.Vo(y,m,t,u,Math.max(1,this.Jj>>q-l),r,-(0!=b.jc)?.3:.1),y.visible=0<y.od||m.cache,y.sh=3,y.gg=Date.now(),y.visible&&!y.eb&&(C=!1,this.ah()?
y.h||(y.Rd?y.Rd--:(this.vh(y,m,b.Fe(r,l,t,u)),b.Ca=!0)):this.g.xc++),n&&(y.visible||n.cache)){var y=(t*a.G+1)/m.width,t=Math.min(1,(t+1)*a.G-1/m.width),D=(u*a.G+1)/m.height,u=Math.min(1,(u+1)*a.G-1/m.height),x=a.G/n.width;B=a.G/n.height;var E=D,D=Math.floor(D*n.height/a.G);do{var F=y,H=Math.floor(y*n.width/a.G);do{var I=H+D*n.M+r*n.M*n.ea;H<n.M&&D<n.ea?z[I]=1:b.L("Grrrr");H++;F+=x}while(F<t);D++;E+=B}while(E<u)}}C&&(k=l,20>b.f.c&&l<this.Ve&&(this.Ph=!0));e=z;l--}this.lj();c.uniform1i(c.getUniformLocation(f,
"tileTexture"),0);c.activeTexture(c.TEXTURE0);l=g;for(g=-1;l<=Math.min(k,this.Ve-1);){m=d[l];for(A in m.V)if(m.V.hasOwnProperty(A)){e=Number(A);y=m.V[e];r=Math.floor(e/(m.M*m.ea));u=Math.floor((e-r*m.M*m.ea)/m.M);t=Math.floor(e-(u*m.M+r*m.M*m.ea));g!=r&&(g=r,this.Yh(r,f));if(h>b.ue){b.L("Excided painted tiles");this.Ph=!1;break}y.eb&&(e=r=a.G,t==m.M-1&&(r=m.width-a.G*t),u==m.ea-1&&(e=m.height-a.G*u),r=(r+2*a.Ka)/a.G,e=(e+2*a.Ka)/a.G,c.bindTexture(c.TEXTURE_2D,y.eb),c.uniform2f(c.getUniformLocation(f,
"uCanvasDimensions"),b.m.width,b.m.height),q=c.getUniformLocation(f,"srcScale"),c.uniform2f(q,.5*m.width/a.G/r,.5*m.height/a.G/e),q=c.getUniformLocation(f,"srcOffset"),c.uniform2f(q,(.5*m.width+a.Ka-a.G*t)/a.G/r,-(.5*m.height+a.Ka-a.G*u)/a.G/e+1),q=c.getUniformLocation(f,"zOffset"),c.uniform1f(q,(l+1)/(d.length+5)),r=c.getAttribLocation(f,"aVertexPosition"),c.disableVertexAttribArray(0),c.disableVertexAttribArray(1),c.disableVertexAttribArray(2),c.enableVertexAttribArray(r),c.activeTexture(c.TEXTURE0),
c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.bindBuffer(c.ARRAY_BUFFER,this.Mn),c.vertexAttribPointer(r,2,c.FLOAT,!1,0,0),c.bufferData(c.ARRAY_BUFFER,new Float32Array(y.Zc),c.DYNAMIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.Ln),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(y.ne),c.DYNAMIC_DRAW),
c.drawElements(c.TRIANGLES,y.od,c.UNSIGNED_SHORT,0),h++)}l++}c.disable(c.CULL_FACE);c.cullFace(c.FRONT_AND_BACK);b.Tc=!1}};e.prototype.Yh=function(b,a){var d=this.g.H;p.aa.pe(this.la);this.tf(b,-1);d.uniformMatrix4fv(d.getUniformLocation(a,"matRotate"),!1,this.la)};e.prototype.lo=function(){var b=this.g;if(b.H){var a=b.H,d,c=this.nl;a.useProgram(c);this.Yh(0,c);a.uniform2f(a.getUniformLocation(c,"uCanvasDimensions"),b.m.width,b.m.height);1==b.s.format&&(d=a.getUniformLocation(c,"srcScale"),a.uniform2f(d,
-.5/Math.PI,(b.s.Ii?-1:1)/Math.PI));14==b.s.format&&(d=a.getUniformLocation(c,"srcScale"),a.uniform2f(d,1-2*b.s.Pe/(b.s.width/3),1-2*b.s.Pe/(b.s.height/2)));d=a.getUniformLocation(c,"srcOffset");a.uniform2f(d,.5,.5);this.Aj(c);d=a.getUniformLocation(c,"cubeTexture");a.uniform1i(d,0);d=a.getAttribLocation(c,"aVertexPosition");a.disableVertexAttribArray(0);a.disableVertexAttribArray(1);a.disableVertexAttribArray(2);a.enableVertexAttribArray(d);a.bindBuffer(a.ARRAY_BUFFER,this.Ih);a.vertexAttribPointer(d,
2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,b.s.lc);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Rc);a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)}};e.prototype.Aj=function(b){var a=this.g,d=a.H,c=this.g.m,f=c.width/c.height;switch(a.f.mode){case 1:f=
1;break;case 2:f=c.width/Math.sqrt(c.width*c.width+c.height*c.height);break;case 3:4*c.height/3<c.width&&(f=4/3)}c=d.getUniformLocation(b,"rectDstDistance");this.jj=Math.tan(Math.min(a.f.c,179)/2*Math.PI/180)*f;d.uniform1f(c,this.jj);c=d.getUniformLocation(b,"fisheyeDistance");this.Gi=180/(a.f.c*Math.PI*f);d.uniform1f(c,this.Gi);c=d.getUniformLocation(b,"stereoDistance");this.tj=Math.tan(Math.min(a.f.c,359)/4*Math.PI/180)*f;d.uniform1f(c,this.tj);c=d.getUniformLocation(b,"directionBlend");d.uniform1f(c,
a.mg)};e.prototype.ko=function(){var b=this.g,a=b.H,d=this.ll;a.useProgram(d);a.enable(a.DEPTH_TEST);this.Yh(0,d);a.uniform2f(a.getUniformLocation(d,"uCanvasDimensions"),b.m.width,b.m.height);b=a.getUniformLocation(d,"srcScale");a.uniform2f(b,1,1);b=a.getUniformLocation(d,"srcOffset");a.uniform2f(b,0,0);b=a.getUniformLocation(d,"zOffset");a.uniform1f(b,.9999);this.Aj(d);this.Yh(0,d);b=a.getUniformLocation(d,"cubeTexture");a.uniform1i(b,0);d=a.getAttribLocation(d,"aVertexPosition");a.disableVertexAttribArray(0);
a.disableVertexAttribArray(1);a.disableVertexAttribArray(2);a.enableVertexAttribArray(d);a.bindBuffer(a.ARRAY_BUFFER,this.Ih);a.vertexAttribPointer(d,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_CUBE_MAP,this.uc);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);
a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Rc);a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)};e.prototype.Jm=function(){for(var b=this.g,a=b.H,d=[1,3,5,4,0,2],c=!0,f=!0,g=!1,l=0;6>l;l++)this.Va[l].te.complete?this.Wg[l]||(g=!0):c=!1,this.Va[l].jf.complete||(f=!1);if(f||c)if(!f||c||!this.uc||g){l=Math.round(b.mc/b.vf);f=(b.mc-l)/2;b.L("paint cube single - isMain: "+c+" overlap: "+f);this.Ve=0;this.uc||(this.uc=a.createTexture());b.Yc++;a.bindTexture(a.TEXTURE_CUBE_MAP,this.uc);a.texParameteri(a.TEXTURE_CUBE_MAP,
a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,1);g=document.createElement("canvas");g.width=l;g.height=l;for(var h=g.getContext("2d"),l=0;6>l;l++){var e=d[l];this.Va[e].te.complete?this.Wg[e]||(h.drawImage(this.Va[e].te,-f,-f),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,g),this.Wg[e]=!0):(h.drawImage(this.Va[e].jf,-f,-f,b.mc,b.mc),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+
l,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,g))}this.bg=!c}};e.prototype.Im=function(){var b=this.g,a=this.g.h,d=b.h.I,c=b.H,f,g;f=d.length-1;if(!(0>f)){d[f].kf&&f--;var l=512;b.ag&&(l=256);!b.pf&&2<=b.devicePixelRatio&&(l=512);for((g=c.getParameter(c.MAX_CUBE_MAP_TEXTURE_SIZE))&&g<l&&(l=g);0<f&&d[f-1].width<=l;)f--;var h,l=d[f];if(0!=l.M&&(g=f,h=this.Fm(f),this.bg&&h&&(this.bg=!1),h||(f=d.length-1,l=d[f],h||(l.kf?(h=l.loaded,this.Vi(f-1)&&(--f,h=!0)):h=this.Vi(f)),this.bg=!0),this.Vi(g),h&&this.Ve>f)){l=d[f];
b.L("paint cube level "+f);this.Ve=f;d=b.h.Ka;f=0<d||1<l.M||1<l.ea;var e,m;f&&(m=document.createElement("canvas"),m.width=l.width,m.height=l.height,2048>l.width&&(1500<l.width?(m.width=2048,m.height=2048):700<l.width?(m.width=1024,m.height=1024):(m.width=512,m.height=512)),e=m.getContext("2d"));this.uc=c.createTexture();b.Yc++;c.bindTexture(c.TEXTURE_CUBE_MAP,this.uc);c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);
c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,1);g=[1,3,5,4,0,2];a=a.G;for(h=0;6>h;h++){for(var q=0;q<l.ea;q++)for(var k=0;k<l.M;k++){var p=k+q*l.M+g[h]*l.M*l.ea,u=l.V[p],t=u.h;u.K&&(t=u.K);t?f?(p=m.width/l.width,e.drawImage(t,p*(k*a-d),p*(q*a-d),p*t.width,p*t.height)):c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,t):(b.L("WTF?!"),b.L(p),b.L(u))}f&&c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,m)}}}};e.prototype.Vi=function(b){var a=this.g,d=a.h.I[b];
if(0==d.M)return!1;var c=!0;d.cache=!0;for(var f=0;6>f;f++)for(var g=0;g<d.ea;g++)for(var l=0;l<d.M;l++){var h=l+g*d.M+f*d.M*d.ea,e=d.V[h];e||(e=d.V[h]=new p.Kd);this.ah()?e.h||(e.Rd?e.Rd--:(this.vh(e,d,a.Fe(f,b,l,g)),a.Ca=!0)):this.g.xc++;e.eb||(c=!1,a.Ca=!0)}c&&(d.loaded=!0);return c};e.prototype.Fm=function(b){b=this.g.h.I[b];if(0==b.M)return!1;for(var a=0;6>a;a++)for(var d=0;d<b.ea;d++)for(var c=0;c<b.M;c++){var f=b.V[c+d*b.M+a*b.M*b.ea];if(!f||!f.eb)return!1}return b.loaded=!0};e.prototype.ready=
function(){return null!=this.uc};e.prototype.lj=function(){for(var b=this.g,a=b.h.I,d=b.H,c=Date.now(),f=a.length-1;0<=f;f--){var g=a[f];if(!g.cache)for(var l in g.V)if(g.V.hasOwnProperty(l)){var h=g.V[l];0<h.sh&&h.sh--;h.visible||0<h.sh?(h.visible&&(h.gg=c),h=this.Id.indexOf(h),-1!==h&&this.Id.splice(h,1)):-1===this.Id.indexOf(h)&&(h.level=g,this.Id.push(h))}}if(this.Id.length>1.1*b.Kl)for(this.Id.sort(function(a,c){return c.gg-a.gg});this.Id.length>b.Kl;)h=this.Id.pop(),h.eb&&(d.deleteTexture(h.eb),
b.Yc--,h.eb=0),h.h=null,h.af&&(d.deleteBuffer(h.af),h.af=0),l=h.level.V.indexOf(h),b.L("delete "+l+" "+(c-h.gg)),delete h.level.V[l]};e.prototype.yp=function(){var b=this.g;if(b.H){var a=this.g.H;a.disable(a.DEPTH_TEST);var d;for(d=0;d<b.J.length;d++){var c=b.J[d];if(!c.bd){p.aa.pe(this.la);p.aa.rotate(this.la,-b.N.c*Math.PI/180,[0,0,1]);p.aa.rotate(this.la,-b.i.c*Math.PI/180,[1,0,0]);p.aa.rotate(this.la,(180-b.pan.c)*Math.PI/180,[0,1,0]);p.aa.rotate(this.la,c.pan*Math.PI/180,[0,1,0]);p.aa.rotate(this.la,
-c.i*Math.PI/180,[1,0,0]);p.aa.translate(this.la,[0,0,1]);p.aa.rotate(this.la,c.Bb*Math.PI/180,[0,0,1]);p.aa.rotate(this.la,-c.Ma*Math.PI/180,[0,1,0]);p.aa.rotate(this.la,c.Aa*Math.PI/180,[1,0,0]);var f=Math.tan(c.f/2*Math.PI/180),g=c.Yd;g||(g=16/9);p.aa.scale(this.la,[f,f/g,1]);p.aa.translate(this.la,[0,0,-1]);a.bindBuffer(a.ARRAY_BUFFER,this.ui);a.vertexAttribPointer(this.F.$,3,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.ce);a.vertexAttribPointer(this.F.xa,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);
a.bindTexture(a.TEXTURE_2D,c.lc);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Rc);a.uniform1i(this.F.qf,0);a.uniformMatrix4fv(this.F.lg,!1,this.la);a.uniformMatrix4fv(this.F.Pd,!1,this.nb);a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)}}a.enable(a.DEPTH_TEST)}};
e.prototype.xp=function(){var b=this.g,a;if(b.m.width!=b.D.offsetWidth||b.m.height!=b.D.offsetHeight)b.m.width=b.D.offsetWidth,b.m.height=b.D.offsetHeight;b.he&&(b.Ec(0),b.gd());if(b.H){var d=b.H;d.useProgram(this.F);p.aa.pe(this.nb);p.aa.perspective(b.Pb(),b.mb.width/b.mb.height,.1,100,this.nb);d.uniformMatrix4fv(this.F.Pd,!1,this.nb);this.tf(0);d.uniform1i(this.F.qf,0);d.uniformMatrix4fv(this.F.Pd,!1,this.nb);d.uniformMatrix4fv(this.F.lg,!1,this.la);d.enableVertexAttribArray(this.F.$);d.enableVertexAttribArray(this.F.xa);
d.bindBuffer(d.ARRAY_BUFFER,this.ce);d.vertexAttribPointer(this.F.xa,2,d.FLOAT,!1,0,0);d.activeTexture(d.TEXTURE0);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.Rc);d.uniform1f(this.F.di,1E-4);d.vertexAttribPointer(this.F.$,3,d.FLOAT,!1,0,0);d.bindTexture(d.TEXTURE_2D,b.s.lc);for(a=0;1>a;a++)this.tf(0),d.bindBuffer(d.ARRAY_BUFFER,b.s.Gj),d.vertexAttribPointer(this.F.$,3,d.FLOAT,!1,0,0),d.bindBuffer(d.ARRAY_BUFFER,b.s.Rh),d.vertexAttribPointer(this.F.xa,2,d.FLOAT,!1,0,0),d.activeTexture(d.TEXTURE0),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,
b.s.Ri),d.uniform1i(this.F.qf,0),d.uniformMatrix4fv(this.F.lg,!1,this.la),d.uniformMatrix4fv(this.F.Pd,!1,this.nb),d.drawElements(d.TRIANGLES,36,d.UNSIGNED_SHORT,0)}};e.prototype.wp=function(){var b=this.g,a=b.H,d=b.s;if(0<b.J.length)for(var c=0;c<b.J.length;c++){var f=b.J[c];if(!f.bd&&f.Mk&&f.jh!=f.b.currentTime&&(f.jh=f.b.currentTime,!f.Yd&&0<f.b.videoHeight&&(f.Yd=f.b.videoWidth/f.b.videoHeight),b.Kg))try{f.lc&&(a.bindTexture(a.TEXTURE_2D,f.lc),a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,
f.b),b.update())}catch(l){b.L(l)}}if(d.b&&(c=Number(d.b.currentTime),d.jh!=c)){d.jh=c;try{var g=0<d.b.readyState;b.$f&&d.$c&&(g=g&&0<d.b.currentTime);d.lc&&d.ph&&g&&(d.$c=!0,d.width=d.b.videoWidth,d.height=d.b.videoHeight,a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.s.Ii),a.bindTexture(a.TEXTURE_2D,d.lc),a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,d.b),d.Jl=!0,b.update())}catch(l){b.L(l)}}};e.prototype.dl=function(){var b,a,d=this.g,c=this.g.H;d.ta.style.visibility="hidden";d.w.eg!=d.w.mode&&
(d.w.eg=d.w.mode);if((0<=d.w.mode||0<d.w.hb.length)&&!d.C.Fg){var f=1;0>=d.w.mode&&(f=0);3==d.w.mode&&(f=d.w.oa);for(b=0;b<d.P.length;b++){var g=d.P[b];if("poly"==g.type){var l=g.Qd,h=f;2==d.w.mode&&(h=g.oa);var e=d.w.hb.indexOf(g.id);-1!=e&&(h=d.w.Jb[e]);if(0<l.length){e=[];for(a=0;a<l.length;a++)e.push(l[a].kc),e.push(l[a].Hb),e.push(0);c.useProgram(this.ud);c.enable(c.BLEND);c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.SRC_ALPHA,c.ONE);c.disable(c.DEPTH_TEST);l=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,
l);c.bufferData(c.ARRAY_BUFFER,new Float32Array(e),c.STATIC_DRAW);c.uniform2f(c.getUniformLocation(this.ud,"uCanvasDimensions"),d.m.width,d.m.height);l=c.getUniformLocation(this.ud,"uColor");a=g.cc;c.uniform3f(l,(a>>16&255)/255,(a>>8&255)/255,(a&255)/255);var m=c.getUniformLocation(this.ud,"uAlpha");c.uniform1f(m,g.bc*h);c.vertexAttribPointer(this.ud.$,3,c.FLOAT,!1,0,0);c.drawArrays(c.LINE_LOOP,0,e.length/3);a=g.$b;c.uniform3f(l,(a>>16&255)/255,(a>>8&255)/255,(a&255)/255);c.uniform1f(m,g.Zb*h);c.enable(c.STENCIL_TEST);
c.clearStencil(0);c.clear(c.STENCIL_BUFFER_BIT);c.colorMask(!1,!1,!1,!1);c.stencilFunc(c.ALWAYS,1,1);c.stencilOp(c.INCR,c.INCR,c.INCR);c.drawArrays(c.TRIANGLE_FAN,0,e.length/3);c.colorMask(!0,!0,!0,!0);c.stencilFunc(c.EQUAL,1,1);c.stencilOp(c.ZERO,c.ZERO,c.ZERO);c.drawArrays(c.TRIANGLE_FAN,0,e.length/3);c.disable(c.BLEND);c.enable(c.DEPTH_TEST);c.disable(c.STENCIL_TEST);c.useProgram(this.F)}}}}};e.prototype.zj=function(){var b=this.g,a=b.h;if(b.m.width!=b.D.offsetWidth||b.m.height!=b.D.offsetHeight)b.m.width=
b.D.offsetWidth,b.m.height=b.D.offsetHeight;b.he&&(b.Ec(0),b.gd());if(b.H){var d=b.H;this.Xh();d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT);d.disable(d.DEPTH_TEST);d.disable(d.CULL_FACE);d.useProgram(this.Mf);var c=d.getUniformLocation(this.Mf,"uRect");d.uniform2f(d.getUniformLocation(this.Mf,"uCanvasDimensions"),b.m.width,b.m.height);d.activeTexture(d.TEXTURE0);var f;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.Rc);f=d.getAttribLocation(this.Mf,"aVertexPosition");d.disableVertexAttribArray(0);d.disableVertexAttribArray(1);
d.disableVertexAttribArray(2);d.enableVertexAttribArray(f);d.bindBuffer(d.ARRAY_BUFFER,this.ce);d.vertexAttribPointer(f,2,d.FLOAT,!1,0,0);b.xc=0;var g,l;l=100/b.f.c;g=a.width/a.height;f=b.m.height*l*g;l*=b.m.height;g=(b.pan.c/100/g-.5)*f+b.m.width/2;for(var h=(b.i.c/100-.5)*l+b.m.height/2,e,m,k,w=0;a.I.length>=w+2&&a.I[w+1].width>f;)w++;var r,u;u=[];for(r=a.I.length-1;r>=w;){var t=a.I[r],x;t.cache?(x={Ya:0,ub:0},x.wb=t.M-1,x.xb=t.ea-1):(x={},e=-h/l*(t.height/b.h.G),m=(-g+b.m.width)/f*(t.width/b.h.G),
k=(-h+b.m.height)/l*(t.height/b.h.G),x.Ya=Math.min(Math.max(0,Math.floor(-g/f*(t.width/b.h.G))),t.M-1),x.ub=Math.min(Math.max(0,Math.floor(e)),t.ea-1),x.wb=Math.min(Math.max(0,Math.floor(m)),t.M-1),x.xb=Math.min(Math.max(0,Math.floor(k)),t.ea-1));u[r]=x;var z=!0;for(m=x.ub;m<=x.xb;m++)for(e=x.Ya;e<=x.wb;e++){k=e+m*t.M;var n=t.V[k];n||(n=new p.Kd,t.V[k]=n);this.ah()?n.h||(this.vh(n,t,b.Fe(0,r,e,m)),b.Ca=!0):this.g.xc++;n.h&&n.h.complete||(z=!1);n.visible=!0}x.Ui=z;r--}for(r=a.I.length-1;r>=w;){t=a.I[r];
if(u[r]&&0<=u[r].Ya)for(x=u[r],m=x.ub;m<=x.xb;m++)for(e=x.Ya;e<=x.wb;e++)k=e+m*t.M,(n=t.V[k])&&n.h&&n.h.complete&&(d.uniform4f(c,g+(-a.Ka+a.G*e)*f/t.width,h+(-a.Ka+a.G*m)*l/t.height,n.h.width*f/t.width,n.h.height*l/t.height),n&&n.eb&&(d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.Rc),d.bindTexture(d.TEXTURE_2D,n.eb),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,
d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0)));r--}this.lj()}};e.prototype.Jh=function(){var b=this.g.H;if(b&&this.Va)for(;0<this.Va.length;){var a=this.Va.pop();a.eo=!0;b.deleteTexture(a)}this.uc&&(b.deleteTexture(this.uc),this.uc=null);this.Ve=1E6;this.Wg=[!1,!1,!1,!1,!1,!1]};return e}();p.mm=e})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){return function(){this.ye={je:1,ke:1,re:0,se:0,Wd:0,Ke:0,scale:1};this.gc=!0;this.Re=[]}}(),k=function(){function b(){var a;this.cb=Array(6);for(a=0;6>a;a++)this.cb[a]=new e}b.prototype.Gm=function(a,d,c,b){for(var g=0;6>g;g++){var l;if(l=this.cb[g]){var h;h=[];h.push(new p.sa(-1,-1,-1,0,0));h.push(new p.sa(1,-1,-1,1,0));h.push(new p.sa(1,1,-1,1,1));h.push(new p.sa(-1,1,-1,0,1));for(var e=0;e<h.length;e++)4>g?h[e].Ma(-Math.PI/2*g):h[e].Aa(Math.PI/2*(4===g?-1:1)),b&&(h[e].Bb(b.N*
Math.PI/180),h[e].Aa(-b.pitch*Math.PI/180)),h[e].Ma(-a*Math.PI/180),h[e].Aa(d*Math.PI/180),h[e].Bb(c*Math.PI/180);l.gc=0<h.length}}};return b}();p.im=k})(ggP2VR||(ggP2VR={}));
(function(p){p.hm=function(){return function(){this.I=[];this.lf="0x000000";this.hl=!1;this.Wk=this.Vk=.4;this.G=512;this.Ka=1;this.Ti=0;this.Xk="";this.pl=this.height=this.width=0}}();p.tl=function(){return function(){this.height=this.width=0;this.kf=this.cache=!1;this.ea=this.M=0;this.loaded=!1;this.V=[]}}();p.Kd=function(){return function(){this.loaded=this.visible=!1;this.Rd=this.kj=0;this.Zc=[];this.kh=0;this.ne=[];this.sh=this.gg=this.od=0}}()})(ggP2VR||(ggP2VR={}));
(function(p){p.dm=function(){return function(e,k){this.g=e;this.za=k;var b,a,d=this.__div=document.createElement("div");b=document.createElement("img");b.setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA5xJREFUeNqclmlIVFEUx997TjrplFQW2WKBBSYtRFlpWUILSSsRZRQIBdGHCFqIoKIvQRsUFRJC9LEgaSFbMMpcWi1pLzOLsjItKms0U5t5/c/wH7nc5o2jF374xrv87z33nHOPaRsRtbFgDpgJxoD+wATfwDNQDK6CyrCr5OcbhgiGIRsUAZt4QTWoIFXgp9JfAhY7rgdBl8NeBoLDYBloA+dBOagFTcDHcVEgDgwBGWA+OAcugvXgvb5wKMGJoAAMp9BpUA96EBf/Btsf8BI8AWfAErAcpHHDZeriliY2AVwDg8AucAQ0Ag+I4XhTm2Oxz8PT46KMbTx5EZjuJDgAnAVusJUm9DhYwalFcc59sIXXIaceFkowDySBPTRPL20xm+b7zYXa+N3CPrWJ6GuwGySA40HLBHc/GywFhbS5R1lEBrZy7FQwiSaX9pmnqeAYt+KUcew7BVZw/QKTq0ocpYPVvDOXItZCk2xgDIZqL8BR8Ab0VDbr4yZOgLeIwzQx6WiQxcCt1+6sld66L4yYtFSwF4yg2dU7/cEwGW9YVkAwmycp1dzdpvgm0DcCh4kHmxWzBls0uBX4qqmZJ4KzePm1IeJLgjmlC16aDKZpp5Q168B3o6wsSwTHgU+MIUs74RSj6y1d+212HKimJlUE+tFRfJpYtOKNXWmJTASqWf2Bu/R6+4TKHOrOzG4IhptjWgHbGkZvepQ6SQK7oRuCXzjX1DJavBEX1ygfT8FgBqpfm1zRDcEKbR2bsZlkJCdXieB1ZhZ5YtqVgXIPN+m9kbY6hpdb+d9fPncJRmZmqQheZkemJmgxyxykl3XWJEkcAl7N21s7PDcl5ZJ0PAa3wVwmWtVbZafPwQ7wLozYB7ATPNJO56d/LAikP9u+66KNJS1d4IOZp7wU0hfLukUyzgwm70T2N/DOxIy/eFdqawa5DL2NEGwP5k15Ja4woz9glvcomd9NzyvkFcQo5gomaLfm5c0svnKZ2k7q7+FauvR2MJKZR3+sY5WgtvkdG6JyELGhNHMTXyGfLviRJ5Tcd4Dlhle7086Sgp8CqVxDkn4OqHaqacr5ekjy3Q/W0FRNNGmoMtamdzdxsytZC0lqXKhEgWPVVgImg2NgFT1MHOoOk3yLEtgWN5TEOYvoIFI1rGM19//2wpAD7imF7lfwENwAxaASNCj90pcLLKdC2Iyw1M9gnEplMEp5kOU1f8WwKGJm8oUr9f8JMAAVMDM6HSDa9QAAAABJRU5ErkJggg%3D%3D");
b.setAttribute("style","position: absolute;width: 28px; height: 28px;top: -14px;left: -14px; "+e.Ja+"user-select: none;");b.ondragstart=function(){return!1};d.appendChild(b);b="position:absolute;"+(e.Ja+"user-select: none;");b+=e.Ja+"touch-callout: none;";b+=e.Ja+"tap-highlight-color: rgba(0,0,0,0);";e.Md&&!e.Z&&(b+=e.Ja+"transform: translateZ(9999999px);");d.setAttribute("style",b);d.onclick=function(){e.rf(k);e.cj(k.url,k.target)};var c=e.w.xj;c.enabled&&(a=document.createElement("div"),b="position:absolute;top:\t 20px;",
b=c.ci?b+"white-space: pre-wrap;":b+"white-space: nowrap;",b+=e.Ja+"transform-origin: 50% 50%;",a.setAttribute("style",b+"visibility: hidden;overflow: hidden;padding: 0px 1px 0px 1px;font-size: 13px;"),a.style.color=this.g.fa(c.yj,c.wj),c.background?a.style.backgroundColor=this.g.fa(c.$b,c.Zb):a.style.backgroundColor="transparent",a.style.border="solid "+this.g.fa(c.cc,c.bc)+" "+c.ki+"px",a.style.borderRadius=c.ji+"px",a.style.textAlign="center",0<c.width?(a.style.left=-c.width/2+"px",a.style.width=
c.width+"px"):a.style.width="auto",a.style.height=0<c.height?c.height+"px":"auto",a.style.overflow="hidden",a.innerHTML=k.title,d.onmouseover=function(){0==c.width&&(a.style.left=-a.offsetWidth/2+"px");a.style.visibility="inherit"},d.onmouseout=function(){a.style.visibility="hidden"},d.appendChild(a))}}()})(ggP2VR||(ggP2VR={}));
(function(p){p.Bc=function(){return function(){this.value=this.time=0;this.Fj="";this.be=this.ae=this.Nc=this.$d=this.ob=this.type=this.qb=0;this.Qg=""}}();p.Yk=function(){return function(){this.qp=this.qm=this.length=0}}();p.Nk=function(){return function(){}}()})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(b){this.g=b;this.enabled=!1;this.Ff=1;this.Qe=0;this.type="crossdissolve";this.Yb=this.Pa=this.wc=0;this.Af=5;this.Xd=1;this.Bf=!1;this.Ee=this.De=this.sj=0;this.Cd=70;this.cm=0;this.rb=this.bm=1;this.Pg=this.Og=.5;this.Zd=this.bi=this.xh=this.rh=!1;this.xi=1}e.prototype.Zf=function(){var b=this.g.H,a=b.createShader(b.VERTEX_SHADER);b.shaderSource(a,"attribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nvarying vec2 vTextureCoord;\nuniform bool uZoomIn;\nuniform float uZoomFactor;\nuniform vec2 uZoomCenter;\nvoid main(void) {\n\t gl_Position = vec4(aVertexPosition, 1.0);\n\t if(!uZoomIn) {\n\t \n\t   vTextureCoord = aTextureCoord;\n\t }\n\t else {\n\t   vTextureCoord = (aTextureCoord - vec2(0.5, 0.5)) * (1.0/uZoomFactor) + uZoomCenter;\n\t }\n}\n");
b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(a)),a=null);var d=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uAlpha;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uAlpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.na=b.createProgram();b.attachShader(this.na,a);b.attachShader(this.na,d);b.linkProgram(this.na);b.getProgramParameter(this.na,b.LINK_STATUS)||alert("Could not initialise shaders");this.na.$=b.getAttribLocation(this.na,"aVertexPosition");b.enableVertexAttribArray(this.na.$);this.na.xa=b.getAttribLocation(this.na,"aTextureCoord");b.enableVertexAttribArray(this.na.xa);d=b.createShader(b.FRAGMENT_SHADER);
b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uColorPercent;\nuniform float uAlpha;\nuniform vec3 uDipColor;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x * (1.0 - uColorPercent) + uDipColor.x * uColorPercent, textureColor.y * (1.0 - uColorPercent) + uDipColor.y * uColorPercent, textureColor.z * (1.0 - uColorPercent) + uDipColor.z * uColorPercent, uAlpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Sa=b.createProgram();b.attachShader(this.Sa,a);b.attachShader(this.Sa,d);b.linkProgram(this.Sa);b.getProgramParameter(this.Sa,b.LINK_STATUS)||alert("Could not initialise shaders");this.Sa.$=b.getAttribLocation(this.Sa,"aVertexPosition");b.enableVertexAttribArray(this.Sa.$);this.Sa.xa=b.getAttribLocation(this.Sa,"aTextureCoord");b.enableVertexAttribArray(this.Sa.xa);d=b.createShader(b.FRAGMENT_SHADER);
b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform bool uRound;\nuniform float uRadius;\nuniform vec2 uRectDim;\nuniform vec2 uIrisCenter;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n float alpha = 0.0;\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n if (uRound) {\n\t  vec2 diff = uIrisCenter - gl_FragCoord.xy;\n\t   float distFromCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n\t   if (distFromCenter > uRadius) {\n      alpha = 1.0;\n    } else {\n      alpha = 1.0 - ((uRadius - distFromCenter) / uSoftEdge);\n    };\n }\n else {\n    float alphaFromLeft = 1.0 - ((gl_FragCoord.x -(uIrisCenter.x - uRectDim.x)) / uSoftEdge);\n    float alphaFromRight = 1.0 - (((uIrisCenter.x + uRectDim.x) - gl_FragCoord.x) / uSoftEdge);\n    float alphaFromTop = 1.0 - ((gl_FragCoord.y -(uIrisCenter.y - uRectDim.y)) / uSoftEdge);\n    float alphaFromBottom = 1.0 - (((uIrisCenter.y + uRectDim.y) - gl_FragCoord.y) / uSoftEdge);\n    alpha = max(max(alphaFromLeft, alphaFromRight), max(alphaFromTop, alphaFromBottom));\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Ha=b.createProgram();b.attachShader(this.Ha,a);b.attachShader(this.Ha,d);b.linkProgram(this.Ha);b.getProgramParameter(this.Ha,b.LINK_STATUS)||alert("Could not initialise shaders");this.Ha.$=b.getAttribLocation(this.Ha,"aVertexPosition");b.enableVertexAttribArray(this.Ha.$);this.Ha.xa=b.getAttribLocation(this.Ha,"aTextureCoord");b.enableVertexAttribArray(this.Ha.xa);d=b.createShader(b.FRAGMENT_SHADER);
b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uPercent;\nuniform int uDirection;\nuniform vec2 uCanvasDimensions;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n float alpha = 0.0;\n if (uDirection == 1) {\n\t if (gl_FragCoord.x > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.x) / uSoftEdge);\n  }\n }\n if (uDirection == 2) {\n\t if (gl_FragCoord.x < uCanvasDimensions.x - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.x - (uCanvasDimensions.x - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 3) {\n\t if (gl_FragCoord.y < uCanvasDimensions.y - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.y - (uCanvasDimensions.y - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 4) {\n\t if (gl_FragCoord.y > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.y) / uSoftEdge);\n  }\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Oa=b.createProgram();b.attachShader(this.Oa,a);b.attachShader(this.Oa,d);b.linkProgram(this.Oa);b.getProgramParameter(this.Oa,b.LINK_STATUS)||alert("Could not initialise shaders");this.Oa.$=b.getAttribLocation(this.Oa,"aVertexPosition");b.enableVertexAttribArray(this.Oa.$);this.Oa.xa=b.getAttribLocation(this.Oa,"aTextureCoord");b.enableVertexAttribArray(this.Oa.xa)};e.prototype.Ec=function(){var b=
this.g.H;if(!b)return!1;if(this.Wb=b.createFramebuffer()){b.bindFramebuffer(b.FRAMEBUFFER,this.Wb);this.Wb.width=1024;this.Wb.height=1024;this.Ie=b.createTexture();b.bindTexture(b.TEXTURE_2D,this.Ie);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,this.Wb.width,this.Wb.height,0,b.RGBA,b.UNSIGNED_BYTE,null);var a=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,a);b.renderbufferStorage(b.RENDERBUFFER,
b.DEPTH_COMPONENT16,this.Wb.width,this.Wb.height);b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,this.Ie,0);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,a);b.bindTexture(b.TEXTURE_2D,null);b.bindRenderbuffer(b.RENDERBUFFER,null);b.bindFramebuffer(b.FRAMEBUFFER,null);this.gb=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.gb);b.bufferData(b.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0]),b.STATIC_DRAW);this.gb.Gc=3;this.gb.Od=4;this.mf=
b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.mf);b.bufferData(b.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),b.STATIC_DRAW);return!0}return!1};e.prototype.el=function(b){var a=this.g.H,d=this.g.mb;if(this.Dd){a.useProgram(this.na);a.bindBuffer(a.ARRAY_BUFFER,this.gb);a.vertexAttribPointer(this.na.$,this.gb.Gc,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.mf);a.vertexAttribPointer(this.na.xa,2,a.FLOAT,!1,0,0);a.enableVertexAttribArray(this.na.$);a.enableVertexAttribArray(this.na.xa);a.activeTexture(a.TEXTURE0);
a.bindTexture(a.TEXTURE_2D,this.Ie);var d=1+(this.rb-1)*b,c=a.getUniformLocation(this.na,"uAlpha");a.uniform1f(c,1);c=a.getUniformLocation(this.na,"uZoomIn");a.uniform1i(c,1);var c=a.getUniformLocation(this.na,"uZoomCenter"),f=.5+(this.Og-.5)*Math.sqrt(b),g=.5+(this.Pg-.5)*Math.sqrt(b);0>f-.5/d&&(f=.5/d);0>g-.5/d&&(g=.5/d);1<f+.5/d&&(f=1-.5/d);1<g+.5/d&&(g=1-.5/d);a.uniform2f(c,f,g);f=a.getUniformLocation(this.na,"uZoomFactor");a.uniform1f(f,d);a.uniform1i(a.getUniformLocation(this.na,"uSampler"),
0);a.drawArrays(a.TRIANGLE_STRIP,0,this.gb.Od);a.useProgram(this.g.ma.F)}else{this.g.Ig();a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.SRC_ALPHA,a.ONE);a.enable(a.BLEND);a.disable(a.DEPTH_TEST);f=.5+(this.Og-.5);g=.5+(this.Pg-.5);0>f-.5/this.rb&&(f=.5/this.rb);0>g-.5/this.rb&&(g=.5/this.rb);1<f+.5/this.rb&&(f=1-.5/this.rb);1<g+.5/this.rb&&(g=1-.5/this.rb);if("crossdissolve"==this.type)a.useProgram(this.na),a.bindBuffer(a.ARRAY_BUFFER,this.gb),a.vertexAttribPointer(this.na.$,this.gb.Gc,
a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.mf),a.vertexAttribPointer(this.na.xa,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.Ie),c=a.getUniformLocation(this.na,"uAlpha"),a.uniform1f(c,1-b),c=a.getUniformLocation(this.na,"uZoomIn"),a.uniform1i(c,1==this.Pa||2==this.Pa?1:0),c=a.getUniformLocation(this.na,"uZoomCenter"),a.uniform2f(c,f,g),f=a.getUniformLocation(this.na,"uZoomFactor"),a.uniform1f(f,this.rb),a.uniform1i(a.getUniformLocation(this.na,"uSampler"),0);
else if("diptocolor"==this.type)a.useProgram(this.Sa),a.bindBuffer(a.ARRAY_BUFFER,this.gb),a.vertexAttribPointer(this.Sa.$,this.gb.Gc,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.mf),a.vertexAttribPointer(this.Sa.xa,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.Ie),a.uniform1f(a.getUniformLocation(this.Sa,"uColorPercent"),Math.min(2*b,1)),c=a.getUniformLocation(this.Sa,"uAlpha"),a.uniform1f(c,1-Math.max(2*(b-.5),0)),a.uniform3f(a.getUniformLocation(this.Sa,"uDipColor"),
(this.Qe>>16&255)/255,(this.Qe>>8&255)/255,(this.Qe&255)/255),c=a.getUniformLocation(this.Sa,"uZoomIn"),a.uniform1i(c,1==this.Pa||2==this.Pa?1:0),c=a.getUniformLocation(this.Sa,"uZoomCenter"),a.uniform2f(c,f,g),f=a.getUniformLocation(this.Sa,"uZoomFactor"),a.uniform1f(f,this.rb),a.uniform1i(a.getUniformLocation(this.Sa,"uSampler"),0);else if("irisround"==this.type||"irisroundcenter"==this.type||"irisrectangular"==this.type||"irisrectangularcenter"==this.type){a.useProgram(this.Ha);a.bindBuffer(a.ARRAY_BUFFER,
this.gb);a.vertexAttribPointer(this.Ha.$,this.gb.Gc,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.mf);a.vertexAttribPointer(this.Ha.xa,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,this.Ie);var l;1==this.Pa||2==this.Pa||"irisroundcenter"==this.type||"irisrectangularcenter"==this.type?l=c=.5:(c=this.Og,l=this.Pg);var h=c*d.width,e=l*d.height,h=Math.max(h,d.width-h),e=Math.max(e,d.height-e);"irisround"==this.type||"irisroundcenter"==this.type?a.uniform1f(a.getUniformLocation(this.Ha,
"uRadius"),(Math.sqrt(h*h+e*e)+this.wc)*b):(h>e?(e=d.height/d.width*h+this.wc,h+=this.wc):(h=d.width/d.height*e+this.wc,e+=this.wc),a.uniform2f(a.getUniformLocation(this.Ha,"uRectDim"),h*b,e*b));b=a.getUniformLocation(this.Ha,"uSoftEdge");a.uniform1f(b,this.wc);a.uniform1i(a.getUniformLocation(this.Ha,"uRound"),"irisround"==this.type||"irisroundcenter"==this.type?1:0);a.uniform2f(a.getUniformLocation(this.Ha,"uIrisCenter"),c*d.width,l*d.height);c=a.getUniformLocation(this.Ha,"uZoomIn");a.uniform1i(c,
1==this.Pa||2==this.Pa?1:0);c=a.getUniformLocation(this.Ha,"uZoomCenter");a.uniform2f(c,f,g);f=a.getUniformLocation(this.Ha,"uZoomFactor");a.uniform1f(f,this.rb);a.uniform1i(a.getUniformLocation(this.Ha,"uSampler"),0)}else if("wipeleftright"==this.type||"wiperightleft"==this.type||"wipetopbottom"==this.type||"wipebottomtop"==this.type||"wiperandom"==this.type)a.useProgram(this.Oa),a.bindBuffer(a.ARRAY_BUFFER,this.gb),a.vertexAttribPointer(this.Oa.$,this.gb.Gc,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,
this.mf),a.vertexAttribPointer(this.Oa.xa,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.Ie),a.uniform1f(a.getUniformLocation(this.Oa,"uPercent"),3>this.xi?b*(d.width+this.wc):b*(d.height+this.wc)),b=a.getUniformLocation(this.Oa,"uSoftEdge"),a.uniform1f(b,this.wc),a.uniform1i(a.getUniformLocation(this.Oa,"uDirection"),this.xi),a.uniform2f(a.getUniformLocation(this.Oa,"uCanvasDimensions"),d.width,d.height),c=a.getUniformLocation(this.Oa,"uZoomIn"),a.uniform1i(c,1==this.Pa||
2==this.Pa?1:0),c=a.getUniformLocation(this.Oa,"uZoomCenter"),a.uniform2f(c,f,g),f=a.getUniformLocation(this.Oa,"uZoomFactor"),a.uniform1f(f,this.rb),a.uniform1i(a.getUniformLocation(this.Oa,"uSampler"),0);a.drawArrays(a.TRIANGLE_STRIP,0,this.gb.Od);a.useProgram(this.g.ma.F);a.disable(a.BLEND);a.enable(a.DEPTH_TEST)}};return e}();p.fm=e})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(b){this.Gg=[];this.g=b;this.enabled=!1;this.qb=2;this.Yj=!1}e.prototype.Ci=function(b){if(2==b.mode||3==b.mode||5==b.mode){var a=this.g.Ia.currentTime,d=b.tc.gain.value,c=b.rc.gain.value,f=b.sc.gain.value;b.qc.gain.linearRampToValueAtTime(b.qc.gain.value,a);b.qc.gain.linearRampToValueAtTime(0,a+this.qb);b.tc.gain.linearRampToValueAtTime(d,a);b.tc.gain.linearRampToValueAtTime(0,a+this.qb);b.rc.gain.linearRampToValueAtTime(c,a);b.rc.gain.linearRampToValueAtTime(0,
a+this.qb);b.sc.gain.linearRampToValueAtTime(f,a);b.sc.gain.linearRampToValueAtTime(0,a+this.qb)}else a=this.g.Ia.currentTime,b.Wc.gain.linearRampToValueAtTime(b.Wc.gain.value,a),b.Wc.gain.linearRampToValueAtTime(0,a+this.qb);b.dh=!0;setTimeout(function(){b.xd()},1E3*this.qb+5)};e.prototype.fp=function(){for(var b=0;b<this.g.T.length;b++){var a=this.g.T[b];this.g.Fc(a.id)||4==a.mode||6==a.mode||(a.ja?a.Pc():(a.b.play(),a.b.currentTime=0))}};e.prototype.Qm=function(){for(var b=(this.g.Ia.currentTime-
this.bp)/this.qb,b=Math.min(1,b),a=0;a<this.g.T.length;a++){var d=this.g.T[a];this.g.Fc(d.id)&&1>d.ka&&(d.ka=b)}1==b&&clearInterval(this.ap)};return e}();p.gm=e})(ggP2VR||(ggP2VR={}));
(function(p){var e=function(){function e(b){this.hg=[];this.Qc=null;this.Ub=[];this.Mb=[];this.Vb=[];this.qj=!0;this.g=b;this.Hm()}e.prototype.Zf=function(){var b=this.g.H,a=b.createShader(b.VERTEX_SHADER);b.shaderSource(a,"attribute vec3 aVertexPosition;\nvoid main(void) {\n gl_Position = vec4(aVertexPosition, 1.0);\n}\n");b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(a)),a=null);var d=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCanvasDimensions;\nuniform vec2 uFlareCenterPosition;\nuniform float uBlindingValue;\nuniform float uAspectRatio;\nvoid main(void) {\n float canvasDiag = sqrt( (uCanvasDimensions.x * uCanvasDimensions.x) + (uCanvasDimensions.y * uCanvasDimensions.y) );\n vec2 diff = uFlareCenterPosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromFlarePoint = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = (distFromFlarePoint / canvasDiag) / 10.0;\n gl_FragColor = vec4(1.0, 1.0, 1.0, pow(((1.0 - factor) * 0.8) * uBlindingValue, 2.0));\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.ac=b.createProgram();b.attachShader(this.ac,a);b.attachShader(this.ac,d);b.linkProgram(this.ac);b.getProgramParameter(this.ac,b.LINK_STATUS)||alert("Could not initialise shaders");this.ac.$=b.getAttribLocation(this.ac,"aVertexPosition");b.enableVertexAttribArray(this.ac.$);d=b.createShader(b.VERTEX_SHADER);a=b.createShader(b.VERTEX_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);b.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(a)),d=null);var c=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(c,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCircleTexturePosition;\nuniform vec3 uCircleColor;\nuniform float uCircleRadius;\nuniform float uCircleAlpha;\nuniform float uCircleSoftness;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 diff = uCircleTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromCircleCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float softnessDistance = uCircleRadius * (1.0 - uCircleSoftness);\n if (distFromCircleCenter > uCircleRadius)\n {\n\t  gl_FragColor = vec4(uCircleColor, 0.0);\n }\n else if (distFromCircleCenter <= (softnessDistance))\n {\n\t  float factor = distFromCircleCenter / softnessDistance;\n\t  gl_FragColor = vec4(uCircleColor, pow((1.0 - (0.2 * factor)) * uCircleAlpha, 1.8));\n }\n else\n {\n\t  float factor = (distFromCircleCenter - softnessDistance) / (uCircleRadius - softnessDistance);\n\t  gl_FragColor = vec4(uCircleColor, pow((0.8 - (0.8 * factor)) * uCircleAlpha, 1.8));\n }\n}\n");
b.compileShader(c);b.getShaderParameter(c,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(c)),c=null);this.pa=b.createProgram();b.attachShader(this.pa,d);b.attachShader(this.pa,c);b.linkProgram(this.pa);b.getProgramParameter(this.pa,b.LINK_STATUS)||alert("Could not initialise shaders");this.pa.$=b.getAttribLocation(this.pa,"aVertexPosition");b.enableVertexAttribArray(this.pa.$);d=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uRingTexturePosition;\nuniform float uRingRadius;\nuniform float uRingAlpha;\nuniform float uAspectRatio;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec2 diff = uRingTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromRingCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = distFromRingCenter / uRingRadius;\n if (distFromRingCenter > uRingRadius)\n {\n\t gl_FragColor = vec4(1.0, 1.0, 1.0, 0.0);\n }\n else\n {\n vec4 textureColor = texture2D(uSampler, vec2(factor / uAspectRatio, 0.5));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uRingAlpha);\n }\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.pb=b.createProgram();b.attachShader(this.pb,a);b.attachShader(this.pb,d);b.linkProgram(this.pb);b.getProgramParameter(this.pb,b.LINK_STATUS)||alert("Could not initialise shaders");this.pb.$=b.getAttribLocation(this.pb,"aVertexPosition")};e.prototype.Ec=function(){var b=this.g.H;this.md=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.md);b.bufferData(b.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,
-1,0,1,1,0,-1,1,0]),b.STATIC_DRAW);this.md.Gc=3;this.md.Od=4;this.Ze=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.Ze);for(var a=[0,0,0],d=2*Math.PI/6,c=Math.PI/180*35,f=1,g=c;g<=c+2*Math.PI;g+=d)a.push(Math.sin(g)),a.push(-Math.cos(g)),a.push(0),f++;b.bufferData(b.ARRAY_BUFFER,new Float32Array(a),b.STATIC_DRAW);this.Ze.Gc=3;this.Ze.Od=f;this.ql=b.createTexture();b.bindTexture(b.TEXTURE_2D,this.ql);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,
b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);a=document.createElement("canvas");a.width=100;a.height=1;d=a.getContext("2d");d.width=100;d.height=1;c=d.createLinearGradient(0,0,100,0);c.addColorStop(0,this.g.fa(16777215,0));c.addColorStop(.88,this.g.fa(0,0));c.addColorStop(.9,this.g.fa(16654848,1));c.addColorStop(.92,this.g.fa(16776448,1));c.addColorStop(.94,this.g.fa(4849466,1));c.addColorStop(.96,this.g.fa(131071,
1));c.addColorStop(.98,this.g.fa(8190,1));c.addColorStop(1,this.g.fa(0,0));d.fillStyle=c;d.fillRect(0,0,100,1);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a)};e.prototype.wo=function(){for(;0<this.hg.length;)this.hg.pop()};e.prototype.Hm=function(){var b=[],a=[],d=[],c;c={l:14,alpha:.2,color:11390415,j:.27};b.push(c);c={l:20,alpha:.25,color:11390415,j:.4};b.push(c);c={l:10,alpha:.2,color:12442332,j:.6};b.push(c);c={l:15,alpha:.2,color:11390415,j:.8};b.push(c);c={l:10,alpha:.2,color:12442332,
j:1.5};b.push(c);c={l:15,alpha:.2,color:11390415,j:1.8};b.push(c);c={l:8,alpha:.2,color:12575203,v:.8,j:.7};a.push(c);c={l:7,alpha:.4,color:12575203,v:.5,j:1.6};a.push(c);c={l:5,alpha:.4,color:12575203,v:.6,j:.9};a.push(c);c={l:8,alpha:.3,color:12575203,v:.4,j:1.1};a.push(c);this.Ub.push(b);this.Mb.push(a);this.Vb.push(d);b=[];a=[];d=[];c={l:30,alpha:.3,color:11390415,j:.5};b.push(c);c={l:10,alpha:.3,color:11390415,j:1};b.push(c);c={l:20,alpha:.3,color:11390415,j:1.3};b.push(c);c={l:10,alpha:.3,color:11390415,
j:1.5};b.push(c);c={l:15,alpha:.3,color:11390415,j:1.8};b.push(c);c={l:10,alpha:.3,color:15506856,v:.8,j:.7};a.push(c);c={l:20,alpha:.5,color:15506856,v:.5,j:1.6};a.push(c);c={l:5,alpha:.5,color:15506856,v:.6,j:.9};a.push(c);c={l:60,alpha:.4,color:15506856,v:.2,j:1.1};a.push(c);d.push({l:220,alpha:.035,j:2});this.Ub.push(b);this.Mb.push(a);this.Vb.push(d);b=[];a=[];d=[];c={l:30,alpha:.5,color:15465727,j:.5};b.push(c);c={l:40,alpha:.28,color:15726842,j:.8};b.push(c);c={l:25,alpha:.32,color:15726842,
j:1.1};b.push(c);c={l:15,alpha:.25,color:15726842,j:1.35};b.push(c);c={l:10,alpha:.28,color:15465727,j:1.65};b.push(c);c={l:10,alpha:.45,color:15465727,v:.8,j:.7};a.push(c);c={l:7,alpha:.5,color:15465727,v:.4,j:.9};a.push(c);c={l:40,alpha:.4,color:15465727,v:.3,j:.38};a.push(c);c={l:50,alpha:.4,color:15465727,v:.5,j:1.25};a.push(c);c={l:18,alpha:.2,color:15465727,v:.5,j:1.25};a.push(c);c={l:10,alpha:.34,color:15726842,v:.8,j:1.5};a.push(c);c={l:38,alpha:.37,color:15465727,v:.3,j:-.5};a.push(c);this.Ub.push(b);
this.Mb.push(a);this.Vb.push(d);b=[];a=[];d=[];c={l:16,alpha:.5,color:16363159,j:.1};b.push(c);c={l:26,alpha:.3,color:16091819,j:.32};b.push(c);c={l:29,alpha:.2,color:16091819,j:1.32};b.push(c);c={l:20,alpha:.18,color:16363159,j:1.53};b.push(c);c={l:27,alpha:.13,color:16425092,j:1.6};b.push(c);c={l:20,alpha:.1,color:16091819,j:1.75};b.push(c);c={l:12,alpha:.45,color:16312238,v:.45,j:.2};a.push(c);c={l:8,alpha:.25,color:16434209,v:.7,j:.33};a.push(c);c={l:9,alpha:.25,color:16091819,v:.4,j:.7};a.push(c);
c={l:7,alpha:.2,color:16091819,v:.4,j:.85};a.push(c);c={l:60,alpha:.23,color:16091819,v:.55,j:1.05};a.push(c);c={l:37,alpha:.1,color:16091819,v:.55,j:1.22};a.push(c);c={l:10,alpha:.25,color:16363159,v:.65,j:1.38};a.push(c);c={l:7,alpha:.2,color:16434209,v:.5,j:1.45};a.push(c);c={l:3,alpha:.2,color:16416033,v:.5,j:1.78};a.push(c);c={l:6,alpha:.18,color:16434209,v:.45,j:1.9};a.push(c);c={l:4,alpha:.14,color:16766514,v:.45,j:2.04};a.push(c);c={l:30,alpha:.14,color:16766514,v:.8,j:.04};a.push(c);this.Ub.push(b);
this.Mb.push(a);this.Vb.push(d);b=[];a=[];d=[];c={l:9,alpha:.3,color:14346999,v:.3,j:.3};a.push(c);c={l:5,alpha:.5,color:14148072,v:.8,j:.6};a.push(c);c={l:3,alpha:.37,color:14346999,v:.66,j:.8};a.push(c);c={l:45,alpha:.2,color:14346999,v:.36,j:1.2};a.push(c);c={l:13,alpha:.2,color:14346999,v:.36,j:1.23};a.push(c);c={l:11,alpha:.2,color:14148072,v:.36,j:1.28};a.push(c);c={l:27,alpha:.16,color:14346999,v:.36,j:1.55};a.push(c);c={l:6,alpha:.36,color:14148072,v:.8,j:1.7};a.push(c);this.Ub.push(b);this.Mb.push(a);
this.Vb.push(d);b=[];a=[];d=[];c={l:24,alpha:.2,color:15186464,j:.2};b.push(c);c={l:7,alpha:.26,color:15186464,j:.35};b.push(c);c={l:23,alpha:.18,color:15186464,j:.65};b.push(c);c={l:13,alpha:.2,color:15186464,j:.8};b.push(c);c={l:11,alpha:.15,color:15186464,j:1.4};b.push(c);c={l:15,alpha:.11,color:15451904,j:1.6};b.push(c);c={l:6,alpha:.45,color:15579138,v:.45,j:.22};a.push(c);c={l:3,alpha:.3,color:15451904,v:.25,j:.4};a.push(c);c={l:4,alpha:.2,color:15451904,v:.25,j:.45};a.push(c);c={l:65,alpha:.17,
color:15186464,v:.25,j:.5};a.push(c);c={l:5,alpha:.45,color:15579138,v:.45,j:.88};a.push(c);c={l:140,alpha:.18,color:15579138,v:.32,j:.95};a.push(c);c={l:12,alpha:.22,color:15579138,v:.32,j:1.1};a.push(c);c={l:8,alpha:.32,color:15451904,v:.72,j:1.2};a.push(c);c={l:55,alpha:.2,color:15451904,v:.45,j:1.33};a.push(c);c={l:4,alpha:.3,color:15451904,v:.25,j:1.42};a.push(c);this.Ub.push(b);this.Mb.push(a);this.Vb.push(d);b=[];a=[];d=[];c={l:16,alpha:.4,color:10933495,j:.32};b.push(c);c={l:14,alpha:.3,color:11007484,
j:.36};b.push(c);c={l:10,alpha:.3,color:4037331,j:.58};b.push(c);c={l:14,alpha:.22,color:8835068,j:.68};b.push(c);c={l:10,alpha:.27,color:11007484,j:.82};b.push(c);c={l:11,alpha:.27,color:10867450,j:1};b.push(c);c={l:9,alpha:.2,color:6158332,j:1.05};b.push(c);c={l:10,alpha:.17,color:10867450,j:1.78};b.push(c);c={l:10,alpha:.3,color:4037331,j:-.23};b.push(c);c={l:8,alpha:.45,color:8835068,v:.45,j:.175};a.push(c);c={l:7,alpha:.4,color:12574715,v:.55,j:.46};a.push(c);c={l:3,alpha:.3,color:10867450,v:.35,
j:.5};a.push(c);c={l:60,alpha:.37,color:4031699,v:.75,j:.75};a.push(c);c={l:3,alpha:.25,color:4031699,v:.25,j:.75};a.push(c);c={l:3,alpha:.2,color:6158332,v:.25,j:.9};a.push(c);c={l:7,alpha:.45,color:8835068,v:.45,j:1.3};a.push(c);c={l:32,alpha:.22,color:8835068,v:.75,j:1.62};a.push(c);c={l:9,alpha:.45,color:4031699,v:.65,j:1.6};a.push(c);c={l:8,alpha:.25,color:4031699,v:.65,j:1.83};a.push(c);c={l:7,alpha:.4,color:12574715,v:.55,j:-.18};a.push(c);this.Ub.push(b);this.Mb.push(a);this.Vb.push(d);b=
[];a=[];d=[];c={l:16,alpha:.4,color:16389120,j:.32};b.push(c);c={l:26,alpha:.22,color:16389120,j:.4};b.push(c);c={l:26,alpha:.25,color:16389120,j:.65};b.push(c);c={l:18,alpha:.3,color:16389120,j:1.23};b.push(c);c={l:14,alpha:.26,color:16389120,j:1.33};b.push(c);c={l:17,alpha:.18,color:16389120,j:1.7};b.push(c);c={l:30,alpha:.16,color:16389120,j:2.15};b.push(c);c={l:100,alpha:.25,color:16389120,v:.22,j:1.45};a.push(c);c={l:7,alpha:.5,color:15628151,v:.3,j:1.5};a.push(c);c={l:3,alpha:.5,color:15628151,
v:.3,j:1.52};a.push(c);c={l:4,alpha:.5,color:16389120,v:.3,j:1.745};a.push(c);c={l:9,alpha:.22,color:16389120,v:.3,j:1.8};a.push(c);this.Ub.push(b);this.Mb.push(a);this.Vb.push(d);b=[];a=[];d=[];c={l:16,alpha:.4,color:10933495,j:.32};b.push(c);c={l:14,alpha:.3,color:11007484,j:.36};b.push(c);c={l:10,alpha:.3,color:4037331,j:.58};b.push(c);c={l:14,alpha:.22,color:8835068,j:.68};b.push(c);c={l:10,alpha:.27,color:11007484,j:.82};b.push(c);c={l:11,alpha:.27,color:10867450,j:1};b.push(c);c={l:9,alpha:.2,
color:6158332,j:1.05};b.push(c);c={l:10,alpha:.17,color:10867450,j:1.78};b.push(c);c={l:10,alpha:.3,color:4037331,j:-.23};b.push(c);c={l:8,alpha:.45,color:8835068,v:.45,j:.175};a.push(c);c={l:7,alpha:.4,color:12574715,v:.55,j:.46};a.push(c);c={l:3,alpha:.3,color:10867450,v:.35,j:.5};a.push(c);c={l:60,alpha:.37,color:4031699,v:.75,j:.75};a.push(c);c={l:3,alpha:.25,color:4031699,v:.25,j:.75};a.push(c);c={l:3,alpha:.2,color:6158332,v:.25,j:.9};a.push(c);c={l:7,alpha:.45,color:8835068,v:.45,j:1.3};a.push(c);
c={l:32,alpha:.22,color:8835068,v:.75,j:1.62};a.push(c);c={l:9,alpha:.45,color:4031699,v:.65,j:1.6};a.push(c);c={l:8,alpha:.25,color:4031699,v:.65,j:1.83};a.push(c);c={l:7,alpha:.4,color:12574715,v:.55,j:-.18};a.push(c);this.Ub.push(b);this.Mb.push(a);this.Vb.push(d);b=[];a=[];d=[];c={l:16,alpha:.4,color:16389120,j:.32};b.push(c);c={l:26,alpha:.22,color:16389120,j:.4};b.push(c);c={l:26,alpha:.25,color:16389120,j:.65};b.push(c);c={l:18,alpha:.3,color:16389120,j:1.23};b.push(c);c={l:14,alpha:.26,color:16389120,
j:1.33};b.push(c);c={l:17,alpha:.18,color:16389120,j:1.7};b.push(c);c={l:30,alpha:.16,color:16389120,j:2.15};b.push(c);c={l:100,alpha:.25,color:16389120,v:.22,j:1.45};a.push(c);c={l:7,alpha:.5,color:15628151,v:.3,j:1.5};a.push(c);c={l:3,alpha:.5,color:15628151,v:.3,j:1.52};a.push(c);c={l:4,alpha:.5,color:16389120,v:.3,j:1.745};a.push(c);c={l:9,alpha:.22,color:16389120,v:.3,j:1.8};a.push(c);this.Ub.push(b);this.Mb.push(a);this.Vb.push(d);b=[];a=[];d=[];c={l:24,alpha:.2,color:15186464,j:.2};b.push(c);
c={l:7,alpha:.26,color:15186464,j:.35};b.push(c);c={l:23,alpha:.18,color:15186464,j:.65};b.push(c);c={l:13,alpha:.2,color:15186464,j:.8};b.push(c);c={l:11,alpha:.15,color:15186464,j:1.4};b.push(c);c={l:15,alpha:.11,color:15451904,j:1.6};b.push(c);c={l:6,alpha:.45,color:15579138,v:.45,j:.22};a.push(c);c={l:3,alpha:.3,color:15451904,v:.25,j:.4};a.push(c);c={l:4,alpha:.2,color:15451904,v:.25,j:.45};a.push(c);c={l:65,alpha:.17,color:15186464,v:.25,j:.5};a.push(c);c={l:5,alpha:.45,color:15579138,v:.45,
j:.88};a.push(c);c={l:140,alpha:.18,color:15579138,v:.32,j:.95};a.push(c);c={l:12,alpha:.22,color:15579138,v:.32,j:1.1};a.push(c);c={l:8,alpha:.32,color:15451904,v:.72,j:1.2};a.push(c);c={l:55,alpha:.2,color:15451904,v:.45,j:1.33};a.push(c);c={l:4,alpha:.3,color:15451904,v:.25,j:1.42};a.push(c);this.Ub.push(b);this.Mb.push(a);this.Vb.push(d)};e.prototype.io=function(){if(this.qj){var b=this.g.H,a,d,c,f=new p.sa(0,0,-100),g=this.g.kd(),e,h,v=0,m=0,k=!1;if(this.g.Z)e=this.g.mb.width,h=this.g.mb.height,
this.g.C.Fg&&(e=this.g.C.Wb.width,h=this.g.C.Wb.height);else{this.S||(this.S=this.Qc.getContext("2d"));if(this.S.width!==this.g.m.width||this.S.height!==this.g.m.height)this.S.width=this.g.m.width,this.S.height=this.g.m.height;this.S.clear?this.S.clear():this.S.clearRect(0,0,this.Qc.width,this.Qc.height);e=this.S.width;h=this.S.height}var w=Math.sqrt(e*e+h*h),r=w/800;for(d=0;d<this.hg.length;d++){var u=this.hg[d];f.$a(0,0,-100);f.Aa(-u.i*Math.PI/180);f.Ma(u.pan*Math.PI/180);f.Ma(-this.g.pan.c*Math.PI/
180);f.Aa(this.g.i.c*Math.PI/180);f.Bb(this.g.N.c*Math.PI/180);-.01>f.z&&(m=-g/f.z,v=f.x*m,m*=f.y,Math.abs(v)<e/2+100&&Math.abs(m)<h/2+100&&(k=!0,v+=e/2,m+=h/2));if(k){this.g.Z&&(b.blendFunc(b.SRC_ALPHA,b.DST_ALPHA),b.enable(b.BLEND),b.disable(b.DEPTH_TEST));var t=e/2,x=h/2;c=Math.sqrt((t-v)*(t-v)+(x-m)*(x-m));var z=w/2,x=e>h?e:h,t=u.Qj/100*((z-c)/z);0>t&&(t=0);if(this.g.Z){b.useProgram(this.ac);b.bindBuffer(b.ARRAY_BUFFER,this.g.C.gb);b.vertexAttribPointer(this.ac.$,this.g.C.gb.Gc,b.FLOAT,!1,0,0);
var n=b.getUniformLocation(this.ac,"uCanvasDimensions");b.uniform2f(n,b.drawingBufferWidth,b.drawingBufferHeight);b.uniform2f(b.getUniformLocation(this.ac,"uFlareCenterPosition"),b.drawingBufferWidth/e*v,h-b.drawingBufferHeight/h*m);b.uniform1f(b.getUniformLocation(this.ac,"uBlindingValue"),t);n=b.getUniformLocation(this.ac,"uAspectRatio");b.uniform1f(n,this.g.C.Fg?b.drawingBufferWidth/b.drawingBufferHeight:b.drawingBufferWidth/b.drawingBufferHeight/(e/h));b.drawArrays(b.TRIANGLE_STRIP,0,this.g.C.gb.Od)}else n=
this.S.createRadialGradient(v,m,1,v,m,x),n.addColorStop(0,"rgba(255, 255, 255, "+t+")"),n.addColorStop(.5,"rgba(255, 255, 255, "+.8*t+")"),n.addColorStop(1,"rgba(255, 255, 255, "+.6*t+")"),this.S.fillStyle=n,this.S.fillRect(0,0,this.S.width,this.S.height);if(0!=Number(u.type)&&!this.g.C.Fg){var t=e/2-v,x=h/2-m,C=1,A=Number(u.type)-1;c<.35*z&&(C=c/(.35*z),C*=C);c>.7*z&&(C=(z-c)/(.3*z));C*=u.alpha/100;if(0<this.Ub[A].length)for(c=0;c<this.Ub[A].length;c++){var y=this.Ub[A][c],z=y.l*r;a=y.alpha*C;0>
a&&(a=0);var B=y.color;if(8==A||9==A||10==A)B=u.color;if(this.g.Z)b.useProgram(this.pa),b.bindBuffer(b.ARRAY_BUFFER,this.Ze),b.vertexAttribPointer(this.pa.$,this.Ze.Gc,b.FLOAT,!1,0,0),n=b.getUniformLocation(this.pa,"uCanvasDimensions2"),b.uniform2f(n,b.drawingBufferWidth,b.drawingBufferHeight),b.uniform2f(b.getUniformLocation(this.pa,"uCirclePosition"),b.drawingBufferWidth/e*(v+t*y.j),b.drawingBufferWidth/e*(h-(m+x*y.j))),b.uniform2f(b.getUniformLocation(this.pa,"uCircleTexturePosition"),b.drawingBufferWidth/
e*(v+t*y.j),h-(m+x*y.j)),b.uniform1f(b.getUniformLocation(this.pa,"uCircleRadius"),z),b.uniform3f(b.getUniformLocation(this.pa,"uCircleColor"),(B>>16&255)/255,(B>>8&255)/255,(B&255)/255),b.uniform1f(b.getUniformLocation(this.pa,"uCircleAlpha"),a),b.uniform1f(b.getUniformLocation(this.pa,"uCircleSoftness"),.1),n=b.getUniformLocation(this.pa,"uAspectRatio"),b.uniform1f(n,b.drawingBufferWidth/b.drawingBufferHeight/(e/h)),b.drawArrays(b.TRIANGLE_FAN,0,this.Ze.Od);else{this.S.save();this.S.translate(v+
t*y.j,m+x*y.j);n=this.S.createRadialGradient(0,0,1,0,0,1.1*z);n.addColorStop(0,this.g.fa(B,a));n.addColorStop(.65,this.g.fa(B,.9*a));n.addColorStop(.8,this.g.fa(B,.7*a));n.addColorStop(1,this.g.fa(B,.2*a));this.S.beginPath();var B=2*Math.PI/6,y=Math.PI/180*35,D=!0;for(a=y;a<=y+2*Math.PI;a+=B)D?(this.S.moveTo(z*Math.sin(a),z*Math.cos(a)),D=!1):this.S.lineTo(z*Math.sin(a),z*Math.cos(a));this.S.closePath();this.S.fillStyle=n;this.S.fill();this.S.restore()}}if(0<this.Mb[A].length)for(c=0;c<this.Mb[A].length;c++){y=
this.Mb[A][c];z=y.l*r;a=y.alpha*C;0>a&&(a=0);B=y.color;if(8==A||9==A||10==A)B=u.color;this.g.Z?(b.useProgram(this.pa),b.bindBuffer(b.ARRAY_BUFFER,this.md),b.vertexAttribPointer(this.pa.$,this.md.Gc,b.FLOAT,!1,0,0),n=b.getUniformLocation(this.pa,"uCanvasDimensions2"),b.uniform2f(n,b.drawingBufferWidth,b.drawingBufferHeight),n=b.getUniformLocation(this.pa,"uCirclePosition"),b.uniform2f(n,b.drawingBufferWidth/e*(v+t*y.j),b.drawingBufferWidth/e*(h-(m+x*y.j))),n=b.getUniformLocation(this.pa,"uCircleTexturePosition"),
b.uniform2f(n,b.drawingBufferWidth/e*(v+t*y.j),h-(m+x*y.j)),n=b.getUniformLocation(this.pa,"uCircleRadius"),b.uniform1f(n,z),b.uniform3f(b.getUniformLocation(this.pa,"uCircleColor"),(B>>16&255)/255,(B>>8&255)/255,(B&255)/255),b.uniform1f(b.getUniformLocation(this.pa,"uCircleAlpha"),a),b.uniform1f(b.getUniformLocation(this.pa,"uCircleSoftness"),y.v),n=b.getUniformLocation(this.pa,"uAspectRatio"),b.uniform1f(n,b.drawingBufferWidth/b.drawingBufferHeight/(e/h)),b.drawArrays(b.TRIANGLE_FAN,0,this.md.Od)):
(this.S.save(),this.S.translate(v+t*y.j,m+x*y.j),n=this.S.createRadialGradient(0,0,1,0,0,z),n.addColorStop(0,this.g.fa(B,a)),n.addColorStop(1-y.v,this.g.fa(B,.8*a)),n.addColorStop(1,this.g.fa(B,0)),this.S.beginPath(),this.S.arc(0,0,z,0,2*Math.PI,!1),this.S.closePath(),this.S.fillStyle=n,this.S.fill(),this.S.restore())}if(0<this.Vb[A].length)for(c=0;c<this.Vb[A].length;c++)u=this.Vb[A][c],z=u.l*r,a=u.alpha*C,0>a&&(a=0),this.g.Z?(b.useProgram(this.pb),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,
this.ql),b.bindBuffer(b.ARRAY_BUFFER,this.md),b.vertexAttribPointer(this.pb.$,this.md.Gc,b.FLOAT,!1,0,0),n=b.getUniformLocation(this.pb,"uCanvasDimensions2"),b.uniform2f(n,e,h),n=b.getUniformLocation(this.pb,"uCirclePosition"),b.uniform2f(n,v+t*u.j,h-(m+x*u.j)),n=b.getUniformLocation(this.pb,"uRingTexturePosition"),b.uniform2f(n,b.drawingBufferWidth/e*(v+t*u.j),h-(m+x*u.j)),n=b.getUniformLocation(this.pb,"uCircleRadius"),b.uniform1f(n,z),b.uniform2f(b.getUniformLocation(this.pb,"uRingPosition"),v+
t*u.j,h-(m+x*u.j)),b.uniform1f(b.getUniformLocation(this.pb,"uRingRadius"),z),b.uniform1f(b.getUniformLocation(this.pb,"uRingAlpha"),a),n=b.getUniformLocation(this.pb,"uAspectRatio"),b.uniform1f(n,b.drawingBufferWidth/b.drawingBufferHeight/(e/h)),b.uniform1i(b.getUniformLocation(this.pb,"uSampler"),0),b.drawArrays(b.TRIANGLE_FAN,0,this.md.Od)):(this.S.save(),this.S.translate(v+t*u.j,m+x*u.j),n=this.S.createRadialGradient(0,0,0,0,0,z),n.addColorStop(0,this.g.fa(16777215,0)),n.addColorStop(.88,this.g.fa(0,
0)),n.addColorStop(.9,this.g.fa(16654848,a)),n.addColorStop(.92,this.g.fa(16776448,a)),n.addColorStop(.94,this.g.fa(4849466,a)),n.addColorStop(.96,this.g.fa(131071,a)),n.addColorStop(.98,this.g.fa(8190,a)),n.addColorStop(1,this.g.fa(0,0)),this.S.beginPath(),this.S.arc(0,0,z,0,2*Math.PI,!1),this.S.closePath(),this.S.fillStyle=n,this.S.fill(),this.S.restore())}this.g.Z&&(b.useProgram(this.g.ma.F),b.disable(b.BLEND),b.enable(b.DEPTH_TEST))}}}};return e}();p.em=e})(ggP2VR||(ggP2VR={}));var O=!1;
(function(p){var e=function(){return function(){this.f=this.i=this.pan=0}}(),k=function(){function b(a,d){this.pan={c:0,Ra:0,min:0,max:360,d:0,aj:0,jd:0};this.i={c:0,Ra:0,min:-90,max:90,d:0,jd:0};this.N={c:0,Ra:0,min:-180,max:180,d:0};this.pc={pan:0,i:-90,N:0,f:170,Ab:9};this.f={c:70,Ra:70,min:1,jg:0,max:170,Yi:360,Zi:270,hf:0,d:0,mode:0,Gl:0,$j:0};this.ab={N:0,pitch:0};this.m={width:10,height:10};this.fb=0;this.vi=new p.sa;this.crossOrigin="anonymous";this.La=this.Eh=4;this.Yc=this.Ng=this.mg=this.jc=
0;this.Y={start:{x:0,y:0},da:{x:0,y:0},td:{x:0,y:0},c:{x:0,y:0},ca:{x:0,y:0}};this.R={Xa:!1,ek:0,startTime:0,start:{x:0,y:0},da:{x:0,y:0},td:{x:0,y:0},c:{x:0,y:0},ca:{x:0,y:0}};this.Fi=!0;this.wa={enabled:!0,da:{x:0,y:0},ca:{x:0,y:0},mj:0,f:{active:!1,ec:0}};this.oe={alpha:0,beta:0,gamma:0,orientation:0};this.Uf={alpha:0,beta:0,gamma:0,orientation:0};this.s={src:[],Pe:4,width:640,height:480,$c:!1,ph:!1,Hl:!1,fe:"loop",b:HTMLVideoElement=null,Jl:!1,lc:WebGLTexture=null,Gj:WebGLBuffer=null,Rh:WebGLBuffer=
null,Ri:WebGLBuffer=null,format:1,jh:0,Ii:1};this.cg=0;this.ia=this.ta=this.Da=this.U=this.dc=this.bb=this.D=null;this.ie="pano";this.Hi="flashcontainer";this.wi="";this.control=null;this.Lb=[];this.Ca=!1;this.Kf=1;this.O=null;this.Ed=this.Ne=this.Xf=!1;this.Cf=0;this.hd=.02;this.gi=0;this.hi=!1;this.fi=this.Rg=this.Df=this.Me=this.Oj=0;this.Nj=-1;this.zb="";this.nf=this.vc=!1;this.Fh=0;this.Xg=[];this.We=[];this.vf=this.mc=1;this.Gf=1024;this.pf=!1;this.ue=200;this.Ga=0;this.Eg=5;this.xc=0;this.Kl=
50;this.Qi=this.Ll=0;this.o={enabled:!1,timeout:5,active:!1,Dg:!1,speed:.4,Th:0,Ch:0,$i:!0,Dj:!1,Xb:!1,Sg:"",Pj:!1,yh:!1,vj:!1,startTime:0,sd:0,eh:!1,Yg:!1,uh:0};this.u={active:!1,Le:!1,speed:.1,pan:0,i:0,N:0,f:70,Cd:70,Sk:0,Uk:0,Tk:0,Rk:0,Ab:0,pg:0,Si:0,Cj:!1,kg:!1,Mj:0,Lj:0};this.Hd="Animation01";this.ff={pan:-1,i:-1,f:-1};this.Pk=0;this.Ba=null;this.zf={};this.Ej={};this.Zg=[];this.Wi={};this.wh={};this.w={mode:1,eg:-1,oa:0,ib:0,Oc:.05,cc:255,bc:1,$b:255,Zb:.3,bf:!0,xj:{enabled:!0,width:180,height:20,
yj:0,wj:1,background:!0,$b:16777215,Zb:1,cc:0,bc:1,ji:3,ki:1,ci:!0},hb:[],Jb:[],Jc:[],Nh:[]};this.va=null;this.P=[];this.T=[];this.J=[];this.Za=[];this.Ge=[];this.Na=[];this.ua=[];this.W=1;this.ma=this.vd=this.Nb=this.Gd=null;this.Lf={};this.dd={};this.Oh={};this.h=new p.hm;this.ho={target:0,current:0,Oc:.01,Mm:2,Ai:0,$g:!1,um:!1};this.margin={left:0,top:0,right:0,bottom:0};this.B={qe:!1,Tn:!1,vb:!1,ad:!1,qd:!0,Hk:!1,El:1,sl:!1,yi:!0,Jf:!0,Vg:!1,Yf:!1,ul:!0,sensitivity:8};this.ig=[];this.Tc=!0;this.ra=
{x:0,y:0};this.Kg=this.Cb=this.Jg=this.Kc=this.Z=!1;this.$h=this.Wl=!0;this.Pi=!1;this.he=!0;this.yf=this.Oi=!1;this.Ja=this.Fd="";this.Vc="transition";this.Wa="transform";this.ld="perspective";this.ck="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYBgeACDAAADIAAE3iTbkAAAAAElFTkSuQmCC";this.mb={width:0,height:0};this.ik=new p.sa;this.hk=new p.sa;this.jk=new p.sa;this.kk=new p.sa;this.gk=new p.sa;this.df=!1;this.Qk=
this.kb="";this.Hj=[];this.Wh=[];this.ag=this.Kk=this.mh=this.Lk=this.Ld=this.Ik=this.nj=this.Md=this.$f=this.Jk=!1;this.ai=!0;this.Kh=this.nh=!1;this.Dk=[];this.devicePixelRatio=1;this.ga=this.C=null;this.Tg=!1;this.Fa=null;this.tb={enabled:!1,speed:1,zd:!1,Ei:!0};this.bl=!1;this.jb=new p.im;this.Bj=!1;this.If=function(a,d){if(0==a.length)return a;var b,e,h,v,m,k,w,r;r=[];b=d.Gh(a[0])-0;for(v=0;v<a.length;v++){k=v;w=v+1;w==a.length&&(w=0);e=d.Gh(a[w])-0;if(0<=b&&0<=e)r.push(a[k]);else if(0<=b||0<=
e)h=e/(e-b),0>h&&(h=0),1<h&&(h=1),m=new p.sa,m.pd(a[k],a[w],h),0>b||r.push(a[k]),r.push(m);b=e}return r};this.rj=0;this.th=-1;this.Qf=function(a){return a?a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:a.clientX||a.clientY?{x:a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:a.clientY+document.body.scrollTop+document.documentElement.scrollTop}:a.touches&&a.touches[0]?{x:a.touches[0].pageX,y:a.touches[0].pageY}:{x:0,y:0}:{x:0,y:0}};this.Ah=1;this.Rm=this.gh=this.Ok=this.Bi=this.ij=this.Hh=
0;this.ge=!0;this.sb=new p.qh(this);this.sb.bf=!1;this.bk();this.rf(this.sb);this.checkLoaded=this.Lb;this.isLoaded=!1;d&&d.hasOwnProperty("useFlash")&&d.useFlash&&(this.Cb=!0,this.Z=this.Kc=!1,d.hasOwnProperty("flashPlayerId")?this.ie=d.flashPlayerId:this.ie="pano",d.hasOwnProperty("flashContainerId")?this.Hi=d.flashContainerId:this.Hi=a+"flash");this.qa();this.Cb||(this.Ea=new p.em(this));this.Xj(a);this.tm();this.userdata=this.zf=this.bh();this.emptyHotspot=this.sb;this.mouse=this.ra;this.C=new p.fm(this);
this.Fa=new p.gm(this);this.ma=new p.mm(this)}b.prototype.xk=function(){return"6.0 alpha/16570"};b.prototype.ti=function(){this.C.enabled=this.ga.enabled;this.C.type=this.ga.type;this.C.Pa=this.ga.zoomin;this.C.Yb=this.ga.zoomout;this.C.Ff=this.ga.blendtime;this.C.Bf=this.ga.zoomoutpause;this.C.Af=this.ga.zoomfov;this.C.Xd=this.ga.zoomspeed;this.C.Qe=this.ga.blendcolor;this.C.wc=this.ga.softedge;this.ga=null};b.prototype.Qo=function(a){this.ga={};this.ga.enabled=!0;this.ga.type=this.C.type;this.ga.zoomin=
this.C.Pa;this.ga.zoomout=this.C.Yb;this.ga.blendtime=this.C.Ff;this.ga.zoomoutpause=this.C.Bf;this.ga.zoomfov=this.C.Af;this.ga.zoomspeed=this.C.Xd;this.ga.blendcolor=this.C.Qe;this.ga.softedge=this.C.wc;if(a.hasOwnProperty("type")){var d=a.type;if("cut"==d||"crossdissolve"==d||"diptocolor"==d||"irisround"==d||"irisrectangular"==d||"wipeleftright"==d||"wiperightleft"==d||"wipetopbottom"==d||"wipebottomtop"==d||"wiperandom"==d)this.ga.type=d}a.hasOwnProperty("before")&&(d=Number(a.before),0==d||2==
d)&&(this.ga.zoomin=d);a.hasOwnProperty("after")&&(d=Number(a.after),0==d||2==d||3==d||4==d)&&(this.ga.zoomout=d);a.hasOwnProperty("transitiontime")&&(d=Number(a.transitiontime),0<=d&&50>=d&&(this.ga.blendtime=d));a.hasOwnProperty("waitfortransition")&&(this.ga.zoomoutpause=1==a.waitfortransition);a.hasOwnProperty("zoomedfov")&&(d=Number(a.zoomedfov),.01<=d&&50>=d&&(this.ga.zoomfov=d));a.hasOwnProperty("zoomspeed")&&(d=Number(a.zoomspeed),.01<=d&&99>=d&&(this.ga.zoomspeed=d));a.hasOwnProperty("dipcolor")&&
(this.ga.blendcolor=a.dipcolor);a.hasOwnProperty("softedge")&&(a=Number(a.softedge),0<=a&&1E3>=a&&(this.ga.softedge=a));this.Tg||this.ti()};b.prototype.cd=function(a,d,c){var b=d?Number(d):0;if(0!=a&&4!=a&&12!=a&&9!=a)this.Hc("Unsupported projection type: "+a);else if(d&&0!==b&&4!==b&&12!==b&&9!==b)this.Hc("Unsupported projection2 type: "+b);else if(a==b&&(b=0),this.mg=c?Number(c):1,this.La!=a||this.jc!=b)this.La=a,this.jc=b,this.ma.lh()};b.prototype.ya=function(){return 0==this.La?4:this.La};b.prototype.oi=
function(a,d){if(0!=a&&4!=a&&12!=a&&9!=a)this.Hc("Unsupported projection type: "+a);else if(this.Z||0==a||4==a||this.Hc("Projection changes require WebGL!"),this.ya()!=a){var c={};c.pan=this.pan.c;c.tilt=this.i.c;c.fov=this.f.c;c.projection=a;c.timingFunction=3;c.speed=d;var b=this.Pf(a);c.fov=Math.min(b,c.fov);this.zh(c)}};b.prototype.addListener=function(a,d){(this.Lf[a]=this.Lf[a]||[]).push(d)};b.prototype.ha=function(a,d){var c=this.Lf[a];if(c)for(var b=c.length,g=0;g<b;g++)try{c[g].apply(null,
[d])}catch(e){this.Hc(e)}};b.prototype.removeEventListener=function(a,d){var c=this.Lf[a];if(c){var b,g;g=0;for(b=c.length;g<b;g++)if(c[g]===d){1===b?delete this.Lf[a]:c.splice(g,1);break}}};b.prototype.pm=function(a,d){return this.dd.hasOwnProperty(a)?!1:(this.dd[a]=d,!0)};b.prototype.Mh=function(a,d){return this.dd.hasOwnProperty(a)&&(0==this.dd[a]&&"string"===typeof d||1==this.dd[a]&&"number"===typeof d||2==this.dd[a]&&"boolean"===typeof d)?(this.Oh[a]!=d&&(this.Oh[a]=d,this.ha("varchanged_"+a,
{value:d})),!0):!1};b.prototype.En=function(a){if(this.Oh.hasOwnProperty(a))return this.Oh[a]};b.prototype.bk=function(){var a;this.devicePixelRatio=window.devicePixelRatio||1;this.Jk=!!navigator.userAgent.match(/(MSIE)/g);this.$f=!!navigator.userAgent.match(/(Firefox)/g);if(this.Md=!!navigator.userAgent.match(/(Safari)/g))a=navigator.userAgent.indexOf("Safari"),this.Ad=navigator.userAgent.substring(a+7),a=navigator.userAgent.indexOf("Version"),-1!=a&&(this.Ad=navigator.userAgent.substring(a+8)),
this.Ad=this.Ad.substring(0,this.Ad.indexOf(" ")),this.Ad=this.Ad.substring(0,this.Ad.indexOf(".")),this.nj=!0;if(this.Ik=!!navigator.userAgent.match(/(Chrome)/g))this.Md=!1;this.Ld=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g);this.Lk=!!navigator.userAgent.match(/(iPhone|iPod)/g);this.mh=!!navigator.userAgent.match(/(android)/i);this.Kk=!!navigator.userAgent.match(/(IEMobile)/i);this.ag=this.Ld||this.mh||this.Kk;/iP(hone|od|ad)/.test(navigator.platform)&&(a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),
this.Dk=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||"0",10)]);this.nh=!window.requestAnimationFrame;a=["Webkit","Moz","O","ms","Ms"];this.Ja="";this.Vc="transition";this.Wa="transform";this.ld="perspective";for(var d=0;d<a.length;d++)"undefined"!==typeof document.documentElement.style[a[d]+"Transform"]&&(this.Ja="-"+a[d].toLowerCase()+"-",this.Vc=a[d]+"Transition",this.Wa=a[d]+"Transform",this.ld=a[d]+"Perspective");this.Pi=G();this.Z=N();this.Kc=this.Pi;this.Z&&(this.Kc=!1);this.vc=!0;this.nf=
!1;if(this.Ld||this.mh)this.wl(80),this.Eg=2;this.Hc("Pano2VR player "+this.xk()+" - Prefix:"+this.Ja+", "+(this.Pi?"CSS 3D available":"CSS 3D not available")+", "+(this.Z?"WebGL available":"WebGL not available"));O&&this.L("Pano2VR Debug version!");try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.Ia=new AudioContext}catch(c){this.Ia=null}this.Md&&(!this.nj||9>Number(this.Ad))&&(this.Ia=null);this.ai=this.Lk?this.Md&&this.nj&&10<=Number(this.Ad)?!0:!1:!0};b.prototype.L=
function(a){if(O){var d=document.getElementById("gg_debug");d&&(d.innerHTML=a.toString()+"<br />");window.console&&window.console.log(a)}};b.prototype.Hc=function(a){var d=document.getElementById("gg_debug");d&&(d.innerHTML=a+"<br />");window.console&&window.console.log(a)};b.prototype.wl=function(a){this.ue=a};b.prototype.Bo=function(a){this.crossOrigin=a};b.prototype.Do=function(a){this.cf=a};b.prototype.vn=function(){return this.Fh};b.prototype.Ao=function(a){this.Fd=a};b.prototype.Wm=function(){return this.Fd};
b.prototype.dn=function(){return this.ag};b.prototype.fn=function(){return this.df};b.prototype.an=function(){return this.o.active};b.prototype.Eo=function(a){this.ag=!!a};b.prototype.hh=function(){return this.isLoaded};b.prototype.cn=function(){return!this.isLoaded};b.prototype.kd=function(){return Number(this.m.height)/(2*Math.tan(Math.PI/180*(this.Pb()/2)))};b.prototype.zl=function(a,d){this.isFullscreen&&(a=window.innerWidth,d=window.innerHeight);var c=a-this.margin.left-this.margin.right,b=d-
this.margin.top-this.margin.bottom;if(!(10>c||10>b)){var g=window.devicePixelRatio||1;this.pf&&(g=1);this.D.style.width=c+"px";this.D.style.height=b+"px";this.D.style.left=this.margin.left+"px";this.D.style.top=this.margin.top+"px";if(this.Z)try{this.bb&&(this.bb.style.position="absolute",this.bb.style.display="inline",this.bb.style.width=c+"px",this.bb.style.height=b+"px",this.bb.width=c*g,this.bb.height=b*g),this.H&&(this.mb.width=c*g,this.mb.height=b*g,this.H.viewport(0,0,this.H.drawingBufferWidth,
this.H.drawingBufferHeight))}catch(e){alert(e)}this.dc&&(this.dc.style.width=a+"px",this.dc.style.height=d+"px",this.dc.width=a,this.dc.height=d);this.Da&&(this.Da.style.width=a+"px",this.Da.style.height=d+"px",this.ta.style.width=a+"px",this.ta.style.height=d+"px",this.ta.width=a,this.ta.height=d,this.ta.style.left=this.margin.left+"px",this.ta.style.top=this.margin.top+"px",this.O&&this.O!=this.Da&&(this.O.style.width=a+"px",this.O.style.height=d+"px"));this.Ea&&(c=this.Ea.Qc,c.style.width=a+"px",
c.style.height=d+"px",c.width=a,c.height=d,c.style.left=this.margin.left+"px",c.style.top=this.margin.top+"px");this.Xf&&(this.Ca=!0);c=this.D.offsetWidth;b=this.D.offsetHeight;if(this.m.width!=c||this.m.height!=b)this.m.width=c,this.m.height=b;this.zp();this.O&&this.O.ggUpdateSize&&this.O.ggUpdateSize(a,d);this.ha("sizechanged",{Mg:a,Vf:d})}};b.prototype.Je=function(){this.Bj=!0};b.prototype.gd=function(){this.zl(this.Gd.offsetWidth,this.Gd.offsetHeight)};b.prototype.Jn=function(){var a={width:0,
height:0};a.width=this.m.width;a.height=this.m.height;return a};b.prototype.le=function(){var a={x:0,y:0},d=this.D;if(d.offsetParent){do a.x+=d.offsetLeft,a.y+=d.offsetTop,d=d.offsetParent;while(d)}return a};b.prototype.Po=function(a){this.Ba=a};b.prototype.Go=function(a,d,c,b){this.margin.left=a;this.margin.top=d;this.margin.right=c;this.margin.bottom=b;this.Ba=this.skinObj;this.Je()};b.prototype.Cm=function(a){0==a&&(this.B.qd=!1);1==a&&(this.B.qd=!0);2==a&&(this.B.qd=!this.B.qd);this.ha("viewmodechanged",
{})};b.prototype.Hn=function(){return 1==this.B.qd?1:0};b.prototype.Tj=function(a,d){this.w.mode=1==d&&0<this.w.mode?0:Math.round(a);this.update();this.ia&&(this.ia.changePolygonMode(a,d),this.ia.update());this.ha("polymodechanged",{})};b.prototype.Bl=function(a){var d=this.w.hb.indexOf(a);-1==d?(this.w.hb.push(a),this.w.Jb.push(0),this.w.Jc.push(1)):this.w.Jc[d]=1;this.update()};b.prototype.Bk=function(a){var d=this.w.hb.indexOf(a);-1!=d&&(this.w.Jc[d]=0,this.w.Nh.push(a),this.update())};b.prototype.lp=
function(a){var d=this.w.hb.indexOf(a);-1==d||-1!=d&&0==this.w.Jc[d]?this.Bl(a):this.Bk(a);this.update()};b.prototype.Am=function(a,d,c,b,g){for(var e=0;e<this.P.length;e++){var h=this.P[e];"poly"!=h.type||h.id!=a&&""!=a||(h.$b=d,h.Zb=c,h.cc=b,h.bc=g)}""==a&&(this.w.$b=d,this.w.Zb=c,this.w.cc=b,this.w.bc=g);this.update()};b.prototype.ym=function(a){this.Ea&&(this.Ea.qj=0==a?!0:1==a?!1:!this.Ea.qj,this.update())};b.prototype.xn=function(){return this.w.mode};b.prototype.Dm=function(){this.ha("viewstatechanged",
{})};b.prototype.In=function(){return 0};b.prototype.ln=function(a){return(a=this.Wi[a])?a.type:"web"};b.prototype.kn=function(a){return(a=this.Wi[a])?a:{}};b.prototype.rn=function(a,d){var c=[];a||(a=this.kb);this.wh[a][d]&&(c.push(this.wh[a][d].y),c.push(this.wh[a][d].x));return c};b.prototype.Ek=function(a,d,c){a=Math.atan2(a+1,c);var b=Math.atan2(d+1,c);d=Math.sin(a);c=Math.sin(b);a=Math.cos(a);b=Math.cos(b);this.ik.$a(0,0,-1);this.hk.$a(a,0,-d);this.jk.$a(-a,0,-d);this.kk.$a(0,b,-c);this.gk.$a(0,
-b,-c)};b.prototype.si=function(a){a=this.If(a,this.ik);a=this.If(a,this.hk);a=this.If(a,this.jk);a=this.If(a,this.kk);return a=this.If(a,this.gk)};b.prototype.Pl=function(a){if(!this.vc&&this.Sn!=a){this.Sn=a;var d;d=this.margin.left+this.m.width/2+"px ";d+=this.margin.top+this.m.height/2+"px ";this.Da.style[this.ld]=a+"px";this.Da.style[this.ld+"Origin"]=d;this.D.style[this.ld]=a+"px";this.D.style[this.ld+"Origin"]=d}};b.prototype.Yo=function(){return this.C.He||this.C.Dd||this.Z&&(4!=this.La||
0!=this.jc)?!1:!0};b.prototype.Hg=function(){var a,d=new p.sa(0,0,-100),c=this.kd(),b,g,e;g=100/this.f.c;e=this.h.width/this.h.height;b=this.m.height*g*e;g*=this.m.height;for(var h=this.Yo(),v=0;v<this.P.length;v++){var m=this.P[v],k,w;"point"==m.type&&(a=!1,2==this.fb?(k=(this.pan.c-m.pan)/100/e*b,w=(this.i.c-m.i)/100*g,Math.abs(k)<this.m.width/2+500&&Math.abs(w)<this.m.height/2+500&&(a=!0)):(d.$a(0,0,-100),d.Aa(-m.i*Math.PI/180),d.Ma(m.pan*Math.PI/180),d.Ma(-this.pan.c*Math.PI/180),d.Aa(this.i.c*
Math.PI/180),d.Bb(this.N.c*Math.PI/180),.01>d.z?(w=-c/d.z,k=d.x*w,w*=d.y,Math.abs(k)<this.m.width/2+500&&Math.abs(w)<this.m.height/2+500&&(a=!0)):w=k=0),m.kc=k+this.m.width/2,m.Hb=w+this.m.height/2,m.b&&m.b.__div&&("none"!=m.b.__div.style[this.Vc]&&(m.b.__div.style[this.Vc]="none"),m.b.ggUse3d?(this.vc||this.Pl(c),m.b.__div.style.width="1px",m.b.__div.style.height="1px",a="",this.vc&&(a+="perspective("+c+"px) "),a+="translate3d(0px,0px,"+c+"px) ",a+="rotateZ("+this.N.c.toFixed(10)+"deg) ",a+="rotateX("+
this.i.c.toFixed(10)+"deg) ",a+="rotateY("+(-this.pan.c).toFixed(10)+"deg) ",a+="rotateY("+m.pan.toFixed(10)+"deg) ",a+="rotateX("+(-m.i).toFixed(10)+"deg) ",a+="translate3d(0px,0px,"+(-1*m.b.gg3dDistance).toFixed(10)+"px) ",m.b.__div.style[this.Wa+"Origin"]="0% 0%",m.b.__div.style[this.Wa]=a,m.b.__div.style.left=this.margin.left+this.m.width/2+"px",m.b.__div.style.top=this.margin.top+this.m.height/2+"px"):a&&h?(m.b.__div.style.left=this.margin.left+k+this.m.width/2+"px",m.b.__div.style.top=this.margin.top+
w+this.m.height/2+"px"):(m.b.__div.style.left="-1000px",m.b.__div.style.top="-1000px")));if("poly"==m.type){var r=[];if(2==this.fb)for(m.Qd=[],a=0;a<m.Lg.length;a++)k=m.Lg[a],r=(this.pan.c-k.pan)/100/e*b,k=(this.i.c-k.i)/100*g,r+=this.margin.left+this.m.width/2,k+=this.margin.top+this.m.height/2,m.Qd.push({kc:r,Hb:k});else{for(a=0;a<m.Lg.length;a++)k=m.Lg[a],d.$a(0,0,-100),d.Aa(-k.i*Math.PI/180),d.Ma(k.pan*Math.PI/180),d.Ma(-this.pan.c*Math.PI/180),d.Aa(this.i.c*Math.PI/180),d.Bb(this.N.c*Math.PI/
180),r.push(d.clone());r=this.si(r);if(0<r.length)for(a=0;a<r.length;a++)d=r[a],.1>d.z?(w=-c/d.z,k=this.m.width/2+d.x*w,w=this.m.height/2+d.y*w):w=k=0,d.kc=k,d.Hb=w;m.Qd=r}}}};b.prototype.Xm=function(){for(var a=[],d=0;d<this.P.length;d++){var c=this.P[d];"point"==c.type&&c.b&&c.b.__div&&a.push(c.b.__div)}return a};b.prototype.fa=function(a,d){a=Number(a);isNaN(d)&&(d=0);0>d&&(d=0);1<d&&(d=1);return"rgba("+(a>>16&255)+","+(a>>8&255)+","+(a&255)+","+d+")"};b.prototype.jo=function(){var a,d;if(this.ta&&
(this.w.eg!=this.w.mode&&(this.w.eg=this.w.mode,this.ta.style.visibility=0<this.w.mode?"inherit":"hidden"),0<=this.w.mode||0<this.w.hb.length)){this.ba||(this.ba=this.ta.getContext("2d"));if(this.ba.width!=this.m.width||this.ba.height!=this.m.height)this.ba.width=this.m.width,this.ba.height=this.m.height;this.ba.clear?this.ba.clear():this.ba.clearRect(0,0,this.ta.width,this.ta.height);var c=1;0>=this.w.mode&&(c=0);3==this.w.mode&&(c=this.w.oa);for(a=0;a<this.P.length;a++){d=this.P[a];var b=c;if("poly"==
d.type){var g=d.Qd;2==this.w.mode&&(b=d.oa);var e=this.w.hb.indexOf(d.id);-1!=e&&(b=this.w.Jb[e]);this.ba.fillStyle=this.fa(d.$b,d.Zb*b);this.ba.strokeStyle=this.fa(d.cc,d.bc*b);if(0<g.length){this.ba.beginPath();for(d=0;d<g.length;d++)b=g[d],0==d?this.ba.moveTo(b.kc,b.Hb):this.ba.lineTo(b.kc,b.Hb);this.ba.closePath();this.ba.stroke();this.ba.fill()}}}}};b.prototype.Ck=function(a,d,c){var b,g,e=!1;b=0;for(g=a.length-1;b<a.length;g=b++){var h=a[b];g=a[g];h.Hb>c!=g.Hb>c&&d<(g.kc-h.kc)*(c-h.Hb)/(g.Hb-
h.Hb)+h.kc&&(e=!e)}return e};b.prototype.ri=function(a,d){var c=-1;if((0<=this.w.mode||0<this.w.hb.length)&&this.On())for(var b=0;b<this.P.length;b++){var g=this.P[b];"poly"==g.type&&g.Qd&&0<g.Qd.length&&(-1!=this.w.mode||-1!=this.w.hb.indexOf(g.id))&&this.Ck(g.Qd,a,d)&&(c=b,g.kc=a,g.Hb=d)}return 0<=c?this.P[c]:!1};b.prototype.On=function(){return 4==this.ya()&&0==this.jc};b.prototype.Pb=function(){var a=0,d=this.ya(),c=this.m;switch(this.f.mode){case 0:a=this.f.c/2;break;case 1:a=4==d?180*Math.atan(c.height/
c.width*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:c.height/c.width*this.f.c/2;break;case 2:a=Math.sqrt(c.width*c.width+c.height*c.height);a=4==d?180*Math.atan(c.height/a*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:c.height/a*this.f.c/2;break;case 3:a=4*c.height/3>c.width?this.f.c/2:4==d?180*Math.atan(4*c.height/(3*c.width)*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:4*c.height/(3*c.width)*(this.f.c/2)}return 2*a};b.prototype.Zm=function(a,d){a||(a=this.Pb());d||(d=this.ya());return 4==d?180*Math.atan(this.Yd()*
Math.tan(a/2*Math.PI/180))/Math.PI:a*this.Yd()};b.prototype.Yd=function(){return this.m.width/this.m.height};b.prototype.yg=function(a){a/=2;var d,c=this.ya();switch(this.f.mode){case 0:this.f.c=2*a;break;case 1:a=4==c?180*Math.atan(this.m.width/this.m.height*Math.tan(a*Math.PI/180))/Math.PI:this.m.width/this.m.height*a;this.f.c=2*a;break;case 2:d=Math.sqrt(this.m.width*this.m.width+this.m.height*this.m.height);a=4==c?180*Math.atan(d/this.m.height*Math.tan(a*Math.PI/180))/Math.PI:d/this.m.height*
a;this.f.c=2*a;break;case 3:4*this.m.height/3>this.m.width||(d=3*this.m.width/(4*this.m.height),a=4==c?180*Math.atan(d*Math.tan(a*Math.PI/180))/Math.PI:d*a),this.f.c=2*a}};b.prototype.Ug=function(){var a=new e;a.pan=this.pan.c;a.i=this.i.c;a.f=this.f.c;this.Ue(a);this.Ue(a);this.Ue(a);this.yf&&0==this.fb||(this.pan.c=a.pan,this.i.c=a.i);this.f.c=a.f};b.prototype.Ue=function(a){var d,c,b=this.m.width/this.m.height;if(2==this.fb){0<this.f.jg&&(d=this.mc,this.h.I&&0<this.h.I.length&&(d=this.h.I[0].height),
this.f.min=100*this.m.height/(d*this.f.jg));c=a.f/2;d=c*b;var g=this.h.width/this.h.height*50,b=this.B.ul?2*Math.min(50,g/b):2*Math.max(50,g/b);a.f<this.f.min&&(a.f=this.f.min);a.f>b&&(a.f=b);50<c?a.i=0:(50<a.i+c&&(a.i=50-c),-50>a.i-c&&(a.i=-50+c));d>g?a.pan=0:(a.pan+d>g&&(a.pan=g-d,this.o.active&&(this.o.speed=-this.o.speed,this.pan.d=0)),a.pan-d<-g&&(a.pan=-g+d,this.o.active&&(this.o.speed=-this.o.speed,this.pan.d=0)))}else{0<this.f.jg&&(d=this.mc,this.h.I&&0<this.h.I.length&&(d=this.h.I[0].height),
this.f.min=360*Math.atan2(this.m.height/2,d/2*this.f.jg)/Math.PI);a.f<this.f.min&&(a.f=this.f.min);var g=this.f.max,e=179;c=this.Pb()/2;d=b*c;4==this.ya()?d=180*Math.atan(b*Math.tan(c*Math.PI/180))/Math.PI:9==this.ya()?(g=this.f.Zi,e=355):12==this.ya()&&(g=this.f.Yi,e=360);this.Z||(g=Math.max(160,g));a.f>g&&(a.f=g);12==this.ya()&&(2*d>e&&(a.f=e/b),c=this.Pb()/2,2*c>e&&(a.f=e),c=this.Pb()/2,d=b*c);2*c>this.i.max-this.i.min&&180>this.i.max-this.i.min&&(c=(this.i.max-this.i.min)/2,this.yg(2*c));90>this.i.max?
a.i+c>this.i.max&&(a.i=this.i.max-c):a.i>this.i.max&&(a.i=this.i.max);-90<this.i.min?a.i-c<this.i.min&&(a.i=this.i.min+c):a.i<this.i.min&&(a.i=this.i.min);b=this.pan.max-this.pan.min;if(359.99>b){var g=90,e=Math.tan(c*Math.PI/180),h=Math.tan((Math.abs(a.i)+c)*Math.PI/180),h=Math.sqrt(h*h+1)/Math.sqrt(e*e+1);c=180*Math.atan(h*Math.tan(d*Math.PI/180))/Math.PI;2*c>b&&(h=Math.tan(b*Math.PI/360)/Math.tan(d*Math.PI/180),b=h*Math.sqrt(e*e+1),h=Math.sqrt(b*b-1),g=180/Math.PI*Math.atan(h));a.pan+c>this.pan.max&&
(a.pan=this.pan.max-c,this.o.active&&(this.o.speed=-this.o.speed,this.pan.d=0));a.pan-c<this.pan.min&&(a.pan=this.pan.min+c,this.o.active&&(this.o.speed=-this.o.speed,this.pan.d=0));a.i+d>g&&(a.i=g-d);a.i-d<-g&&(a.i=-g+d)}}};b.prototype.update=function(a){void 0===a&&(a=0);this.Ca=!0;a&&(this.Kf=Math.max(1*a,this.Kf))};b.prototype.en=function(){return this.ia?!!this.ia.isTileLoading:0<this.Ga||0<this.xc};b.prototype.Ig=function(){var a=Date.now(),d;this.Cb?this.ia&&(this.sp(),2===this.fb?(this.Ug(),
this.Hg()):0===this.fb&&(d=this.kd(),this.Ek(this.m.width/2,this.m.height/2,d),this.Hg())):2===this.fb?(this.Hg(),this.Z?(this.ma.zj(),this.ma.dl()):this.zj()):0===this.fb&&(!this.Z||4==this.La&&0==this.jc?(d=this.kd(),this.Ek(this.m.width/2,this.m.height/2,d),this.Hg(),this.Kg?this.ma.yp():this.Wl&&this.Vl(),this.Ql(),this.Z?(this.s.$c?14==this.s.format?this.ma.xp():this.ma.$l():0<this.h.I.length?this.ma.Ep():this.ma.Gp(),this.ma.dl()):(this.Kc?0<this.h.I.length?this.vp():this.up():this.Jg&&this.rp(),
this.jo()),this.Ea&&this.Ea.io()):(this.ma.$l(),this.Hg(),this.Nn()));d=Date.now();50<d-a?(this.L("Time between frames: "+(d-a)),this.pf||(2<this.rj?(this.pf=!0,this.L("disabling HighDPI rendering"),this.gd()):this.rj++)):this.rj=0;this.Xf&&this.h.pl++};b.prototype.up=function(){var a=!1;if(this.m.width!=this.D.offsetWidth||this.m.height!=this.D.offsetHeight)this.m.width=this.D.offsetWidth,this.m.height=this.D.offsetHeight,this.D.style[this.Wa+"OriginX"]=this.m.width/2+"px",this.D.style[this.Wa+"OriginY"]=
this.m.height/2+"px",a=!0;var d=Math.round(this.kd());this.fg==d&&!a||this.vc||(this.fg=d,this.D.style[this.ld]=d+"px");this.jb.Gm(this.pan.c,this.i.c,this.N.c,this.ab);for(a=0;6>a;a++){var c,b;if(c=this.jb.cb[a])b="",this.vc?(b+="translate3d("+this.m.width/2+"px,"+this.m.height/2+"px,0px) ",b+="perspective("+d+"px) ",b+="translate3d(0px,0px,"+d+"px) "):b+="translate3d("+this.m.width/2+"px,"+this.m.height/2+"px,"+d+"px) ",b+="rotateZ("+Number(this.N.c).toFixed(10)+"deg) ",b+="rotateX("+Number(this.i.c).toFixed(10)+
"deg) ",b+="rotateY("+Number(-this.pan.c).toFixed(10)+"deg) ",c.yk&&(b+=c.yk,c.gc||(b="translate3d(-10px,-10px,0px) scale(0.001,0.001)"),c.K.style[this.Wa]=b)}};b.prototype.rp=function(){this.Ug();var a;this.dc&&(a=this.dc.getContext("2d"));if(this.m.width!==this.D.offsetWidth||this.m.height!==this.D.offsetHeight)this.m.width=this.D.offsetWidth,this.m.height=this.D.offsetHeight;if(a){var d=a.canvas.width/2,c=a.canvas.height/2,b=a.createRadialGradient(d,c,5,d,c,Math.max(d,c));b.addColorStop(0,"#333");
b.addColorStop(1,"#fff");a.rect(0,0,a.canvas.width,a.canvas.height);a.fillStyle=b;a.fill();a.fillStyle="#f00";a.font="20px Helvetica";a.textAlign="center";a.fillText("Pan: "+this.pan.c.toFixed(1),d,c-60);a.fillText("Tilt: "+this.i.c.toFixed(1),d,c-30);a.fillText("Fov: "+this.f.c.toFixed(1),d,c+0);a.fillText("Node: "+this.pk(),d,c+30);a.fillText("Title: "+this.zf.title,d,c+60)}};b.prototype.sp=function(){this.Ug();if(this.m.width!==this.D.offsetWidth||this.m.height!==this.D.offsetHeight)this.m.width=
this.D.offsetWidth,this.m.height=this.D.offsetHeight;this.ia&&this.ia.setPan&&(this.ia.setPan(this.pan.c),this.ia.setTilt(this.i.c),this.ia.setFov(this.f.c))};b.prototype.zj=function(){this.ta.style.visibility="inherit";this.ba||(this.ba=this.ta.getContext("2d"));if(this.ba.width!=this.m.width||this.ba.height!=this.m.height)this.ba.width=this.m.width,this.ba.height=this.m.height;this.ba.clear?this.ba.clear():this.ba.clearRect(0,0,this.ta.width,this.ta.height);this.xc=0;var a,d,c;d=100/this.f.c;c=
this.h.width/this.h.height;var b=this.m.height*d*c;d*=this.m.height;a=(this.pan.c/100/c-.5)*b+this.m.width/2;for(var g=(this.i.c/100-.5)*d+this.m.height/2,e,h,v,m,k=0;this.h.I.length>=k+2&&this.h.I[k+1].width>b;)k++;var w,r;r=[];for(w=this.h.I.length-1;w>=k;){c=this.h.I[w];var u;if(c.cache)u={Ya:0,ub:0},u.wb=c.M-1,u.xb=c.ea-1;else{u={};var t=-g/d*(c.height/this.h.G);e=(-a+this.m.width)/b*(c.width/this.h.G);h=(-g+this.m.height)/d*(c.height/this.h.G);u.Ya=Math.min(Math.max(0,Math.floor(-a/b*(c.width/
this.h.G))),c.M-1);u.ub=Math.min(Math.max(0,Math.floor(t)),c.ea-1);u.wb=Math.min(Math.max(0,Math.floor(e)),c.M-1);u.xb=Math.min(Math.max(0,Math.floor(h)),c.ea-1)}r[w]=u;var x=!0;for(h=u.ub;h<=u.xb;h++)for(e=u.Ya;e<=u.wb;e++)m=e+h*c.M,t=c.V[m],t||(t=new p.Kd,c.V[m]=t),this.Ga<this.Eg?t.h||(this.Qi++,t.h=new Image,t.h.onload=this.ip(),t.h.onerror=this.Sh(t),t.h.onabort=this.Sh(t),t.h.crossOrigin=this.crossOrigin,t.h.setAttribute("src",this.Fe(0,w,e,h)),c.cache&&this.Lb.push(t.h),0==this.Ga&&(this.O&&
this.O.ggReLoadedLevels&&this.O.ggReLoadedLevels(),this.ha("tilesrequested",{})),this.Ga++,this.Ca=!0):this.xc++,t.h&&t.h.complete||(x=!1),t.visible=!0;u.Ui=x;w--}for(w=this.h.I.length-1;w>=k;){c=this.h.I[w];if(r[w]&&0<=r[w].Ya)for(u=r[w],h=u.ub;h<=u.xb;h++)for(e=u.Ya;e<=u.wb;e++)m=e+h*c.M,(t=c.V[m])||(t=c.V[m]=new p.Kd),t.h&&t.h.complete&&this.ba.drawImage(t.h,a+(-this.h.Ka+this.h.G*e)*b/c.width,g+(-this.h.Ka+this.h.G*h)*d/c.height,t.h.width*b/c.width,t.h.height*d/c.height),t.visible=!0;w--}for(b=
0;b<this.h.I.length;b++)if(c=this.h.I[b],!c.cache)for(v in c.V)c.V.hasOwnProperty(v)&&(t=c.V[v],t.visible||(t.h=null,delete c.V[v]));if(0<=this.w.mode||0<this.w.hb.length)for(b=1,0>=this.w.mode&&(b=0),3==this.w.mode&&(b=this.w.oa),v=0;v<this.P.length;v++)if(c=this.P[v],a=b,"poly"==c.type&&(d=c.Qd,2==this.w.mode&&(a=c.oa),g=this.w.hb.indexOf(c.id),-1!=g&&(a=this.w.Jb[g]),0<d.length)){this.ba.fillStyle=this.fa(c.$b,c.Zb*a);this.ba.strokeStyle=this.fa(c.cc,c.bc*a);this.ba.beginPath();for(c=0;c<d.length;c++)a=
d[c],0==c?this.ba.moveTo(a.kc,a.Hb):this.ba.lineTo(a.kc,a.Hb);this.ba.closePath();this.ba.stroke();this.ba.fill()}this.Tc=!1};b.prototype.hp=function(a){var d=this;return function(){d.update();d.Tc=!0;a.loaded=!0;a.h&&!a.K&&d.D.appendChild(a.h);d.Ga&&d.Ga--;0==d.Ga&&(d.O&&d.O.ggLoadedLevels&&d.O.ggLoadedLevels(),this.ha("tilesready",{}));a.h&&a.Qa&&(a.Qa.drawImage(a.h,0,0),a.h=null)}};b.prototype.ip=function(){var a=this;return function(){a.Ca=!0;a.Tc=!0;a.Ga&&a.Ga--;0==a.Ga&&(a.O&&a.O.ggLoadedLevels&&
a.O.ggLoadedLevels(),this.ha("tilesready",{}))}};b.prototype.Sh=function(a){var d=this;return function(){d.Ca=!0;d.Tc=!0;d.Ga&&d.Ga--;0==d.Ga&&(d.O&&d.O.ggLoadedLevels&&d.O.ggLoadedLevels(),this.ha("tilesready",{}));a.h=null}};b.prototype.wk=function(a,d,c){c.Ya=a.width/this.h.G*d.je;c.ub=a.height/this.h.G*d.ke;c.wb=a.width/this.h.G*d.re;c.xb=a.height/this.h.G*d.se;c.Ya=Math.min(Math.max(0,Math.floor(c.Ya)),a.M-1);c.ub=Math.min(Math.max(0,Math.floor(c.ub)),a.ea-1);c.wb=Math.min(Math.max(0,Math.floor(c.wb)),
a.M-1);c.xb=Math.min(Math.max(0,Math.floor(c.xb)),a.ea-1)};b.prototype.Io=function(a){a=Math.round(a);this.vc=0<(a&1);this.nf=0<(a&2);this.$h=0<(a&4);this.pf=0<(a&8);4096<=a&&(this.Kc=0<(a&4096),this.Z=0<(a&8192),this.Jg=0<(a&32768))};b.prototype.An=function(){var a=0;this.vc&&(a|=1);this.nf&&(a|=2);this.$h&&(a|=4);this.Kc&&(a|=4096);this.Z&&(a|=8192);this.Jg&&(a|=32768);return a};b.prototype.Sl=function(){if(!(6>this.jb.cb.length))for(var a=0;6>a;a++){var d;d=this.jb.cb[a];var c;c=[];c.push(new p.sa(-1,
-1,-1,0,0));c.push(new p.sa(1,-1,-1,1,0));c.push(new p.sa(1,1,-1,1,1));c.push(new p.sa(-1,1,-1,0,1));for(var b=0;4>b;b++)4>a?c[b].Ma(-Math.PI/2*a):c[b].Aa(Math.PI/2*(4==a?-1:1)),this.ab&&(c[b].Bb(this.ab.N*Math.PI/180),c[b].Aa(-this.ab.pitch*Math.PI/180)),c[b].Be(-this.pan.c),c[b].yd(this.i.c),c[b].Ce(this.N.c);c=this.si(c);d.gc=0<c.length;if(d.gc){var g=d.ye;g.je=c[0].fd;g.re=c[0].fd;g.ke=c[0].Kb;g.se=c[0].Kb;for(b=1;b<c.length;b++)g.je=Math.min(g.je,c[b].fd),g.re=Math.max(g.re,c[b].fd),g.ke=Math.min(g.ke,
c[b].Kb),g.se=Math.max(g.se,c[b].Kb);g.Wd=g.re-g.je;g.Ke=g.se-g.ke;g.scale=Math.max(g.Wd,g.Ke)}else d.ye.Wd=-1,d.ye.Ke=-1;O&&(d.gc=1,g=d.ye,g.je=0,g.re=1,g.ke=0,g.se=1,g.Wd=g.re-g.je,g.Ke=g.se-g.ke,g.scale=Math.max(g.Wd,g.Ke))}};b.prototype.Xi=function(){for(var a=0;a<this.h.I.length;a++){var d=this.h.I[a],c;for(c in d.V)d.V.hasOwnProperty(c)&&(d.V[c].visible=!1)}};b.prototype.Di=function(){for(var a=0,d=Math.tan(Math.min(this.Pb(),175)*Math.PI/360),c=this.m.height/(2*d),c=c*(1+this.m.width/this.m.height*
d/2),c=c*Math.pow(2,1<this.devicePixelRatio?this.h.Wk:this.h.Vk);this.h.I.length>=a+2&&!this.h.I[a+1].kf&&this.h.I[a+1].width>c;)a++;return a};b.prototype.vp=function(){var a=!1,d,c,b;if(this.m.width!==this.D.offsetWidth||this.m.height!==this.D.offsetHeight)this.m.width=this.D.offsetWidth,this.m.height=this.D.offsetHeight,this.D.style[this.Wa+"OriginX"]=this.m.width/2+"px",this.D.style[this.Wa+"OriginY"]=this.m.height/2+"px",a=!0;var g=Math.round(this.kd());if(this.fg!=g||a)this.fg=g,this.vc||(this.D.style[this.ld]=
g+"px",this.D.style[this.ld+"Origin"]="50% 50%");this.xc=0;if(0<this.h.I.length){this.Sl();this.Xi();var e;e="";for(d=0;6>d;d++){var h;h=this.jb.cb[d];h.gc&&(e=e+d+",")}e=this.Di();var k;for(k=this.h.I.length-1;k>=e;){var a=this.h.I[k],m=1;k==this.h.I.length-1&&0==this.h.Ka&&(m=this.h.G/(this.h.G-2));for(d=0;6>d;d++){h=this.jb.cb[d];var q=h.ye;if(h.gc&&0<q.Wd&&0<q.Ke&&0<q.scale||a.cache){h.Ca=!1;var w;w={};a.cache?(w.Ya=0,w.ub=0,w.wb=a.M-1,w.xb=a.ea-1):this.wk(a,q,w);for(b=w.ub;b<=w.xb;b++)for(c=
w.Ya;c<=w.wb;c++){var r=c+b*a.M+d*a.M*a.ea;(q=a.V[r])||(q=a.V[r]=new p.Kd);if(!q.K&&this.Ga<this.Eg){if(0<this.Wh.length){q.K=this.Wh.shift();for(r=this.D.firstChild;r&&r.Jd&&(-1==r.Jd||r.Jd>=k);)r=r.nextSibling;this.D.insertBefore(q.K,r);q.Qa=q.K.getContext("2d")}else if(this.Ll<this.ue){this.Ll++;q.K=document.createElement("canvas");q.K.width=this.h.G+2*this.h.Ka;q.K.height=this.h.G+2*this.h.Ka;q.Qa=q.K.getContext("2d");q.K.style[this.Wa+"Origin"]="0% 0%";q.K.style.overflow="hidden";q.K.style.position=
"absolute";for(r=this.D.firstChild;r&&r.Jd&&(-1==r.Jd||r.Jd>=k);)r=r.nextSibling;this.D.insertBefore(q.K,r)}q.K&&(this.Qi++,q.h=new Image,q.h.crossOrigin=this.crossOrigin,q.h.style[this.Wa+"Origin"]="0% 0%",q.h.style.position="absolute",q.h.style.overflow="hidden",q.K.Jd=k,q.h.onload=this.hp(q),q.h.onerror=this.Sh(q),q.h.onabort=this.Sh(q),q.h.setAttribute("src",this.Fe(d,k,c,b)),a.cache&&this.Lb.push(q.h),0==this.Ga&&(this.O&&this.O.ggReLoadedLevels&&this.O.ggReLoadedLevels(),this.ha("tilesrequested",
{})),this.Ga++,this.Ca=!0)}else this.xc++;if(q.K){r="";this.vc?(r+="translate3d("+this.m.width/2+"px,"+this.m.height/2+"px,0px) ",r+=" perspective("+g+"px) ",r+="translate3d(0px,0px,"+g+"px) "):r+="translate3d("+this.m.width/2+"px,"+this.m.height/2+"px,"+g+"px) ";r+="rotateZ("+Number(this.N.c).toFixed(10)+"deg) ";r+="rotateX("+Number(this.i.c).toFixed(10)+"deg) ";r+="rotateY("+Number(-this.pan.c).toFixed(10)+"deg) ";this.ab&&(r+="rotateX("+Number(-this.ab.pitch).toFixed(10)+"deg) ",r+="rotateZ("+
Number(this.ab.N).toFixed(10)+"deg) ");var r=4>d?r+("rotateY("+-90*d+"deg) "):r+("rotateX("+(4==d?-90:90)+"deg) "),u;this.nf?(u=this.Gf/this.h.G*(this.h.G/a.width)*(2*k+1),u=this.Md?2/Math.tan(this.f.c*Math.PI/360)*u:2*u,r+=" scale("+u*m*m+")"):u=1/(m*m);r+=" translate3d("+(1/m*c*this.h.G-this.h.Ka-a.width/2)+"px,";r+=1/m*b*this.h.G-this.h.Ka-a.width/2+"px,";r+=-a.width*u/2+"px)";h.gc&&(q.visible=!0,q.K?q.K.style[this.Wa]=r:q.h&&(q.h.style[this.Wa]=r))}}}}k--}for(g=0;g<this.h.I.length;g++){var a=
this.h.I[g],t;for(t in a.V)a.V.hasOwnProperty(t)&&(q=a.V[t],!q.visible&&q.K&&(a.cache?q.K?q.K.style[this.Wa]="translate3d(-10px,-10px,0px) scale(0.001,0.001)":q.h&&(q.h.style[this.Wa]=""):(q.Qa&&q.Qa.clearRect(0,0,q.Qa.canvas.width,q.Qa.canvas.height),this.Wh.push(q.K),q.K?(e="translate3d(-10px,-10px,0px) scale(0.001,0.001)",q.K.style[this.Wa]=e,q.K.Jd=-1):q.loaded&&this.D.removeChild(q.h),q.K=null,q.h=null,q.Qa=null,delete a.V[t])))}this.Tc=!1}};b.prototype.Ql=function(){var a=Math.round(this.kd());
this.vc||this.Pl(a);for(var d=0;d<this.Za.length;d++){var c;c=this.Za[d];c.Ul(a);c.b.hidden=!1}};b.prototype.Vl=function(){for(var a=Math.round(this.kd()),d=0;d<this.J.length;d++){var c;c=this.J[d];c.bd||(c.Ul(a),c.b.hidden=!1)}};b.prototype.Nn=function(){for(var a=0;a<this.Za.length;a++){var d;d=this.Za[a];d.Al()}for(a=0;a<this.J.length;a++)d=this.J[a],d.bd||d.Al()};b.prototype.zp=function(){for(var a=0;a<this.J.length;a++){var d;d=this.J[a];d.bd||d.Je()}for(a=0;a<this.Za.length;a++)d=this.Za[a],
d.Je()};b.prototype.Ec=function(a){this.he=!1;try{a?this.bb=a:this.bb=document.createElement("canvas");var d=this.Gd.offsetWidth-this.margin.left-this.margin.right,c=this.Gd.offsetHeight-this.margin.top-this.margin.bottom;if(100>d||100>c)c=d=100;var b=window.devicePixelRatio||1;this.pf&&(b=1);this.D.style.width=d+"px";this.D.style.height=c+"px";this.bb.style.width=d+"px";this.bb.style.height=c+"px";this.bb.width=d*b;this.bb.height=c*b;this.bb.style.display="none";this.bb.style.Np="none";this.D.insertBefore(this.bb,
this.D.firstChild);a={stencil:!0,depth:!0,alpha:!1};this.Ld&&10<=this.Dk[0]&&(a.antialias=!1);this.H=this.bb.getContext("webgl",a);this.H||(this.H=this.bb.getContext("experimental-webgl",a));if(this.H){var g=this.H;this.mb.width=d*b;this.mb.height=c*b;g.clearColor(0,0,0,0);g.enable(this.H.DEPTH_TEST);g.viewport(0,0,500,500);g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT);4096<=g.getParameter(g.MAX_TEXTURE_SIZE)&&!this.ag&&(this.ue=1<b?4*this.ue:2*this.ue);this.L("Max tile cnt: "+this.ue);this.ma.Zf();
this.ma.lh();this.ma.Fk(this.vf);this.ma.Gk();this.C&&(this.C.Zf(),this.C.Ec());this.Ea&&(this.Ea.Zf(),this.Ea.Ec())}}catch(e){this.L(e)}this.H?this.Z=!0:alert("Could not initialise WebGL!")};b.prototype.fc=function(a){return a?"{"==a.charAt(0)||"/"==a.charAt(0)||0<a.indexOf("://")||0==a.indexOf("javascript:")?a:this.Fd+a:this.Fd};b.prototype.Sd=function(a,d,c){var b=(new RegExp("%0*"+d,"i")).exec(a.toString());if(b){var b=b.toString(),g=c.toString();for(b.charAt(b.length-1)!=d&&(g=(1+c).toString());g.length<
b.length-1;)g="0"+g;a=a.replace(b,g)}return a};b.prototype.Fe=function(a,d,c,b){var g=this.h.Ti-1-d,e=this.h.Xk,h="x";switch(a){case 0:h="f";break;case 1:h="r";break;case 2:h="b";break;case 3:h="l";break;case 4:h="u";break;case 5:h="d"}for(var k=0;3>k;k++)e=this.Sd(e,"c",a),e=this.Sd(e,"s",h),e=this.Sd(e,"r",d),e=this.Sd(e,"l",g),e=this.Sd(e,"x",c),e=this.Sd(e,"y",b),e=this.Sd(e,"v",b),e=this.Sd(e,"h",c);return this.fc(e)};b.prototype.Ki=function(){return this.pan.c};b.prototype.tn=function(){return this.u.pan};
b.prototype.un=function(){for(var a=this.pan.c;-180>a;)a+=360;for(;180<a;)a-=360;return a};b.prototype.ih=function(){for(var a=this.pan.c-this.pan.aj;-180>a;)a+=360;for(;180<a;)a-=360;return a};b.prototype.ug=function(a){this.qa();isNaN(a)||(this.pan.c=Number(a));this.update()};b.prototype.oj=function(a){this.qa();isNaN(a)||(this.pan.c=Number(a)+this.pan.aj);this.update()};b.prototype.Sj=function(a,d){isNaN(a)||(this.ug(this.Ki()+a),d&&(this.pan.d=a))};b.prototype.zm=function(a,d){this.Sj(a*this.fh(),
d)};b.prototype.Mi=function(){return this.i.c};b.prototype.Cn=function(){return this.u.i};b.prototype.xg=function(a){this.qa();isNaN(a)||(this.i.c=Number(a));this.update()};b.prototype.Uj=function(a,d){this.xg(this.Mi()+a);d&&(this.i.d=a)};b.prototype.Bm=function(a,d){this.Uj(a*this.fh(),d)};b.prototype.xl=function(a){this.qa();isNaN(a)||(this.N.c=Number(a));this.update()};b.prototype.Bn=function(){return this.N.c};b.prototype.Of=function(){return this.f.c};b.prototype.Ym=function(){return this.u.Cd};
b.prototype.qg=function(a){this.qa();var d;switch(this.ya()){case 4:d=170;break;case 12:d=360;break;case 9:d=355;break;default:d=170}2==this.fb&&(d=9999999999);!isNaN(a)&&0<a&&a<d&&(d=this.f.c,this.f.c=Number(a),d!=this.f.c&&this.update())};b.prototype.Rj=function(a,d){this.qg(this.Of()+a);d&&(this.f.d=a)};b.prototype.ni=function(a,d){if(!isNaN(a)){var c;c=a/90*Math.cos(Math.min(this.f.c,90)*Math.PI/360);c=this.f.c*Math.exp(c);this.qg(c);d&&(this.f.d=a)}};b.prototype.Ho=function(a,d){this.qa();isNaN(a)||
(this.pan.c=a);isNaN(d)||(this.i.c=d);this.update()};b.prototype.vg=function(a,d,c){this.qa();isNaN(a)||(this.pan.c=a);isNaN(d)||(this.i.c=d);isNaN(c)||this.qg(c);this.update()};b.prototype.Co=function(){this.vg(this.pan.Ra,this.i.Ra,this.f.Ra)};b.prototype.Fo=function(a){this.sg(a);this.tg(a);this.rg(a)};b.prototype.sg=function(a){this.B.vb=a};b.prototype.rg=function(a){this.B.qe=a};b.prototype.jn=function(){return this.B.qe};b.prototype.tg=function(a){this.B.ad=a};b.prototype.Ro=function(a){this.yf==
!a&&(this.yf=!!a,this.yf||(this.N.c=0),this.ha("gyrochanged",{}))};b.prototype.Dn=function(){return this.yf};b.prototype.moveTo=function(a,d,c,b,g,e){this.qa();if("_blank"!==a&&""!==a){this.u.active=!0;this.u.Le=!1;this.u.Cj=!1;var h=a.toString().split("/");1<h.length&&(a=Number(h[0]),b=Number(d),d=Number(h[1]),2<h.length&&(c=Number(h[2])));isNaN(a)?this.u.pan=this.pan.c:this.u.pan=Number(a);isNaN(d)?this.u.i=this.i.c:this.u.i=Number(d);!isNaN(c)&&0<c&&180>c?this.u.f=Number(c):this.u.f=this.f.c;this.u.speed=
!isNaN(b)&&0<b?Number(b):1;isNaN(g)?this.u.N=this.N.c:this.u.N=Number(g);void 0!==e?!a||4!=e&&12!=e&&9!=e||(this.u.Ab=e):this.u.Ab=this.La}};b.prototype.zh=function(a){this.qa();var d=0,c=0,b=70,g=4,e=0,h=1;a.hasOwnProperty("pan")&&(d=Number(a.pan),this.u.pan=d);a.hasOwnProperty("tilt")&&(c=Number(a.tilt),this.u.i=c);a.hasOwnProperty("fov")&&(b=Number(a.fov),this.u.f=b);a.hasOwnProperty("projection")&&(g=Number(a.projection),this.u.Ab=g);a.hasOwnProperty("timingFunction")&&(e=Number(a.timingFunction));
a.hasOwnProperty("speed")&&(h=Number(a.speed));0>=h?(this.vg(d,c,b),this.cd(g)):(a=new p.Nk,a.Ua="__AutoMove",a.zg=this.pan.c,a.Bg=this.i.c,a.Bd=this.f.c,a.Ag=this.La,a.Td=d,a.Ud=c,a.uf=b,a.ed=g,a.Xe=!1,a.de=!1,a.ee=!1,0==e&&(a.de=!0),1==e&&(a.Xe=!0,a.de=!0),2==e&&(a.ee=!0),a.speed=h,this.u.Lj=this.A,this.A=this.lk(a),this.u.Mj=(new Date).getTime(),this.u.Cj=!0,this.u.active=!0,this.u.Le=!1,this.u.pan=d,this.u.i=c,this.u.f=b,this.Ed=!1)};b.prototype.Yn=function(a){this.moveTo(this.pan.Ra,this.i.Ra,
this.f.Ra,a)};b.prototype.Zn=function(a,d){var c={};c.pan=this.pan.Ra;c.tilt=this.i.Ra;c.fov=this.f.Ra;c.projection=this.Eh;c.timingFunction=d;c.speed=a;this.zh(c)};b.prototype.om=function(a,d,c,b){var g=new p.qh(this);g.type="point";g.pan=d;g.i=c;g.id=a;g.b={};g.b.player=this;g.Ye();g.b.hotspot=g;g.b.__div=document.createElement("div");g.b.__div.appendChild(b);this.P.push(g);g.b.__div.style.position="absolute";g.b.__div.style.left="-1000px";g.b.__div.style.top="-1000px";this.Da.insertBefore(g.b.__div,
this.Da.firstChild);this.Ca=!0};b.prototype.tp=function(a,d,c){for(var b=0;b<this.P.length;b++){var g=this.P[b];g.id==a&&(g.pan=d,g.i=c,g.Ye())}this.Ca=!0};b.prototype.vo=function(a){for(var d=-1,c,b=0;b<this.P.length;b++)c=this.P[b],c.id==a&&(d=b);-1<d&&(c=this.P.splice(d,1).pop(),c.b&&c.b.__div&&this.Da.removeChild(c.b.__div))};b.prototype.wn=function(){for(var a=[],d=0;d<this.P.length;d++){var c=this.P[d];"point"==c.type&&a.push(String(c.id))}return a};b.prototype.$m=function(a){for(var d=0;d<
this.P.length;d++){var c=this.P[d];if(c.id==a)return d={},d.id=a,d.pan=c.pan,d.tilt=c.i,c.b&&c.b.__div&&(d.div=c.b.__div),d}};b.prototype.Zl=function(a,d){this.Y.start.x=a;this.Y.start.y=d;this.Y.da.x=a;this.Y.da.y=d;this.wa.da.x=a;this.wa.da.y=d;this.ij++;this.pan.jd=this.pan.c;this.i.jd=this.i.c};b.prototype.Xl=function(a,d){var c=this.Pb();this.pan.jd+=a*c/this.m.height;this.i.jd+=d*c/this.m.height;this.pan.c=this.pan.jd;this.i.c=this.i.jd};b.prototype.Yl=function(a,d){this.Y.c.x=a;this.Y.c.y=
d;this.Y.ca.x=this.Y.c.x-this.Y.da.x;this.Y.ca.y=this.Y.c.y-this.Y.da.y;this.B.qd&&(this.Y.da.x=this.Y.c.x,this.Y.da.y=this.Y.c.y,this.update())};b.prototype.qa=function(){this.o.active&&(this.o.active=!1,this.ha("autorotatechanged",{}),this.pan.d=0,this.i.d=0,this.f.d=0);this.u.active&&(this.u.active=!1,this.pan.d=0,this.i.d=0,this.f.d=0);this.Ne=this.u.Le=!1;this.o.yh=!1;this.hd=.02;this.Cf=0;this.o.Xb&&(this.o.Xb=!1,this.o.enabled=this.o.Pj);this.ef=(new Date).getTime()};b.prototype.gn=function(){return this.ef};
b.prototype.sk=function(a,d){a||(a=this.ra.x,d=this.ra.y);var c=this.m.height/(2*Math.tan(this.f.c*Math.PI/360)),b=a-this.m.width/2,g=d-this.m.height/2,e={};e.pan=180*Math.atan(b/c)/Math.PI;e.tilt=180*Math.atan(-g/Math.sqrt(b*b+c*c))/Math.PI;return e};b.prototype.yn=function(a,b){var c,f;a||(a=this.ra.x,b=this.ra.y);if(2===this.fb)f=this.f.c/this.m.height,c=-(a-this.m.width/2)*f+this.pan.c,f=-(b-this.m.height/2)*f+this.i.c;else{f=new p.sa(0,0,1);c=this.sk(a,b);f.yd(-c.tilt);f.Be(c.pan);f.yd(-this.i.c);
f.Be(-this.pan.c);f.yd(-this.ab.pitch);f.Ce(this.ab.N);for(c=f.rm()-180;-180>c;)c+=360;f=f.sm()}var g={};g.pan=c;g.tilt=f;return g};b.prototype.rd=function(a){return a==this.control?!0:a&&void 0!==a.ggPermeable&&0==a.ggPermeable?!1:a&&a.ggType&&("container"==a.ggType||"cloner"==a.ggType||"timer"==a.ggType)?!0:!1};b.prototype.pi=function(a,b){var c=this.kd(),f,g,e;for(f=0;f<this.J.length+this.Za.length;f++){var h;h=f<this.J.length?this.J[f]:this.Za[f-this.J.length];if(h.lb)return h}for(f=0;f<this.J.length+
this.Za.length;f++)if(h=f<this.J.length?this.J[f]:this.Za[f-this.J.length],!h.bd){var k=[],m=new p.sa,q;e=g=void 0;0<h.f&&(g=Math.tan(h.f/2*Math.PI/180),e=0<h.Dc?g*h.Xc/h.Dc:g,h.nd&&1!=h.nd&&(e*=h.nd));for(q=0;4>q;q++){switch(q){case 0:m.$a(-g,-e,-1);break;case 1:m.$a(g,-e,-1);break;case 2:m.$a(g,e,-1);break;case 3:m.$a(-g,e,-1)}m.Aa(-h.i*Math.PI/180);m.Ma(h.pan*Math.PI/180);m.Ma(-this.pan.c*Math.PI/180);m.Aa(this.i.c*Math.PI/180);m.Bb(this.N.c*Math.PI/180);k.push(m.clone())}k=this.si(k);if(0<k.length){for(q=
0;q<k.length;q++)m=k[q],.1>m.z?(e=-c/m.z,g=this.m.width/2+m.x*e,e=this.m.height/2+m.y*e):e=g=0,m.kc=g,m.Hb=e;if(this.Ck(k,a,b))return h}}return null};b.prototype.oh=function(){return document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement&&null!=document.msFullscreenElement||document.fullScreen};b.prototype.Xn=function(a){this.Rl(a);if(this.Uc)this.Uc.onclick();this.Nb=null;if(!this.B.vb){a=a?a:window.event;if(a.which||0==a.which||1==a.which){var b=(new Date).getTime();if(this.vd){this.Nb=
this.vd;this.R.Xa=!0;this.R.startTime=b;a.stopPropagation();return}if(this.rd(a.target)){var c;(c=this.pi(this.ra.x,this.ra.y))&&c.me&&(this.Nb=c);this.Zl(a.pageX,a.pageY);this.R.Xa=!0;this.R.startTime=b;a.preventDefault();this.qa()}}this.Y.ca.x=0;this.Y.ca.y=0}};b.prototype.xf=function(a,b){var c=this.w.xj;c.enabled&&(this.za!=this.sb&&0<=a&&0<=b&&""!=this.za.title?(this.va.innerHTML=this.za.title,this.va.style.color=this.fa(c.yj,c.wj),c.background?this.va.style.backgroundColor=this.fa(c.$b,c.Zb):
this.va.style.backgroundColor="transparent",this.va.style.border="solid "+this.fa(c.cc,c.bc)+" "+c.ki+"px",this.va.style.borderRadius=c.ji+"px",this.va.style.textAlign="center",0<c.width?(this.va.style.left=a-c.width/2+this.margin.left+"px",this.va.style.width=c.width+"px"):(this.va.style.width="auto",this.va.style.left=a-this.va.offsetWidth/2+this.margin.left+"px"),this.va.style.height=0<c.height?c.height+"px":"auto",this.va.style.top=b+25+ +this.margin.top+"px",this.va.style.visibility="inherit",
this.va.style.overflow="hidden"):(this.va.style.visibility="hidden",this.va.innerHTML=""))};b.prototype.Rl=function(a){var b=this.le();this.oh()?(this.ra.x=a.pageX-this.margin.left,this.ra.y=a.pageY-this.margin.top):(this.ra.x=a.pageX-b.x,this.ra.y=a.pageY-b.y);return b};b.prototype.rf=function(a){a&&null!==a&&"object"==typeof a?this.za=a:this.za=this.sb;this.za.Ye&&this.za.Ye();this.hotspot=this.za};b.prototype.Wn=function(a){a=a?a:window.event;var b=this.Rl(a);if(!this.B.vb&&!this.vd){this.o.active&&
(this.o.uh=(new Date).getTime());this.R.Xa&&(a.preventDefault(),(a.which||0==a.which||1==a.which)&&this.Yl(a.pageX,a.pageY),this.qa());var c=!1;if(this.za==this.sb||"poly"==this.za.type){var f=this.sb;0<this.P.length&&this.rd(a.target)&&(f=this.ri(this.ra.x,this.ra.y));this.Lh(f);this.xf(a.pageX-b.x,a.pageY-b.y);0!=f&&(c=!0)}a=null;c||(a=this.pi(this.ra.x,this.ra.y));this.o.Yg&&(this.o.Yg=!1);this.Da.style.cursor=this.za!=this.sb&&this.za.bf&&c||a&&a.Wf?"pointer":"default"}};b.prototype.Lh=function(a){!1===
a&&(a=this.sb);this.za!=a&&(this.za!=this.sb&&(0<this.w.mode&&(this.za.ib=0),this.Ba&&this.Ba.hotspotProxyOut&&this.Ba.hotspotProxyOut(this.za.id)),a!=this.sb?(this.rf(a),this.Ba&&this.Ba.hotspotProxyOver&&this.Ba.hotspotProxyOver(this.za.id),0<this.w.mode&&(this.w.ib=1,this.za.ib=1)):(this.rf(this.sb),0<this.w.mode&&(this.w.ib=0)),this.ia&&this.ia.changeCurrentHotspot(this.za.id))};b.prototype.Vn=function(a){a=a?a:window.event;this.th=-1;if(!this.B.vb&&(this.Nb&&(this.Nb.me(),this.Nb.lb?this.vd=
this.Nb:this.vd=null),this.R.Xa)){this.qa();a.preventDefault();this.R.Xa=!1;a=(new Date).getTime();var b;b=Math.abs(this.Y.start.x-this.Y.da.x)+Math.abs(this.Y.start.y-this.Y.da.y);if(400>a-this.R.startTime&&0<=b&&20>b){var c=this.ri(this.ra.x,this.ra.y);c&&this.Nl(c);b=Math.abs(this.Y.td.x-this.Y.da.x)+Math.abs(this.Y.td.y-this.Y.da.y);700>a-this.dg&&0<=b&&20>b?(c?this.Ol(c):this.B.yi&&this.Vh(),this.dg=0):this.dg=a;this.Y.td.x=this.Y.da.x;this.Y.td.y=this.Y.da.y}}};b.prototype.Zk=function(a){if(!this.B.ad&&
(a=a?a:window.event,this.rd(a.target))){var b=a.detail?-1*a.detail:a.wheelDelta/40;this.B.Hk&&(b=-b);a.axis&&(-1==this.th?this.th=a.axis:this.th!=a.axis&&(b=0));var c=0<b?1:-1;a.wheelDeltaX&&a.wheelDeltaY&&Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)&&(b=0);0!=b&&(this.ni(c*this.B.El,!0),this.update());a.preventDefault();this.qa()}};b.prototype.pp=function(a){a||(a=window.event);var b=a.touches,c=this.le();this.ra.x=b[0].pageX-c.x;this.ra.y=b[0].pageY-c.y;this.Vd=this.Nb=null;this.Fi&&(this.Fi=
!1,this.Sm());if(!this.B.vb){var f=(new Date).getTime();if(this.vd)this.Nb=this.vd,this.R.Xa=!0,this.R.startTime=f,a.preventDefault();else{if(!this.R.Xa&&b[0]){this.R.startTime=f;this.R.start.x=b[0].pageX;this.R.start.y=b[0].pageY;this.R.da.x=b[0].pageX;this.R.da.y=b[0].pageY;this.nc=b[0].target;if(this.rd(a.target)){(f=this.pi(this.ra.x,this.ra.y))&&f.me&&(this.Nb=f);if(f=this.ri(this.ra.x,this.ra.y))this.L(f),this.Vd=f,this.Lh(f),f=this.Qf(a),this.xf(f.x-c.x,f.y-c.y);this.Zl(b[0].pageX,b[0].pageY);
this.R.ek=b[0].identifier;this.R.Xa=!0;a.preventDefault();this.qa()}if(this.nc){c=this.nc;for(f=!1;c&&c!=this.control;){if(c.onmouseover)c.onmouseover();c.onmousedown&&!f&&(c.onmousedown(),f=!0);c=c.parentNode}f&&a.preventDefault()}}1<b.length&&(this.R.Xa=!1);!this.Oi&&2==b.length&&b[0]&&b[1]&&(a=b[0].pageX-b[1].pageX,b=b[0].pageY-b[1].pageY,this.f.Gl=Math.sqrt(a*a+b*b),this.f.hf=this.f.c);this.Y.ca.x=0;this.Y.ca.y=0}}};b.prototype.Sm=function(){this.ai&&this.s.b&&(this.s.$c||this.s.b.play(),this.s.b.muted=
!1);if(this.Ld){var a=this.Ia.createOscillator(),b=this.Ia.createGain();a.frequency.value=30;a.type="sine";a.connect(b);b.connect(this.Ia.destination);b.gain.value=.01;a.start(0);setTimeout(function(){a.stop()},1E4)}for(b=0;b<this.T.length;b++){var c=this.T[b];(!this.Fc(c.id)||c.ja)&&0<=c.loop&&c.autoplay&&(c.ja&&c.Se(),this.ze(c.id,c.loop))}for(b=0;b<this.J.length;b++)c=this.J[b],!this.Fc(c.id)&&c.autoplay&&this.ai&&this.ze(c.id,c.loop)};b.prototype.op=function(a){a||(a=window.event);var b=a.touches,
c=this.le();this.ra.x=b[0].pageX-c.x;this.ra.y=b[0].pageY-c.y;if(!this.B.vb){b[0]&&(this.R.da.x=b[0].pageX,this.R.da.y=b[0].pageY);if(this.R.Xa){a.preventDefault();for(var f=0;f<b.length;f++)if(b[f].identifier==this.R.ek){this.Yl(b[f].pageX,b[f].pageY);break}this.Vd&&(f=this.Qf(a),this.xf(f.x-c.x,f.y-c.y));this.qa()}2==b.length&&b[0]&&b[1]&&(this.R.Xa=!1,this.Oi||(this.B.ad||(c=b[0].pageX-b[1].pageX,b=b[0].pageY-b[1].pageY,this.f.$j=Math.sqrt(c*c+b*b),this.wa.f.active=!0,this.wa.f.ec=this.f.hf*Math.sqrt(this.f.Gl/
this.f.$j),4==this.ya()&&this.wa.f.ec>this.f.max&&(this.wa.f.ec=this.f.max),this.wa.f.ec<this.f.min&&(this.wa.f.ec=this.f.min)),this.qa(),a.preventDefault()))}};b.prototype.np=function(a){var b,c=this.le(),f=!1;if(!this.B.vb){this.R.Xa&&this.qa();var g=(new Date).getTime();b=Math.abs(this.R.start.x-this.R.da.x)+Math.abs(this.R.start.y-this.R.da.y);if(0<=b&&20>b){a.preventDefault();f=!0;if(this.rd(this.nc)&&this.Nb)if(this.Nb.me(),this.Nb.lb)this.vd=this.Nb;else{this.vd=null;return}if(this.nc)for(b=
this.nc;b&&b!=this.control;)b.onclick&&(b.onclick(),f=!1),b=b.parentNode;b=Math.abs(this.R.td.x-this.R.da.x)+Math.abs(this.R.td.y-this.R.da.y);if(700>g-this.dg&&0<=b&&20>b){a.preventDefault();if(this.rd(this.nc))if(this.Vd)this.Ol(this.Vd);else if(this.B.yi){var e=this;setTimeout(function(){e.Vh()},1)}if(this.nc)for(b=this.nc;b&&b!=this.control;)b.ondblclick&&(b.ondblclick(),f=!1),b=b.parentNode;this.dg=0}else this.dg=g;this.R.td.x=this.R.da.x;this.R.td.y=this.R.da.y}if(this.nc)for(a.preventDefault(),
b=this.nc;b&&b!=this.control;){if(b.onmouseout)b.onmouseout();if(b.onmouseup)b.onmouseup();b=b.parentNode}a=this.Qf(a);this.xf(a.x-c.x,a.y-c.y);this.Vd&&f&&this.Nl(this.Vd);this.nc=null;this.R.Xa=!1;this.Lh(this.sb);this.Vd=null}};b.prototype.mp=function(a){var b=this.le();this.B.vb||(this.R.Xa=!1);this.Vd=null;this.Lh(this.sb);a=this.Qf(a);this.xf(a.x-b.x,a.y-b.y)};b.prototype.Pn=function(){return null!=this.nc||this.R.Xa};b.prototype.$k=function(a){!this.ve&&window.MSGesture&&(this.L("setup gesture"),
this.ve=new MSGesture,this.ve.target=this.control);this.ve&&this.ve.addPointer(a.pointerId)};b.prototype.nk=function(a){this.Oi=!0;this.Ah=1;this.B.vb||this.B.ad||(a.touches?(this.nc=a.touches.target,this.rd(a.target)&&(a.preventDefault(),this.f.hf=this.f.c,this.qa())):(a.preventDefault(),this.f.hf=this.f.c,this.qa()))};b.prototype.Um=function(a){this.B.vb||this.B.ad||!this.rd(a.target)||(a.preventDefault(),this.wa.f.active=!0,this.wa.f.ec=this.f.hf/Math.sqrt(a.scale),4==this.ya()&&this.wa.f.ec>this.f.max&&
(this.wa.f.ec=this.f.max),this.update(),this.qa())};b.prototype.$n=function(a){this.B.vb||this.B.ad||(a.preventDefault(),1!=a.scale&&(this.wa.f.active=!0,this.Ah*=a.scale,this.wa.f.ec=this.f.hf/Math.sqrt(this.Ah),4==this.ya()&&this.wa.f.ec>this.f.max&&(this.wa.f.ec=this.f.max),this.update(),this.qa()))};b.prototype.mk=function(a){this.B.vb||this.B.ad||(this.wa.f.active=!1,a.preventDefault(),this.qa(),this.ve&&this.ve.reset&&this.ve.reset())};b.prototype.Qn=function(a){this.B.qe||(this.isFullscreen&&
a.preventDefault(),this.cg=a.keyCode,this.qa())};b.prototype.Rn=function(a){this.cg&&(this.cg=0,a.preventDefault(),this.qa())};b.prototype.fo=function(){this.cg=0};b.prototype.Dh=function(){this.isFullscreen&&(this.oh()||this.exitFullscreen(),this.oh()&&(this.U.style.left="0px",this.U.style.top="0px"))};b.prototype.bj=function(a,b,c,f){f?(this.Uf.alpha=a,this.Uf.beta=b,this.Uf.gamma=c,this.Uf.gamma+=90):(this.oe.alpha=a,this.oe.beta=b,this.oe.gamma=c,this.oe.gamma+=90);this.oe.orientation=window.orientation?
1*parseInt(""+window.orientation,10):0;a=new p.cl;b=this.oe;a.Be(-b.alpha);a.Ce(-b.beta);a.yd(-b.gamma);a.Ce(90-b.orientation);1>a.yb?-1<a.yb?(c=180/Math.PI*Math.asin(-a.yb),b=180/Math.PI*Math.atan2(a.Tb,a.Sb),a=180/Math.PI*Math.atan2(a.Rb,a.Qb)):(c=0,b=90,a=-180/Math.PI*Math.atan2(-a.Eb,a.Fb)):(c=0,b=-90,a=180/Math.PI*Math.atan2(-a.Eb,a.Fb));this.yf&&(this.ug(-a),this.xg(b),this.xl(c))};b.prototype.Nl=function(a){this.Ba&&this.Ba.hotspotProxyClick&&this.Ba.hotspotProxyClick(a.id);""!=a.url&&(this.cj(a.url,
a.target),this.xf(-1,-1))};b.prototype.Ol=function(a){this.Ba&&this.Ba.hotspotProxyDoubleClick&&this.Ba.hotspotProxyDoubleClick(a.id)};b.prototype.fh=function(){return Math.min(1,2*Math.tan(Math.PI*Math.min(this.f.c,90)/360))};b.prototype.fl=function(){var a=this;setTimeout(function(){a.fl()},100);9!=a.Hh||a.nh||window.requestAnimationFrame(function(){a.ng();a.Hc("restart recover timer")});10<a.Hh&&1<a.ij&&(a.Hc("recover timer - disabling requestAnimationFrame"),a.nh=!0,a.ng());a.Hh++};b.prototype.yl=
function(a){var b={Jp:{value:0,name:"pan"},Kp:{value:1,name:"tilt"},Hp:{value:2,name:"fov"}},c=0,f=0,g=0,e;for(e in b){var h=b[e],k;for(k=Math.floor(a);!this.$e(k,h.value)&&0<k;)k--;var m=this.$e(k,h.value),q=this.nn(m);if(q){k=new p.oc(m.time,m.value);var w=new p.oc(q.time,q.value),r=(a-m.time)/(q.time-m.time);if(0!=m.type||0!=q.type&&3!=q.type)if(3==m.type)k=m.value;else{var r=new p.oc,u=new p.oc,t=q.time-m.time;0==m.type?u.$a(m.time+.3*t,m.value):u.$a(m.ae,m.be);0==q.type||3==q.type?r.$a(q.time-
.3*t,q.value):r.$a(q.$d,q.Nc);m=new p.oc;m.ii(k,w,u,r,a);k=m.y}else m=new p.oc,m.pd(k,w,r),k=m.y}else k=m.value;switch(h.value){case 0:h=this.pan.c;if(this.Ed){if(2!=this.fb){for(;360<k;)k-=360;for(;-360>k;)k+=360}c=k-h;2!=this.fb&&(180<c&&(c-=360),-180>c&&(c+=360));this.pan.c=this.pan.c+c*this.hd}else this.pan.c=k;break;case 1:h=this.i.c;this.Ed?(f=k-h,this.i.c=this.i.c+f*this.hd):this.i.c=k;break;case 2:h=this.f.c,this.Ed?(g=k-h,this.f.c=this.f.c+g*this.hd):this.f.c=k}}b=this.ya();for(e=Math.floor(a);!this.$e(e,
3)&&0<e;)e--;e=this.$e(e,3);h=a-e.time;this.Ed&&-1!=this.Df&&this.Rg+this.fi>a?(b=this.Pf(this.Df),this.f.c>b?this.Rg=a:(h=(a-this.Rg)/this.fi,h=Math.min(1,h),this.cd(this.La,this.Df,1-h))):0==e.qb||h>e.qb-.3?this.cd(e.value):(h/=e.qb,this.cd(b,e.value,1-h));this.Ed&&(c=Math.sqrt(c*c+f*f+g*g),.3>c&&(this.Ed=!1,this.hd=.02,this.Cf=0),0<this.Cf&&c>this.Cf&&(this.hd+=.01,this.hd=Math.min(this.hd,1)),this.Cf=c);e=Math.floor(a);if(e!=this.Nj)for(this.Nj=e,a=this.Vm(e),c=0;c<a.length;c++)f=a[c],g=f.Qg,
this.dd.hasOwnProperty(g)&&(0==this.dd[g]?this.Mh(g,f.Fj):1==this.dd[g]?this.Mh(g,f.value):2==this.dd[g]&&this.Mh(g,"true"==f.Fj));this.update()};b.prototype.mo=function(a){var b,c=this.u.speed;this.u.Si&&(c=c*(a.getTime()-this.u.Si)/60,5<c&&(c=5),.2>c&&(c=.2));this.u.Si=a.getTime();this.o.eh&&(this.ma.ready()||4==this.La)&&this.hh()&&(this.o.eh=!1,this.o.active=!0,this.tb.zd=!0,this.tb.Ei=!1);if(this.u.active||0!=this.u.Ab&&this.ma.ready()){if(this.u.Cj&&"__AutoMove"==this.A.Ua)if(b=a.getTime()-
this.u.Mj,c=b/100,c>=this.A.length){if(this.ua.splice(this.ua.indexOf(this.A),1),this.u.active=!1,this.A=this.u.Lj,this.u.Ab=0,b=this.o.Xb,this.vg(this.u.pan,this.u.i,this.u.f),this.u.kg&&(this.u.kg=!1,this.o.yh=!0,this.o.active=!0,this.ha("autorotatechanged",{}),this.o.Xb=b),this.onMoveComplete)this.onMoveComplete()}else this.yl(c);else{this.pan.d=this.u.pan-this.pan.c;if(360==this.pan.max-this.pan.min){for(;-180>this.pan.d;)this.pan.d+=360;for(;180<this.pan.d;)this.pan.d-=360}this.i.d=this.u.i-
this.i.c;this.N.d=this.u.N-this.N.c;this.f.d=this.u.f-this.f.c;b=c*this.fh();var f=Math.sqrt(this.pan.d*this.pan.d+this.i.d*this.i.d+this.N.d*this.N.d+this.f.d*this.f.d),g=this.pan.c-this.u.Sk,e=this.i.c-this.u.Uk,h=this.N.c-this.u.Tk,k=this.f.c-this.u.Rk;100*Math.sqrt(g*g+e*e+h*h+k*k)<b&&0==this.u.Ab&&(this.u.Le=!0);this.u.Sk=this.pan.c;this.u.Uk=this.i.c;this.u.Tk=this.N.c;this.u.Rk=this.f.c;if(100*f<b||this.u.Le){if(this.pan.d=0,this.i.d=0,this.N.d=0,this.f.d=0,this.u.active&&(this.u.active=!1,
this.pan.c=this.u.pan,this.i.c=this.u.i,this.N.c=this.u.N,this.f.c=this.u.f,this.onMoveComplete))this.onMoveComplete()}else f=f>5*b?b/f:.2,this.pan.d*=f,this.i.d*=f,this.f.d*=f;this.pan.c+=this.pan.d;this.i.c+=this.i.d;this.N.c+=this.N.d;this.f.c+=this.f.d;0!=this.u.Ab&&(this.u.Ab!=this.La?(c=this.Pf(this.u.Ab),this.Of()>c?(this.f.c+=-Math.max((2.5-1.7*Math.min(Math.sqrt(this.pan.d*this.pan.d+this.i.d*this.i.d+this.N.d*this.N.d)/b,1))*b,this.f.d)-this.f.d,this.u.f=this.f.c):(this.jc=this.La,this.La=
this.u.Ab,this.L("New projection from Target:"+this.La),this.mg=this.u.pg=0,this.ma.lh())):1>this.u.pg?(this.u.pg=Math.min(1,this.u.pg+.05*c),this.mg=this.u.pg):(this.jc=0,this.u.Ab=0,this.ma.lh()))}this.ef=a.getTime();this.update()}else if(this.o.active){b=a.getTime()-this.o.startTime;this.o.uh<this.o.startTime&&(this.o.uh=this.o.startTime);if((this.o.Dj||this.o.Xb||this.tb.zd)&&0<this.ua.length){c=b/100;f=!1;if(this.zb!=this.A.Ua||""!=this.A.Oe&&this.Hd!=this.A.Oe){for(b=0;b<this.ua.length;b++)if(""==
this.zb&&this.ua[b].Oe==this.Hd||""!=this.zb&&this.ua[b].Ua==this.zb&&this.ua[b].Oe==this.Hd){f=!0;this.A=this.ua[b];this.zb=this.A.Ua;break}!f&&0<this.ua.length&&this.ua[0].Oe==this.Hd&&(f=!0,this.A=this.ua[0],this.zb=this.A.Ua)}else f=!0;if(f)if(b=(g=this.s.b&&this.s.$c)&&this.o.vj&&!this.tb.zd,this.Ne){f=c;if(b)for(this.s.b.currentTime<this.Oj&&this.hi&&(this.gi++,this.hi=!1),f=10*(this.gi*this.s.b.duration+this.s.b.currentTime),this.Oj=this.s.b.currentTime,.05>this.s.b.duration-this.s.b.currentTime&&
(this.hi=!0);f>=10*this.Me;)f-=10*this.Me;if(!g&&c>=this.A.length||g&&!b&&c>=this.A.length||g&&b&&(this.A.Ua!=this.A.al||this.A.Bh!=this.kb)&&c>=this.A.length){this.Ne=!1;if(this.tb.zd){this.tb.zd=!1;this.tb.Ei=!0;this.o.active=this.C.Zd;this.ua.splice(this.ua.indexOf(this.A),1);0<this.ua.length&&(this.A=this.ua[0]);this.zb="";this.sg(this.C.xh);this.tg(this.C.bi);this.rg(this.C.rh);this.C.Zd=!1;this.ef=a.getTime();return}this.zb=this.A.al;if(this.zb==this.A.Ua&&this.kb==this.A.Bh){if(1<this.Na.length&&
0<this.o.Ch){if(this.o.$i){b=1E3;do c=this.Na[Math.floor(Math.random()*this.Na.length)];while(b--&&c==this.kb)}else c=this.rk();this.we("{"+c+"}");this.o.startTime=a.getTime();this.Ne=!1;this.o.active=!0;this.C.Zd=!0}}else this.df&&this.A.Bh!=this.kb&&(b=this.o.Xb,this.we("{"+this.A.Bh+"}"),this.o.Xb=b,this.C.enabled?(this.o.active=!1,this.C.Zd=!0):(this.zb==this.A.Ua&&(b=this.A.X,this.vg(b[0].value,b[1].value,b[2].value)),this.o.active=!0)),this.o.startTime=a.getTime()}else this.yl(f)}else if(c=
this.A.X[0],f=this.A.X[1],g=this.A.X[2],e=this.A.X[3],3!=e.ob&&(e=0),this.o.yh||this.u.Le||this.tb.zd||b){if(this.Ne=!0,this.o.startTime=a.getTime(),this.Ed=b){for(this.Me=this.gi=0;this.Me<this.A.length/10;)this.Me+=this.s.b.duration;f=10*this.s.b.currentTime;for(b=Math.floor(f);!this.$e(b,3)&&0<b;)b--;b=this.$e(b,3);b.value==this.La?this.Df=-1:(this.Df=b.value,this.Rg=f,this.fi=Math.max(5,b.time+b.qb-f))}}else{b=this.o.Xb;h={};for(h.pan=c.value;360<h.pan;)h.pan-=360;for(;-360>h.pan;)h.pan+=360;
h.tilt=f.value;h.fov=g.value;h.projection=e?e.value:4;h.timingFunction=3;h.speed=1;this.u.kg=!0;this.zh(h);this.o.active=!0;this.o.Xb=b}}else if(0<this.o.Ch&&this.df&&b>=1E3*this.o.Ch){if(1<this.Na.length){if(this.o.$i){b=1E3;do c=this.Na[Math.floor(Math.random()*this.Na.length)];while(b--&&c==this.kb)}else b=this.Na.indexOf(this.kb),b++,b>=this.Na.length&&(b=0),c=this.Na[b];this.o.startTime=a.getTime();this.o.sd=a.getTime();this.o.timeout=0;this.we("{"+c+"}");this.o.active=!0;this.C.Zd=!0}}else b=
a.getTime(),f=c=1E3/60,0!=this.o.sd&&(f=b-this.o.sd),this.i.d=this.o.Th*(0-this.i.c)/100,this.f.d=this.o.Th*(this.f.Ra-this.f.c)/100,this.pan.d=.95*this.pan.d+-this.o.speed*this.fh()*.05,c=f/c,this.pan.c+=this.pan.d*c,this.i.c+=this.i.d*c,this.f.c+=this.f.d*c,this.o.sd=b,this.update();3E3<a.getTime()-this.o.uh&&!this.o.Yg&&(this.Da.style.cursor="none",this.o.Yg=!0)}else!this.tb.Ei&&1E3<a.getTime()-this.ef&&(this.ua.splice(this.ua.indexOf(this.A),1),this.A=this.Nf(!1),this.zb=this.A.Ua,this.o.active=
!1,this.o.eh=!0),this.o.enabled&&!this.R.Xa&&a.getTime()-this.ef>1E3*this.o.timeout&&(this.o.Dg&&this.hh()||!this.o.Dg)&&(this.o.active=!0,this.Hd=this.o.Sg,this.o.startTime=a.getTime(),this.o.sd=0,this.ha("autorotatechanged",{}),this.pan.d=0,this.i.d=0,this.f.d=0),!this.wa.enabled||0!=this.cg||this.R.Xa||0==this.pan.d&&0==this.i.d&&0==this.f.d||(this.pan.d*=.9,this.i.d*=.9,this.f.d*=.9,this.pan.c+=this.pan.d,this.i.c+=this.i.d,this.ni(this.f.d),1E-4>this.pan.d*this.pan.d+this.i.d*this.i.d+this.f.d*
this.f.d&&(this.pan.d=0,this.i.d=0,this.f.d=0),this.update())};b.prototype.oo=function(a){var b=this.C;if(b.Dd){var c=a.getTime()-b.cm,c=c/(1E3*b.bm);if(1<=c){b.Dd=!1;for(c=0;c<this.Fa.Gg.length;c++)this.Fa.Ci(this.Fa.Gg[c]);b.sj=a.getTime();this.Il();b.He=!0;0==b.Yb||b.Bf||(4==b.Yb?(this.A=this.Nf(!0,b.De,b.Ee,b.Cd),this.zb=this.A.Ua,this.o.active=!0,this.tb.zd=!0):this.moveTo(b.De,b.Ee,b.Cd,b.Xd,0,b.ed))}else b.el(c)}else b.He&&(c=a.getTime()-b.sj,c/=1E3*b.Ff,1<=c?(b.He=!1,this.ef=a.getTime(),this.update(),
0!=b.Yb&&b.Bf&&(4==b.Yb?(this.A=this.Nf(!0,b.De,b.Ee,b.Cd),this.zb=this.A.Ua,this.o.active=!0,this.tb.zd=!0):this.moveTo(b.De,b.Ee,b.Cd,b.Xd,0,b.ed)),4!=b.Yb&&(this.sg(b.xh),this.tg(b.bi),this.rg(b.rh),this.o.active=b.Zd,b.Zd=!1),this.o.sd=0,this.ga&&this.ti(),this.Tg=!1):b.el(c));b=this.ho;b.um&&(b.$g?a.getTime()-b.Ai>=1E3*b.Mm&&(b.$g=!1):(b.current+=b.Oc,0>b.current&&(b.current=0,b.Oc=-b.Oc,b.$g=!0,b.Ai=a.getTime()),1<b.current&&(b.current=1,b.Oc=-b.Oc,b.$g=!0,b.Ai=a.getTime())))};b.prototype.ro=
function(){var a,b=this.w;if(0<b.hb.length){for(a=0;a<b.hb.length;a++)b.Jc[a]!=b.Jb[a]&&(b.Jc[a]>b.Jb[a]?(b.Jb[a]+=.05,b.Jc[a]<b.Jb[a]&&(b.Jb[a]=b.Jc[a])):(b.Jb[a]-=.05,b.Jc[a]>b.Jb[a]&&(b.Jb[a]=b.Jc[a],-1!=b.Nh.indexOf(b.hb[a])&&(b.Nh.splice(b.Nh.indexOf(b.hb[a]),1),b.hb.splice(a,1),b.Jc.splice(a,1),b.Jb.splice(a,1)))));this.update()}if(2==b.mode)for(a=0;a<this.P.length;a++){var c=this.P[a];"poly"==c.type&&c.ib!=c.oa&&(c.ib>c.oa?(c.oa+=b.Oc,c.ib<c.oa&&(c.oa=c.ib)):(c.oa-=b.Oc,c.ib>c.oa&&(c.oa=c.ib)),
this.update())}3==b.mode&&b.ib!=b.oa&&(b.ib>b.oa?(b.oa+=b.Oc,b.ib<b.oa&&(b.oa=b.ib)):(b.oa-=b.Oc,b.ib>b.oa&&(b.oa=b.ib)),this.update())};b.prototype.qo=function(){var a=this.wa;this.R.Xa&&(this.B.qd?(a.ca.x=.4*(this.Y.da.x-a.da.x),a.ca.y=.4*(this.Y.da.y-a.da.y),a.da.x+=a.ca.x,a.da.y+=a.ca.y):(a.ca.x=.1*-this.Y.ca.x*this.B.sensitivity/8,a.ca.y=.1*-this.Y.ca.y*this.B.sensitivity/8),this.Xl(a.ca.x,a.ca.y),this.update());a.f.active&&(this.Rj(.4*(a.f.ec-this.f.c)),.001>Math.abs(a.f.ec-this.f.c)/this.f.c&&
(a.f.active=!1),this.update());if(a.enabled&&(0!=a.ca.x||0!=a.ca.y)&&!this.R.Xa){var b=.9*(1-a.mj);a.ca.x=b*a.ca.x;a.ca.y=b*a.ca.y;.01>a.ca.x*a.ca.x+a.ca.y*a.ca.y?(a.ca.x=0,a.ca.y=0):(this.Xl(a.ca.x,a.ca.y),this.update())}};b.prototype.no=function(){if(this.B.sl&&this.B.qd){var a=new e;a.pan=this.pan.c;a.i=this.i.c;a.f=this.f.c;this.Ue(a);this.Ue(a);this.Ue(a);var b=a.pan-this.pan.c,c=a.i-this.i.c,a=a.f-this.f.c;if(0!=b||0!=c||0!=a){var f;f=.2+.9*Math.min((Math.abs(b)+Math.abs(c)+Math.abs(a))/Math.abs(Math.min(this.f.c,
90))*.3,1);this.pan.c+=b*f;this.i.c+=c*f;this.f.c+=a*f;this.wa.mj=.3;this.update()}else this.wa.mj=0}else this.Ug();if(2!=this.fb){for(;360<this.pan.c;)this.pan.c-=360;for(;-360>this.pan.c;)this.pan.c+=360}};b.prototype.po=function(){if(!this.hh()&&this.Xf&&5<this.h.pl){var a,b=0,c=this.Lb.length;if(this.Jg)c=50,this.Bi<c&&this.Bi++,b=this.Bi;else for(a=0;a<c;a++)(this.Lb[a].complete&&this.Lb[a].src!=this.ck||""==this.Lb[a].src)&&b++;b==c?(this.Fh=1,this.isLoaded=!0,this.O&&this.O.ggLoaded&&this.O.ggLoaded(),
this.ha("imagesready",{}),this.o.Dg&&this.o.enabled&&!this.u.active&&!this.C.Dd&&(this.o.active=!0,this.o.startTime=(new Date).getTime(),this.o.sd=0)):this.Fh=b/(1*c)}};b.prototype.ng=function(){var a=this;a.Kh||(a.nh?setTimeout(function(){a.Kh=!1;a.ng()},1E3/60):window.requestAnimationFrame(function(){a.Kh=!1;a.ng()}));a.Kh=!0;this.ij=this.Hh=0;var b=new Date;this.gh++;120<=this.gh&&(this.L("F/s: "+Math.round(1E3*this.gh/(b.getTime()-this.Ok))),this.Ok=b.getTime(),this.gh=0);this.ha("timer",{});
this.Z&&this.ma.Lm();this.Cb&&""!==this.ie&&!this.ia&&document.hasOwnProperty(this.ie)&&document[this.ie].setPan&&0==this.Rm--&&(this.ia=document[this.ie],this.Kc=this.Z=!1,this.ta&&(this.ta.style.visibility="hidden"),this.ia.setLocked(!0),this.ia.setSlaveMode(!0),this.ia.readConfigString(this.wi),this.Hc("Flash player '"+this.ie+"' connected."));this.Bj&&(this.gd(),this.Bj=!1);this.qo();this.po();this.mo(b);this.no();this.oo(b);this.ma.wp();(0<=this.w.mode||0<this.w.hb.length)&&this.ro();this.Zh();
if(this.ff.pan!=this.pan.c||this.ff.i!=this.i.c||this.ff.f!=this.f.c)this.ff.pan=this.pan.c,this.ff.i=this.i.c,this.ff.f=this.f.c,this.ha("positionchanged",{});this.Pk!=this.La&&(this.Pk=this.La,this.ha("projectionchanged",{}));this.Ca&&(0<this.Kf?this.Kf--:(this.Ca=!1,this.Kf=0),this.C.He||this.C.Dd||this.Ig(),this.ha("repaint",{}))};b.prototype.Pf=function(a){switch(a){case 4:a=Math.min(110,this.f.max);break;case 12:a=Math.min(270,this.f.Yi);a=Math.min(360*this.Yd(),a);a=Math.min(360/this.Yd(),
a);break;case 9:a=Math.min(270,this.f.Zi);break;default:a=90}return a};b.prototype.Tl=function(){var a=this;setTimeout(function(){a.sf(!1)},10);setTimeout(function(){a.sf(!1)},100)};b.prototype.Zh=function(){this.vi.fk(this.pan.c,this.i.c);for(var a=0;a<this.T.length+this.J.length;a++){var b;if(a<this.T.length)b=this.T[a];else if(b=this.J[a-this.T.length],b.bd)continue;b.Zh()}};b.a=function(a){var b="",c,f,g,e,h,k=0;a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),
f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),c=c<<2|f>>4,f=(f&15)<<4|e>>2,g=(e&3)<<6|h,b+=String.fromCharCode(c),64!=e&&(b+=String.fromCharCode(f)),64!=h&&(b+=String.fromCharCode(g));while(k<a.length);return b};b.prototype.Xo=function(a,d){var c,f,g=this;if(0!=g.ig.length||
!g.B.Yf||g.B.Jf||g.B.Vg)if(g.Uc)g.Uc=null,g.U.removeChild(g.Uc);else{g.Uc=document.createElement("div");var e=g.Uc;c="left: "+a+"px;"+("top:\t "+d+"px;")+"z-index: 32000;";c+="position:relative;";c+="display: table;";c+="background-color: white;";c+="border: 1px solid lightgray;";c+="box-shadow: 1px 1px 3px #333;";c+="font-family: Verdana, Arial, Helvetica, sans-serif;";c+="font-size: 9pt;";c+="opacity : 0.95;";e.setAttribute("style",c);e.setAttribute("class","gg_contextmenu");c=document.createElement("style");
f=document.createTextNode(".gg_context_row:hover { background-color: #3399FF }");c.type="text/css";c.styleSheet?c.styleSheet.cssText=f.nodeValue:c.appendChild(f);e.appendChild(c);for(f=0;f<g.ig.length;f++){var h=g.ig[f],k=document.createElement("div");c="text-align: left;";c+="margin: 0;";c+="padding: 5px 20px;";c+="vertical-align: left;";k.setAttribute("style",c);k.setAttribute("class","gg_context_row");c=document.createElement("a");c.href=h.url;c.target="_blank";c.innerHTML=h.text;c.setAttribute("style",
"color: black; text-decoration: none;");k.appendChild(c);e.appendChild(k)}0<g.ig.length&&(!g.B.Yf||g.B.Jf||g.B.Vg)&&e.appendChild(document.createElement("hr"));if(g.B.Vg&&g.Z){h=[];h.push({text:"Rectilinear Projection",og:4});h.push({text:"Stereographic Projection",og:9});h.push({text:"Fisheye Projection",og:12});for(f=0;f<h.length;f++){var k=h[f],m=document.createElement("div");m.setAttribute("class","gg_context_row");c="text-align: left;";c+="margin: 0;";c=g.La==k.og?c+"padding: 5px 20px 5px 7px;":
c+"padding: 5px 20px;";c+="vertical-align: left;";c+="cursor: pointer;";m.setAttribute("style",c);m.onclick=function(a){return function(){g.oi(a,1);g.update()}}(k.og);g.La==k.og?m.innerHTML="&#10687; "+k.text:m.innerHTML=k.text;e.appendChild(m)}g.B.Yf&&!g.B.Jf||e.appendChild(document.createElement("hr"))}g.B.Jf&&(f=document.createElement("div"),f.setAttribute("class","gg_context_row"),c="text-align: left;margin: 0;padding: 5px 20px;",c+="vertical-align: left;",c+="cursor: pointer;",f.setAttribute("style",
c),f.onclick=function(){g.Vh()},f.innerHTML=g.oh()?"Exit Fullscreen":"Enter Fullscreen",e.appendChild(f));c="<<L>>"+String(g.Ja);c=c.toUpperCase();g.B.Yf&&"U"==c.charAt(2)||(f=document.createElement("div"),c="text-align: left;margin: 0;padding: 5px 20px;",c+="vertical-align: left;",f.setAttribute("style",c),f.setAttribute("class","gg_context_row"),c=document.createElement("a"),c.href=b.a("aHR0cDovL3Bhbm8ydnIuY29tLw=="),c.target="_blank",c.innerHTML=b.a("Q3JlYXRlZCB3aXRoIFBhbm8yVlI="),c.setAttribute("style",
"color: black; text-decoration: none;"),f.appendChild(c),e.appendChild(f));g.U.insertBefore(g.Uc,g.U.firstChild);e.onclick=function(){g.Uc&&(g.U.removeChild(g.Uc),g.Uc=null)};e.oncontextmenu=e.onclick}};b.prototype.tm=function(){var a=this,b;b=a.Da;a.control=b;a.control=b;a.Tl();setTimeout(function(){a.ng()},10);setTimeout(function(){a.fl()},200);setTimeout(function(){a.Je();a.Ig()},10);b.addEventListener&&(b.addEventListener("touchstart",function(b){a.pp(b)},!1),b.addEventListener("touchmove",function(b){a.op(b)},
!1),b.addEventListener("touchend",function(b){a.np(b)},!1),b.addEventListener("touchcancel",function(b){a.mp(b)},!1),b.addEventListener("pointerdown",function(b){a.$k(b)},!1),b.addEventListener("MSPointerDown",function(b){a.$k(b)},!1),b.addEventListener("MSGestureStart",function(b){a.nk(b)},!1),b.addEventListener("MSGestureEnd",function(b){a.mk(b)},!1),b.addEventListener("MSGestureChange",function(b){a.$n(b)},!1),b.addEventListener("gesturestart",function(b){a.nk(b)},!1),b.addEventListener("gesturechange",
function(b){a.Um(b)},!1),b.addEventListener("gestureend",function(b){a.mk(b)},!1),b.addEventListener("mousedown",function(b){a.Xn(b)},!1),b.addEventListener("mousemove",function(b){a.Wn(b)},!1),document.addEventListener("mouseup",function(b){a.Vn(b)},!1),b.addEventListener("mousewheel",function(b){a.Zk(b)},!1),b.addEventListener("DOMMouseScroll",function(b){a.Zk(b)},!1),document.addEventListener("keydown",function(b){a.Qn(b)},!1),document.addEventListener("keyup",function(b){a.Rn(b)},!1),window.addEventListener("orientationchange",
function(){a.Tl()},!1),window.addEventListener("resize",function(){a.Je()},!1),window.addEventListener("blur",function(){a.fo()},!1),a.U.addEventListener("webkitfullscreenchange",function(){a.Dh()},!1),document.addEventListener("mozfullscreenchange",function(){a.Dh()},!1),window.addEventListener("webkitfullscreenchange",function(){a.Dh()},!1),document.addEventListener("MSFullscreenChange",function(){a.Dh()},!1));b.oncontextmenu=function(b){void 0===b&&(b=window.event);if(b.target&&!a.rd(b.target))return!0;
if(!b.ctrlKey){b=a.Qf(b);var d=a.le();a.Xo(b.x-d.x,b.y-d.y);return!1}return!0};window.addEventListener("deviceorientation",function(b){b.webkitCompassHeading?(a.bj(b.alpha,b.beta,b.gamma,!1),a.bj(b.webkitCompassHeading,b.beta,b.gamma,!0)):a.bj(b.alpha,b.beta,b.gamma,b.absolute)});window.addEventListener("deviceorientationabsolute",function(){})};b.prototype.Kj=function(){for(var a=0;a<this.P.length;a++)if("point"==this.P[a].type&&(this.Ba&&this.Ba.addSkinHotspot?(this.P[a].Ye(),this.P[a].b=new this.Ba.addSkinHotspot(this.P[a])):
this.P[a].b=new p.dm(this,this.P[a]),this.P[a].b.__div.style.left="-1000px",this.P[a].b.__div.style.top="-1000px",this.P[a].b&&this.P[a].b.__div)){var b=this.Da.firstChild;b?this.Da.insertBefore(this.P[a].b.__div,b):this.Da.appendChild(this.P[a].b.__div)}};b.prototype.am=function(){var a,b=document.createElement("fakeelement"),c={OTransition:"oTransitionEnd",MSTransition:"msTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",transition:"transitionEnd"};for(a in c)if(void 0!==
b.style[a])return c[a]};b.prototype.Ob=function(a){var b=[];"#"==a.substr(0,1)&&(a=a.substr(1));a=new RegExp(a,"");for(var c=0;c<this.T.length;c++)a.test(this.T[c].id)&&b.push(this.T[c]);for(c=0;c<this.J.length;c++)a.test(this.J[c].id)&&b.push(this.J[c]);for(c=0;c<this.Za.length;c++)a.test(this.Za[c].id)&&b.push(this.Za[c]);return b};b.prototype.mn=function(a){if("_videopanorama"==a)return this.s.b;a=this.Ob(a);return 0<a.length?a[0].b:null};b.prototype.kl=function(a,b){var c=this;b.addEventListener("ended",
function(a){c.ha("videoended",{video:a.target})});b.addEventListener("pause",function(a){c.ha("videopaused",{video:a.target})});b.addEventListener("play",function(a){c.ha("videostarted",{video:a.target})});for(var f=0;f<this.J.length;f++)if(this.J[f].id==a)return this.J[f].b=b,this.J[f];f=new p.Ij(this);f.registerElement(a,b);return f};b.prototype.Fc=function(a){if(this.Cb){var b=this.ia;if(b)return b.isPlaying(a)}else{if("_main"===a)return!0;a=this.Ob(a);if(0<a.length)return a[0].ja?a[0].Ae:!a[0].b.ended&&
!a[0].b.paused}return!1};b.prototype.ze=function(a,b){if(this.Cb){var c=this.ia;c&&c.playSound(a,b)}else try{for(var c=this.Ob(a),f=0;f<c.length;f++){var g=c[f];g.Sc=b&&!isNaN(Number(b))?Number(b)-1:g.loop-1;-1==g.Sc&&(g.Sc=1E7);this.L(g.b);this.Fc(a)&&this.uj(a);g.ja?g.Pc():g.b.play()}}catch(e){this.L(e)}};b.prototype.gl=function(a,b){for(var c=this.Ob(a),f=0;f<c.length;f++){var g=c[f];this.Fc(g.id)?this.dj(g.id):this.ze(g.id,b)}};b.prototype.so=function(a,b){for(var c=this.Ob(a),f=0;f<c.length;f++){var g=
c[f];this.Fc(g.id)?this.uj(g.id):this.ze(g.id,b)}};b.prototype.dj=function(a){if(this.Cb){var b=this.ia;b&&b.pauseSound(a)}else try{if("_main"==a){for(b=0;b<this.T.length;b++)this.T[b].ja?this.T[b].li():this.T[b].b.pause();for(b=0;b<this.J.length;b++)this.J[b].b.pause()}else for(var c=this.Ob(a),b=0;b<c.length;b++){var f=c[b];f.ja?f.li():f.b.pause()}}catch(g){this.L(g)}};b.prototype.nm=function(a,b){for(var c=this.Ob(a),f=0;f<c.length;f++){var g=c[f];0==b||1==b?g.Sf&&g.Sf(1==b):2==b&&g.me&&g.me()}};
b.prototype.uj=function(a){var b;if(this.Cb)(b=this.ia)&&b.stopSound(a);else try{if("_main"===a){for(b=0;b<this.T.length;b++)this.T[b].ja?this.T[b].Se():(this.T[b].b.pause(),this.T[b].b.currentTime=0);for(b=0;b<this.J.length;b++)this.J[b].b.pause(),this.J[b].b.currentTime=0}else{var c=this.Ob(a);for(b=0;b<c.length;b++){var f=c[b];f.ja?f.Se():f.b&&f.b.pause&&(f.b.pause(),f.b.currentTime=0,this.$f&&(f.xd(),f.addElement()))}}}catch(g){this.L(g)}};b.prototype.Zo=function(a){a=this.Ob(a);return 0<a.length?
(a=a[0],a.ja?a.wm():a.b?a.b.currentTime:0):0};b.prototype.$o=function(a,b){var c=this.Ob(a);0<c.length&&(c=c[0],c.ja?(0>b&&(b=0),b>c.Ef.duration&&(b=c.Ef.duration-.1),c.xm(b)):c.b&&(0>b&&(b=0),b>c.b.duration&&(b=c.b.duration-.1),c.b.currentTime=b))};b.prototype.Uo=function(a,b){if(this.Cb){var c=this.ia;c&&c.setVolume(a,b)}else try{var f=Number(b);1<f&&(f=1);0>f&&(f=0);"_videopanorama"===a&&this.s.b&&(this.s.b.volume=f);if("_main"===a){this.W=f;for(c=0;c<this.T.length;c++)this.T[c].b.volume=this.T[c].level*
this.W;for(c=0;c<this.J.length;c++)this.J[c].b.volume=this.J[c].level*this.W;this.s.b&&(this.s.b.volume=this.W)}else{var g=this.Ob(a);this.L(g);for(c=0;c<g.length;c++){var e=g[c];e.b&&null!=e.b.volume&&(e.b.volume=f*this.W);e.level=f}}}catch(h){this.L(h)}};b.prototype.Em=function(a,b){if(this.Cb){var c=this.ia;c&&c.changeVolume(a,b)}else try{var f;"_videopanorama"===a&&this.s.b&&(this.s.b.volume=this.s.b.volume+Number(b));if("_main"===a){c=this.W;c+=Number(b);1<c&&(c=1);0>c&&(c=0);this.W=c;for(f=
0;f<this.T.length;f++)this.T[f].b.volume=this.T[f].level*this.W;for(f=0;f<this.J.length;f++)this.J[f].b.volume=this.J[f].level*this.W;this.s.b&&(this.s.b.volume=this.W)}else{var g=this.Ob(a);for(f=0;f<g.length;f++){var e=g[f],c=e.level,c=c+Number(b);1<c&&(c=1);0>c&&(c=0);e.level=c;e.b&&null!=e.b.volume&&(e.b.volume=c*this.W)}}}catch(h){this.L(h)}};b.prototype.Il=function(){try{for(var a=this,b=!1,c=!1,f=0;f<this.T.length;f++){var g=this.T[f];-1==g.loop||this.Fc(g.id)||(this.Ia&&this.Fa.enabled&&4!=
g.mode&&6!=g.mode?this.Fa.Yj?(g.ja?g.Pc():(g.b.play(),g.b.currentTime=0),g.ka=0,c=!0):b=!0:4==g.mode||6==g.mode||"_background"==g.id&&this.Fc(g.id)||(g.ja?g.Pc():(g.b.play(),g.b.currentTime&&(g.b.currentTime=0))))}b&&setTimeout(function(){a.Fa.fp()},1E3*this.Fa.qb);c&&(this.Fa.bp=this.Ia.currentTime,this.Fa.ap=setInterval(function(){a.Fa.Qm()},10))}catch(e){this.L(e)}};b.prototype.ol=function(){for(var a;0<this.P.length;)a=this.P.pop(),a.b&&(this.Da.removeChild(a.b.__div),delete a.b),a.b=null;this.ha("hotspotsremoved",
{})};b.prototype.pj=function(a){this.Ng=a;0!=a?this.U.style.zIndex=a.toString():this.U.style.zIndex="auto";this.Ea&&this.Ea.Qc&&(this.Ea.Qc.zIndex=(a+4).toString());this.Da.style.zIndex=(a+4).toString();this.ta.style.zIndex=(a+3).toString();this.va.style.zIndex=(a+5).toString();for(var b=0;b<this.J.length+this.Za.length;b++){var c;c=b<this.J.length?this.J[b]:this.Za[b-this.J.length];c.b&&(c.b.style.zIndex=(a+(c.lb?8E4:0)).toString())}};b.prototype.sf=function(a){var b=this.isFullscreen!==a;this.isFullscreen!==
a&&(this.isFullscreen=a,this.update(100));if(this.isFullscreen){if(this.$h)try{this.U.webkitRequestFullScreen?this.U.webkitRequestFullScreen():this.U.mozRequestFullScreen?this.U.mozRequestFullScreen():this.U.msRequestFullscreen?this.U.msRequestFullscreen():this.U.requestFullScreen?this.U.requestFullScreen():this.U.requestFullscreen&&this.U.requestFullscreen()}catch(c){this.L(c)}this.U.style.position="absolute";a=this.le();this.U.style.left=window.pageXOffset-a.x+this.margin.left+"px";this.U.style.top=
window.pageYOffset-a.y+this.margin.top+"px";this.pj(10);document.body.style.overflow="hidden";b&&(this.O&&this.O.ggEnterFullscreen&&this.O.ggEnterFullscreen(),this.ha("fullscreenenter",{}))}else{if(this.$h)try{document.webkitIsFullScreen?document.webkitCancelFullScreen():document.mozFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.fullScreen&&(document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen&&document.exitFullscreen())}catch(c){this.L(c)}this.U.style.position=
"relative";this.U.style.left="0px";this.U.style.top="0px";this.pj(0);document.body.style.overflow="";b&&(this.O&&this.O.ggExitFullscreen&&this.O.ggExitFullscreen(),this.ha("fullscreenexit",{}))}this.Je()};b.prototype.Vh=function(){this.sf(!this.isFullscreen)};b.prototype.Om=function(){this.sf(!0)};b.prototype.exitFullscreen=function(){this.sf(!1)};b.prototype.bn=function(){return this.isFullscreen};b.prototype.Fl=function(a,b,c){this.o.Xb||(this.Hd=this.o.Sg);this.o.enabled=!0;this.o.active=!0;this.o.sd=
0;this.o.startTime=(new Date).getTime();a&&0!=a&&(this.o.speed=a);b&&(this.o.timeout=b);c&&(this.o.Th=c);this.ha("autorotatechanged",{})};b.prototype.gp=function(){this.o.active=!1;this.o.enabled=!1;this.o.Xb=!1;this.Ne=this.o.yh=!1;this.u.active&&this.u.kg&&(this.u.active=!1,this.u.kg=!1,this.u.Ab=0);this.ha("autorotatechanged",{})};b.prototype.kp=function(){this.o.enabled=!this.o.active;this.o.active=this.o.enabled;this.o.sd=0;this.o.enabled&&(this.o.startTime=(new Date).getTime(),this.o.Xb||(this.Hd=
this.o.Sg));this.ha("autorotatechanged",{})};b.prototype.cp=function(a){this.zb="";a&&""!=a&&(this.Hd=a);this.o.Xb||(this.o.Xb=!0,this.o.Pj=this.o.enabled,this.Fl())};b.prototype.Xj=function(a){if(this.Gd=document.getElementById(a)){this.Gd.innerHTML="";this.U=document.createElement("div");this.U.onselectstart=function(){return!1};O&&this.U.setAttribute("id","viewport");a="top:\t0px;left: 0px;position:relative;-ms-touch-action: none;touch-action: none;text-align: left;"+(this.Ja+"user-select: none;");
this.U.setAttribute("style",a);this.Gd.appendChild(this.U);this.D=document.createElement("div");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;-ms-touch-action: none;touch-action: none;"+(this.Ja+"user-select: none;");O&&this.D.setAttribute("id","viewer");this.D.setAttribute("style",a);this.U.appendChild(this.D);if(this.Cb){var b=document.createElement("div");a="top:\t0px;left: 0px;width:  100%;height: 100%;overflow: hidden;position:absolute;-ms-touch-action: none;touch-action: none;"+
(this.Ja+"user-select: none;");b.setAttribute("id",this.Hi);b.setAttribute("style",a);this.D.appendChild(b)}this.Ea&&(this.Ea.Qc=document.createElement("canvas"),O&&this.Ea.Qc.setAttribute("id","lensflarecanvas"),a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+(this.Ja+"user-select: none;"),a+=this.Ja+"pointer-events: none;",this.Ea.Qc.setAttribute("style",a),this.U.appendChild(this.Ea.Qc));this.Da=document.createElement("div");O&&this.Da.setAttribute("id",
"hotspots");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;";this.Jk&&(a+="background-image: url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);");this.Md&&!this.Z&&(a+=this.Ja+"transform: translateZ(9999999px);");a+=this.Ja+"user-select: none;";this.Da.setAttribute("style",a);this.U.appendChild(this.Da);this.ta=document.createElement("canvas");O&&this.ta.setAttribute("id","hotspotcanvas");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+
(this.Ja+"user-select: none;");a+=this.Ja+"pointer-events: none;";this.ta.setAttribute("style",a);this.U.appendChild(this.ta);this.va=document.createElement("div");O&&this.va.setAttribute("id","hotspottext");this.va.setAttribute("style","top:\t0px;left: 0px;position:absolute;padding: 3px;visibility: hidden;");this.va.innerHTML=" Hotspot text!";this.U.appendChild(this.va);this.divSkin=this.O=this.Da;this.pj(0)}else alert("container not found!")};b.prototype.Zj=function(a){this.Ca=!0;return function(){a.Qa&&
(a.h&&a.h.complete?(a.loaded=!0,a.Qa.drawImage(a.h,0,0,a.width,a.height),a.h=null,a.wd=null):a.wd&&a.wd.complete&&!a.loaded&&(a.Qa.drawImage(a.wd,0,0,a.width,a.height),a.wd=null))}};b.prototype.Wj=function(a){var b,c,f,g=128;this.h.lf&&(this.D.style.backgroundColor=this.h.lf.replace("0x","#"));a?(g=this.Gf,this.vf=1):this.mc>g&&(g=this.mc);for(f=0;6>f;f++){c=this.jb.cb[f];a?(c.width=this.Gf,c.height=this.Gf):(c.K=document.createElement("canvas"),c.K.width=this.mc,c.K.height=this.mc,c.width=this.mc,
c.height=this.mc,c.Qa=c.K.getContext("2d"));b="position:absolute;";b+="left: 0px;";b+="top: 0px;";b+="width: "+g+"px;";b+="height: "+g+"px;";a&&(b+="outline: 1px solid transparent;");b+=this.Ja+"transform-origin: 0% 0%;";b+="-webkit-user-select: none;";b+=this.Ja+"transform: ";var e;e="";var h=1;this.nf&&(h=100);e=4>f?e+("rotateY("+-90*f+"deg)"):e+("rotateX("+(4==f?-90:90)+"deg)");this.nf&&(e+=" scale("+h+")");e+=" translate3d("+-g/2+"px,"+-g/2+"px,"+-g*h/(2*this.vf)+"px)";b+=e+";";c.yk=e;a||(c.K.setAttribute("style",
b),this.D.insertBefore(c.K,this.D.firstChild))}if(!a){for(f=0;6>f;f++)c=this.jb.cb[f],""!=this.We[f]&&(c.wd=new Image,c.wd.crossOrigin=this.crossOrigin,c.wd.onload=this.Zj(c),c.wd.setAttribute("src",this.fc(this.We[f])),this.Lb.push(c.wd));for(f=0;6>f;f++)c=this.jb.cb[f],c.loaded=!1,c.h=new Image,c.h.crossOrigin=this.crossOrigin,c.h.onload=this.Zj(c),c.h.setAttribute("src",this.fc(this.Xg[f])),this.Lb.push(c.h)}};b.prototype.Jh=function(){var a;this.wa.ca.x=0;this.wa.ca.y=0;if(this.Kc){for(a=0;a<
this.jb.cb.length;a++)this.jb.cb[a].K&&this.jb.cb[a].K.setAttribute&&(this.jb.cb[a].K.setAttribute("src",this.ck),this.D.removeChild(this.jb.cb[a].K));if(this.h.I){for(a=0;a<this.h.I.length;a++){var b=this.h.I[a],c;for(c in b.V)if(b.V.hasOwnProperty(c)){var f=b.V[c];f.visible=!1;f.K&&(f.Qa&&f.Qa.clearRect(0,0,f.Qa.canvas.width,f.Qa.canvas.height),this.Wh.push(f.K));f.h&&delete f.h;f.eb&&(this.H.deleteTexture(f.eb),this.Yc--);f.Qa=null;f.K=null;f.h=null}delete b.V}delete this.h.I;this.h.I=null}}this.ma.Jh();
c=[];for(a=0;a<this.J.length;a++)b=this.J[a],b.bd?c.push(b):b.xd();for(a=0;a<this.Za.length;a++)this.Za[a].xd();this.w.eg=-1;this.ta.style.visibility="hidden";this.fb=0;b=[];this.Fa.Gg=[];for(a=0;a<this.T.length;a++)if(f=this.T[a],0==f.mode||1==f.mode)b.push(f),this.L("Keep in list "+f.id);else if(this.Ia&&this.Fa.enabled&&this.Fc(f.id))this.Fa.Gg.push(f),1!=this.C.Pa&&2!=this.C.Pa&&this.Fa.Ci(f);else{try{f.ja?f.Se():f.b.pause()}catch(e){this.L(e)}f.xd()}this.T=b;this.J=c;this.Za=[];this.s.b&&(this.U.removeChild(this.s.b),
this.s.b=null,a=this.Ob("_videopanorama"),0<a.length&&(a[0].b=null));this.s.$c=!1;this.s.ph=!1};b.prototype.uk=function(){var a=1,b=-1!=navigator.userAgent.indexOf("Mac");window.devicePixelRatio&&b&&(a=window.devicePixelRatio);return{Mg:screen.width*a,Vf:screen.height*a}};b.prototype.qk=function(){var a=this.uk();return a.Mg>a.Vf?a.Mg:a.Vf};b.prototype.hj=function(a,b){var c=(new DOMParser).parseFromString(a,"text/xml");this.wi=a;this.jl(c,b);this.ia&&(this.L("Apply to Flash player"),this.ia.readConfigString(this.wi),
this.ia.setLocked(!0),this.ia.setSlaveMode(!0))};b.prototype.il=function(a,b,c){try{var f;f=new XMLHttpRequest;f.open("GET",a,!1);f.send(null);if(f.responseXML){var e=a.lastIndexOf("/");0<=e&&(this.Fd=a.substr(0,e+1));2<=arguments.length&&null!=b&&(this.Fd=b);this.hj(f.responseText,c)}else alert("Error loading panorama XML")}catch(l){alert("Error:"+l)}};b.prototype.uo=function(a,b,c,f){var e;e=new XMLHttpRequest;var l=this;e.onload=function(h){if(4<=e.readyState)if(e.responseXML){var k=a.lastIndexOf("/");
0<=k&&(l.Fd=a.substr(0,k+1));3<=arguments.length&&null!=c&&(l.Fd=c);l.hj(e.responseText,f);b&&b()}else alert("Error loading panorama XML");else console.error("Wrong state loading XML:"+e.statusText)};e.onerror=function(){console.error("Error loading XML:"+e.statusText)};e.open("GET",a,!0);e.send(null)};b.prototype.mi=function(a){var b="";"{"==a.charAt(0)&&(b=a.substr(1,a.length-2));a={oldNodeId:this.kb,nodeId:b};this.ha("beforechangenodeid",a);""!=this.kb&&-1==this.Hj.indexOf(this.kb)&&this.Hj.push(this.kb);
this.Qk=this.kb;this.kb=b;this.L("change active node: "+b);this.Ba&&this.Ba.changeActiveNode&&this.Ba.changeActiveNode("{"+b+"}");this.ha("changenodeid",a)};b.prototype.pk=function(){return this.kb};b.prototype.rk=function(){if(0<this.Na.length){var a;a=this.Na.indexOf(this.kb);a++;a>=this.Na.length&&(a=0);return this.Na[a]}return""};b.prototype.zn=function(){if(0<this.Na.length){var a;a=this.Na.indexOf(this.kb);a--;0>a&&(a=this.Na.length-1);return this.Na[a]}return""};b.prototype.hn=function(){return this.Qk};
b.prototype.co=function(a){return-1!=this.Hj.indexOf(a)};b.prototype.jl=function(a,b){var c=a.firstChild;this.Ge=[];this.Na=[];this.Zg=[];for(var f=c.firstChild;f;){if("map"==f.nodeName){var e=[],l=f.getAttributeNode("title");l&&(e.title=l.nodeValue.toString());l=f.getAttributeNode("type");e.type=l.nodeValue.toString();"web"==e.type?(l=f.getAttributeNode("mapprovider"),e.mapprovider=l.nodeValue.toString(),l=f.getAttributeNode("mapstyle"),e.mapstyle=l.nodeValue.toString(),(l=f.getAttributeNode("mapurltemplate"))&&
(e.mapurltemplate=l.nodeValue.toString()),(l=f.getAttributeNode("mapmaxzoom"))&&(e.mapmaxzoom=Number(l.nodeValue)),(l=f.getAttributeNode("mapkey"))&&(e.mapkey=l.nodeValue.toString())):(l=f.getAttributeNode("width"),e.width=Number(l.nodeValue),l=f.getAttributeNode("height"),e.height=Number(l.nodeValue),l=f.getAttributeNode("zoomlevels"),e.zoomlevels=Number(l.nodeValue),l=f.getAttributeNode("tileformat"),e.tileformat=l.nodeValue.toString(),l=f.getAttributeNode("bgcolor"),e.bgcolor=l.nodeValue.toString());
l=f.getAttributeNode("id");this.Wi[l.nodeValue.toString()]=e}f=f.nextSibling}if("tour"==c.nodeName){this.df=!0;f="";(l=c.getAttributeNode("start"))&&(f=l.nodeValue.toString());this.hasOwnProperty("startNode")&&this.startNode&&(f=String(this.startNode),this.startNode="");for(var e=c.firstChild,h="",c="";e;){if("panorama"==e.nodeName){if(l=e.getAttributeNode("id"))h=l.nodeValue.toString(),""==f&&(f=h),""==c&&(c=h),this.Ge[h]=e,this.Na.push(h);for(l=e.firstChild;l;){if("userdata"==l.nodeName){var k=
this.bh(l);this.Ej[h]=k;k.customnodeid&&(this.Zg[k.customnodeid]=h);this.wh[h]=this.Pm(l)}l=l.nextSibling}}e=e.nextSibling}this.Ge.hasOwnProperty(f)||(l=this.Zg[f])&&(f=l);this.Ge.hasOwnProperty(f)||(this.Hc("Start node "+f+" not found!"),f=c);this.kb=f;this.gj(this.Ge[f],b);this.mi("{"+f+"}")}else this.df=!1,this.gj(c,b),this.mi(""),this.Na.push("")};b.prototype.gj=function(a,b){this.ol();this.Ea&&this.Ea.wo();this.rf(this.sb);this.Jh();this.fg=0;for(var c=a.firstChild,f,e,l=0;c;){if("view"==c.nodeName){if(f=
c.getAttributeNode("fovmode"))this.f.mode=Number(f.nodeValue);f=c.getAttributeNode("pannorth");this.pan.aj=1*(f?f.nodeValue:0);for(var h=c.firstChild;h;){"start"==h.nodeName&&(f=h.getAttributeNode("pan"),this.pan.c=Number(f?f.nodeValue:0),this.pan.Ra=this.pan.c,f=h.getAttributeNode("tilt"),this.i.c=Number(f?f.nodeValue:0),this.i.Ra=this.i.c,f=h.getAttributeNode("roll"),this.N.c=Number(f?f.nodeValue:0),this.N.Ra=this.N.c,f=h.getAttributeNode("fov"),this.f.c=Number(f?f.nodeValue:70),this.f.Ra=this.f.c,
f=h.getAttributeNode("projection"),this.Eh=Number(f?f.nodeValue:4),this.cd(this.Eh));"min"==h.nodeName&&(f=h.getAttributeNode("pan"),this.pan.min=1*(f?f.nodeValue:0),f=h.getAttributeNode("tilt"),this.i.min=1*(f?f.nodeValue:-90),f=h.getAttributeNode("fov"),this.f.min=1*(f?f.nodeValue:5),1E-20>this.f.min&&(this.f.min=1E-20),f=h.getAttributeNode("fovpixel"),this.f.jg=1*(f?f.nodeValue:0));if("max"==h.nodeName){f=h.getAttributeNode("pan");this.pan.max=1*(f?f.nodeValue:0);f=h.getAttributeNode("tilt");this.i.max=
1*(f?f.nodeValue:90);f=h.getAttributeNode("fov");this.f.max=1*(f?f.nodeValue:120);180<=this.f.max&&(this.f.max=179.9);if(f=h.getAttributeNode("fovstereographic"))this.f.Zi=1*f.nodeValue;if(f=h.getAttributeNode("fovfisheye"))this.f.Yi=1*f.nodeValue;if(f=h.getAttributeNode("scaletofit"))this.B.ul=1==f.nodeValue}if("flyin"==h.nodeName){if(f=h.getAttributeNode("projection"))this.pc.Ab=Number(f.nodeValue);if(f=h.getAttributeNode("pan"))this.pc.pan=parseFloat(f.nodeValue);if(f=h.getAttributeNode("tilt"))this.pc.i=
parseFloat(f.nodeValue);if(f=h.getAttributeNode("fov"))this.pc.f=parseFloat(f.nodeValue)}h=h.nextSibling}}if("autorotate"==c.nodeName){if(f=c.getAttributeNode("speed"))this.o.speed=1*f.nodeValue;if(f=c.getAttributeNode("delay"))this.o.timeout=1*f.nodeValue;if(f=c.getAttributeNode("returntohorizon"))this.o.Th=1*f.nodeValue;if(f=c.getAttributeNode("nodedelay"))this.o.Ch=1*f.nodeValue;if(f=c.getAttributeNode("noderandom"))this.o.$i=1==f.nodeValue;this.ge&&(this.o.enabled=!0,this.o.active=!1);if(f=c.getAttributeNode("startloaded"))this.o.Dg=
1==f.nodeValue,this.o.Dg&&(this.o.active=!1);if(f=c.getAttributeNode("useanimation"))this.o.Dj=1==f.nodeValue;if(f=c.getAttributeNode("syncanimationwithvideo"))this.o.vj=1==f.nodeValue}if("animation"==c.nodeName){if(f=c.getAttributeNode("syncanimationwithvideo"))this.o.vj=1==f.nodeValue;if(f=c.getAttributeNode("useinautorotation"))this.o.Dj=1==f.nodeValue;if(f=c.getAttributeNode("animsequence"))this.o.Sg=f.nodeValue;this.ua=[];for(h=c.firstChild;h;){if("clip"==h.nodeName){this.A=new p.Yk;if(f=h.getAttributeNode("animtitle"))this.A.Oe=
f.nodeValue.toString();if(f=h.getAttributeNode("cliptitle"))this.A.Ua=f.nodeValue.toString();if(f=h.getAttributeNode("nodeid"))this.A.Lp=f.nodeValue.toString();if(f=h.getAttributeNode("length"))this.A.length=Number(f.nodeValue);if(f=h.getAttributeNode("animtype"))this.A.qm=Number(f.nodeValue);if(f=h.getAttributeNode("nextcliptitle"))this.A.al=f.nodeValue.toString();if(f=h.getAttributeNode("nextclipnodeid"))this.A.Bh=f.nodeValue.toString();if(f=h.getAttributeNode("transitiontype"))this.A.qp=Number(f.nodeValue);
var k=h.firstChild;for(this.A.X=[];k;){if("keyframe"==k.nodeName){var m=new p.Bc;if(f=k.getAttributeNode("time"))m.time=Number(f.nodeValue);if(f=k.getAttributeNode("value"))m.value=Number(f.nodeValue);if(f=k.getAttributeNode("valuestring"))m.Fj=f.nodeValue.toString();if(f=k.getAttributeNode("transitiontime"))m.qb=Number(f.nodeValue);f=k.getAttributeNode("type");var q=0;f&&(m.type=Number(f.nodeValue),q=Number(f.nodeValue));if(f=k.getAttributeNode("property"))m.ob=Number(f.nodeValue);if(f=k.getAttributeNode("additionaltrackid"))m.Qg=
f.nodeValue.toString();if(1==q||2==q){if(f=k.getAttributeNode("bezierintime"))m.$d=Number(f.nodeValue);if(f=k.getAttributeNode("bezierinvalue"))m.Nc=Number(f.nodeValue);if(f=k.getAttributeNode("bezierouttime"))m.ae=Number(f.nodeValue);if(f=k.getAttributeNode("bezieroutvalue"))m.be=Number(f.nodeValue)}this.A.X.push(m)}k=k.nextSibling}this.ua.push(this.A)}h=h.nextSibling}}"input"==c.nodeName&&(e||(e=c));if(e)for(h=0;6>h;h++)f=e.getAttributeNode("prev"+h+"url"),this.We[h]=f?String(f.nodeValue):"";"altinput"==
c.nodeName&&(h=0,(f=c.getAttributeNode("screensize"))&&(h=1*f.nodeValue),0<h&&h<=this.qk()&&h>l&&(l=h,e=c));if("control"==c.nodeName&&this.ge){if(f=c.getAttributeNode("simulatemass"))this.wa.enabled=1==f.nodeValue;if(f=c.getAttributeNode("rubberband"))this.B.sl=1==f.nodeValue;if(f=c.getAttributeNode("locked"))this.B.vb=1==f.nodeValue;f&&(this.B.qe=1==f.nodeValue);if(f=c.getAttributeNode("lockedmouse"))this.B.vb=1==f.nodeValue;if(f=c.getAttributeNode("lockedkeyboard"))this.B.qe=1==f.nodeValue;if(f=
c.getAttributeNode("lockedkeyboardzoom"))this.B.Tn=1==f.nodeValue;if(f=c.getAttributeNode("lockedwheel"))this.B.ad=1==f.nodeValue;if(f=c.getAttributeNode("invertwheel"))this.B.Hk=1==f.nodeValue;if(f=c.getAttributeNode("speedwheel"))this.B.El=1*f.nodeValue;if(f=c.getAttributeNode("invertcontrol"))this.B.qd=1==f.nodeValue;if(f=c.getAttributeNode("sensitivity"))this.B.sensitivity=1*f.nodeValue,1>this.B.sensitivity&&(this.B.sensitivity=1);if(f=c.getAttributeNode("dblclickfullscreen"))this.B.yi=1==f.nodeValue;
if(f=c.getAttributeNode("contextfullscreen"))this.B.Jf=1==f.nodeValue;if(f=c.getAttributeNode("contextprojections"))this.B.Vg=1==f.nodeValue;if(f=c.getAttributeNode("hideabout"))this.B.Yf=1==f.nodeValue;for(h=c.firstChild;h;)"menulink"==h.nodeName&&(k={text:"",url:""},f=h.getAttributeNode("text"),k.text=f.nodeValue,f=h.getAttributeNode("url"),k.url=f.nodeValue,this.ig.push(k)),h=h.nextSibling}if("transition"==c.nodeName&&this.ge){if(f=c.getAttributeNode("enabled"))this.C.enabled=1==f.nodeValue;if(f=
c.getAttributeNode("blendtime"))this.C.Ff=f.nodeValue;if(f=c.getAttributeNode("blendcolor"))this.C.Qe=f.nodeValue.toString();if(f=c.getAttributeNode("type"))this.C.type=f.nodeValue.toString();if(f=c.getAttributeNode("softedge"))this.C.wc=1*f.nodeValue;if(f=c.getAttributeNode("zoomin"))this.C.Pa=f.nodeValue;if(f=c.getAttributeNode("zoomout"))this.C.Yb=f.nodeValue;if(f=c.getAttributeNode("zoomfov"))this.C.Af=f.nodeValue;if(f=c.getAttributeNode("zoomspeed"))this.C.Xd=f.nodeValue;if(f=c.getAttributeNode("zoomoutpause"))this.C.Bf=
1==f.nodeValue;"cut"==this.C.type&&(this.C.Ff=0)}if("soundstransition"==c.nodeName){if(f=c.getAttributeNode("enabled"))this.Fa.enabled=1==f.nodeValue;if(f=c.getAttributeNode("transitiontime"))this.Fa.qb=1*f.nodeValue;if(f=c.getAttributeNode("crossfade"))this.Fa.Yj=1==f.nodeValue}if("flyintransition"==c.nodeName){if(f=c.getAttributeNode("enabled"))this.tb.enabled=1==f.nodeValue&&this.Z;if(f=c.getAttributeNode("speed"))this.tb.speed=1*f.nodeValue}"userdata"==c.nodeName&&(this.userdata=this.zf=this.bh(c));
if("hotspots"==c.nodeName)for(h=c.firstChild;h;){if("label"==h.nodeName&&this.ge){k=this.w.xj;if(f=h.getAttributeNode("enabled"))k.enabled=1==f.nodeValue;if(f=h.getAttributeNode("width"))k.width=1*f.nodeValue;if(f=h.getAttributeNode("height"))k.height=1*f.nodeValue;if(f=h.getAttributeNode("textcolor"))k.yj=1*f.nodeValue;if(f=h.getAttributeNode("textalpha"))k.wj=1*f.nodeValue;if(f=h.getAttributeNode("background"))k.background=1==f.nodeValue;if(f=h.getAttributeNode("backgroundalpha"))k.Zb=1*f.nodeValue;
if(f=h.getAttributeNode("backgroundcolor"))k.$b=1*f.nodeValue;if(f=h.getAttributeNode("border"))k.ki=1*f.nodeValue;if(f=h.getAttributeNode("bordercolor"))k.cc=1*f.nodeValue;if(f=h.getAttributeNode("borderalpha"))k.bc=1*f.nodeValue;if(f=h.getAttributeNode("borderradius"))k.ji=1*f.nodeValue;if(f=h.getAttributeNode("wordwrap"))k.ci=1==f.nodeValue}if("polystyle"==h.nodeName&&this.ge){if(f=h.getAttributeNode("mode"))this.w.mode=1*f.nodeValue;if(f=h.getAttributeNode("bordercolor"))this.w.cc=1*f.nodeValue;
if(f=h.getAttributeNode("backgroundcolor"))this.w.$b=1*f.nodeValue;if(f=h.getAttributeNode("borderalpha"))this.w.bc=1*f.nodeValue;if(f=h.getAttributeNode("backgroundalpha"))this.w.Zb=1*f.nodeValue;if(f=h.getAttributeNode("handcursor"))this.w.bf=1==f.nodeValue}f=void 0;"hotspot"==h.nodeName&&(f=new p.qh(this),f.type="point",f.Ib(h),this.P.push(f));"polyhotspot"==h.nodeName&&(f=new p.qh(this),f.type="poly",f.Ib(h),this.P.push(f));h=h.nextSibling}if("sounds"==c.nodeName||"media"==c.nodeName)for(h=c.firstChild;h;)"sound"!=
h.nodeName||this.bl||(f=new p.lm(this),f.Ib(h),this.Cb||f.addElement()),"video"==h.nodeName&&(f=new p.Ij(this),f.Ib(h),this.Cb||f.addElement()),"image"==h.nodeName&&(f=new p.jm(this),f.Ib(h),this.Cb||f.addElement()),"lensflare"==h.nodeName&&this.Ea&&(f=new p.km(this),f.Ib(h),this.Ea.hg.push(f)),h=h.nextSibling;c=c.nextSibling}b&&""!=b&&(c=b.toString().split("/"),4<c.length&&this.cd(Number(c[4])),0<c.length&&(f=String(c[0]),"N"==f.charAt(0)?this.oj(Number(f.substr(1))):"S"==f.charAt(0)?this.oj(-180+
Number(f.substr(1))):this.ug(Number(f))),1<c.length&&this.xg(Number(c[1])),2<c.length&&this.qg(Number(c[2])));if(e){for(h=0;6>h;h++)(f=e.getAttributeNode("tile"+h+"url"))&&(this.Xg[h]=String(f.nodeValue)),f=e.getAttributeNode("tile"+h+"url1");for(h=0;6>h;h++)(f=e.getAttributeNode("prev"+h+"url"))&&(this.We[h]=String(f.nodeValue));if(f=e.getAttributeNode("tilesize"))this.mc=1*f.nodeValue;if(f=e.getAttributeNode("canvassize"))this.Gf=Number(f.nodeValue);if(f=e.getAttributeNode("tilescale"))this.vf=
1*f.nodeValue;if(f=e.getAttributeNode("leveltileurl"))this.h.Xk=f.nodeValue;if(f=e.getAttributeNode("leveltilesize"))this.h.G=Number(f.nodeValue);if(f=e.getAttributeNode("levelbias"))this.h.Vk=Number(f.nodeValue);if(f=e.getAttributeNode("levelbiashidpi"))this.h.Wk=Number(f.nodeValue);f=e.getAttributeNode("overlap");this.ab.N=0;this.ab.pitch=0;f&&(this.h.Ka=Number(f.nodeValue));if(f=e.getAttributeNode("levelingroll"))this.ab.N=Number(f.nodeValue);if(f=e.getAttributeNode("levelingpitch"))this.ab.pitch=
Number(f.nodeValue);this.fb=0;(f=e.getAttributeNode("flat"))&&1==f.nodeValue&&(this.fb=2);f=e.getAttributeNode("width");this.h.width=1*(f?f.nodeValue:1);f=e.getAttributeNode("height");this.h.height=1*(f?f.nodeValue:this.h.width);this.s.src=[];this.h.I=[];for(h=e.firstChild;h;){if("preview"==h.nodeName){if(f=h.getAttributeNode("color"))this.h.lf=f.nodeValue;if(f=h.getAttributeNode("strip"))this.h.hl=1==f.nodeValue}if("video"==h.nodeName){if(f=h.getAttributeNode("format"))"3x2"==f.nodeValue&&(this.s.format=
14),"equirectangular"==f.nodeValue&&(this.s.format=1);if(f=h.getAttributeNode("flipy"))this.s.Ii=Number(f.nodeValue);if(f=h.getAttributeNode("startmuted"))this.s.Hl=1==f.nodeValue;if(f=h.getAttributeNode("bleed"))this.s.Pe=Number(f.nodeValue);if(f=h.getAttributeNode("endaction"))this.s.fe=String(f.nodeValue);if(f=h.getAttributeNode("width"))this.s.width=Number(f.nodeValue);if(f=h.getAttributeNode("height"))this.s.height=Number(f.nodeValue);for(k=h.firstChild;k;)"source"==k.nodeName&&(f=k.getAttributeNode("url"))&&
this.s.src.push(f.nodeValue.toString()),k=k.nextSibling}if("level"==h.nodeName){e=new p.tl;f=h.getAttributeNode("width");e.width=1*(f?f.nodeValue:1);f=h.getAttributeNode("height");e.height=1*(f?f.nodeValue:e.width);if(f=h.getAttributeNode("preload"))e.cache=1==f.nodeValue;if(f=h.getAttributeNode("preview"))e.kf=1==f.nodeValue;e.M=Math.floor((e.width+this.h.G-1)/this.h.G);e.ea=Math.floor((e.height+this.h.G-1)/this.h.G);this.h.I.push(e)}h=h.nextSibling}this.h.Ti=this.h.I.length}this.Jg&&(this.Z=this.Kc=
!1,this.dc||(this.L("dummy rendering"),this.dc=document.createElement("canvas"),this.dc.width=100,this.dc.height=100,this.dc.id="dummycanvas",this.D.appendChild(this.dc)),this.gd());this.Z&&this.H&&(this.ma.Fk(this.vf),this.ma.Gk());this.Kc&&(0<this.h.I.length?this.Wj(!0):this.Wj(!1),this.fg=0);var w=this;0<this.h.I.length&&this.h.hl&&0==this.fb&&(c=new Image,e=new p.tl,e.kf=!0,e.cache=!0,e.M=e.ea=0,e.height=e.width=0,this.h.I.push(e),c.crossOrigin=this.crossOrigin,c.onload=this.ma.bo(c),c.setAttribute("src",
this.Fe(6,this.h.Ti-1,0,0)));if(0<this.s.src.length&&this.Z)if(this.ai){this.s.b=document.createElement("video");this.s.b.crossOrigin=this.crossOrigin;this.s.b.setAttribute("style","display:none; max-width:none;");this.s.b.setAttribute("playsinline","playsinline");this.Ld&&this.Fi&&this.s.Hl&&this.s.b.setAttribute("muted","muted");this.s.b.a=!0;this.s.b.volume=this.W;this.U.appendChild(this.s.b);this.s.$c=!1;this.s.Jl=!1;this.s.b.oncanplay=function(){if(!w.s.$c){w.s.ph=!0;var a,b,c,d,f,e,g=[],h=new p.sa,
k=w.H,l=w.s.b.videoWidth/3;w.s.width=w.s.b.videoWidth;w.s.height=w.s.b.videoHeight;for(a=0;6>a;a++)for(c=a%3*l+w.s.Pe,f=c+l-2*w.s.Pe,e=4,3>a&&(e+=l),d=e+l-2*w.s.Pe,b=0;4>b;b++){h.x=-1;h.y=-1;h.z=1;for(var m=0;m<b;m++)h.rl();g.push((0<h.x?c:f)/(3*l),(0<h.y?d:e)/(2*l))}k.bindBuffer(k.ARRAY_BUFFER,w.s.Rh);k.bufferData(k.ARRAY_BUFFER,new Float32Array(g),k.STATIC_DRAW)}};"exit"==this.s.fe?this.s.b.onended=function(){w.s.ph=!1;w.s.$c=!1;w.U.removeChild(w.s.b);w.s.b=null;w.update()}:"stop"==this.s.fe?w.s.b.onended=
function(){w.update()}:"{"==this.s.fe.charAt(0)?this.s.b.onended=function(){w.we(w.s.fe,"$fwd")}:this.s.b.loop=!0;for(h=0;h<this.s.src.length;h++)e=document.createElement("source"),e.setAttribute("src",this.fc(this.s.src[h])),this.s.b.appendChild(e);e=this.Ob("_videopanorama");0<e.length?e[0].b=this.s.b:this.kl("_videopanorama",this.s.b);this.s.b.play()}else"{"==this.s.fe.charAt(0)&&w.we(w.s.fe,"$fwd");this.Kj();this.C.Dd||this.Il();this.update();this.ge&&(this.O&&this.O.ggViewerInit&&this.O.ggViewerInit(),
this.ha("configloaded",{}),this.tb.enabled&&0==this.fb&&this.Z&&(this.cd(9),this.pan.c=this.pc.pan,this.i.c=this.pc.i,this.f.c=this.pc.f,this.La=this.pc.Ab,this.A=this.Nf(!1),this.pan.c=this.A.X[0].value,this.i.c=this.A.X[1].value,this.f.c=this.A.X[2].value,3==this.A.X[3].ob&&this.cd(this.A.X[3].value),this.zb=this.A.Ua,this.C.xh=this.B.vb,this.C.bi=this.B.ad,this.C.rh=this.B.qe,this.o.active=!1,this.o.eh=!0));this.ge=!1;this.Xf=!0;this.gd()};b.prototype.cj=function(a,b){0<a.length&&(".xml"==a.substr(a.length-
4)||".swf"==a.substr(a.length-4)||"{"==a.charAt(0)?this.we(this.fc(a),b):window.open(this.fc(a),b))};b.prototype.ep=function(){this.Xf=this.isLoaded=!1;this.checkLoaded=this.Lb=[];this.Fh=0;this.O&&this.O.ggReLoaded&&this.O.ggReLoaded();this.ha("beforechangenode",{})};b.prototype.we=function(a,b){if(""!=a&&"{}"!=a){this.ep();this.Ba&&this.Ba.hotspotProxyOut&&this.Ba.hotspotProxyOut(this.za.id);".swf"==a.substr(a.length-4)&&(a=a.substr(0,a.length-4)+".xml");var c="";b&&(c=b.toString());c=c.replace("$cur",
this.pan.c+"/"+this.i.c+"/"+this.f.c+"//"+this.ya());c=c.replace("$fwd","N"+this.ih()+"/"+this.i.c+"/"+this.f.c+"//"+this.ya());c=c.replace("$bwd","S"+this.ih()+"/"+this.i.c+"/"+this.f.c+"//"+this.ya());c=c.replace("$ap",String(this.pan.c));c=c.replace("$an",String(this.ih()));c=c.replace("$at",String(this.i.c));c=c.replace("$af",String(this.f.c));c=c.replace("$ar",String(this.ya()));if(""!=c){var f=c.split("/");3<f.length&&""!=f[3]&&(this.startNode=f[3])}this.qa();if("{"==a.charAt(0)){var f=a.substr(1,
a.length-2),e=this.Zg[f];e&&(f=e);var e=this.C,k=this.H;if(this.Ge[f]){this.Tg=!0;if(this.C.enabled&&this.Z&&this.C.Wb){e.He||e.Dd||(e.xh=this.B.vb,e.bi=this.B.ad,e.rh=this.B.qe,this.sg(!0),this.tg(!0),this.rg(!0));var h;"wipeleftright"==e.type?h=1:"wiperightleft"==e.type?h=2:"wipetopbottom"==e.type?h=3:"wipebottomtop"==e.type?h=4:"wiperandom"==e.type&&(h=Math.ceil(4*Math.random()));e.xi=h;k.bindFramebuffer(k.FRAMEBUFFER,e.Wb);k.viewport(0,0,e.Wb.width,e.Wb.height);k.clear(k.COLOR_BUFFER_BIT|k.DEPTH_BUFFER_BIT);
e.Fg=!0;this.Ig();e.Fg=!1;k.bindFramebuffer(k.FRAMEBUFFER,null);k.viewport(0,0,this.mb.width,this.mb.height);h=new Date;this.za!=this.sb?(e.Og=this.za.kc/this.m.width,e.Pg=1-this.za.Hb/this.m.height):(e.Og=.5,e.Pg=.5);1!=e.Pa&&2!=e.Pa?(e.sj=h.getTime(),e.He=!0):(e.cm=h.getTime(),e.Dd=!0,e.rb=Math.sin(this.Pb()/2*Math.PI/180)/Math.sin(e.Af/2*Math.PI/180),e.rb=Math.max(e.rb,1),e.bm=1/e.Xd*e.rb*.3)}this.gj(this.Ge[f],c);this.mi(a);e.enabled&&this.Z&&0!=e.Yb&&(e.De=this.Ki(),e.Ee=this.Mi(),e.Cd=this.Pb(),
e.ed=this.ya(),1==e.Yb||3==e.Yb?this.yg(e.Af):2==e.Yb?this.yg(this.Of()+(this.Of()-e.Af)):4==e.Yb&&(this.cd(this.pc.Ab),this.ug(this.pc.pan),this.xg(this.pc.i),this.yg(this.pc.f)),e.Bf||1==e.Pa||2==e.Pa||(4==e.Yb?(this.A=this.Nf(!0,e.De,e.Ee,e.Cd),this.zb=this.A.Ua,this.o.active=!0,this.tb.zd=!0):this.moveTo(e.De,e.Ee,e.Cd,e.Xd,0,e.ed)));this.ia&&this.ia.openNext(a,c);this.C.Dd||this.C.He||(this.ga&&this.ti(),this.Tg=!1)}else{this.Hc("invalid node id: "+f);return}}else this.il(a,null,c);this.ha("changenode",
{});this.update(5)}};b.prototype.pn=function(){return this.df?this.Na.slice(0):[""]};b.prototype.bh=function(a){var b,c;c=[];c.title="";c.description="";c.author="";c.datetime="";c.copyright="";c.source="";c.information="";c.comment="";c.latitude=0;c.longitude=0;c.customnodeid="";c.tags=[];if(a&&((b=a.getAttributeNode("title"))&&(c.title=b.nodeValue.toString()),(b=a.getAttributeNode("description"))&&(c.description=b.nodeValue.toString()),(b=a.getAttributeNode("author"))&&(c.author=b.nodeValue.toString()),
(b=a.getAttributeNode("datetime"))&&(c.datetime=b.nodeValue.toString()),(b=a.getAttributeNode("copyright"))&&(c.copyright=b.nodeValue.toString()),(b=a.getAttributeNode("source"))&&(c.source=b.nodeValue.toString()),(b=a.getAttributeNode("info"))&&(c.information=b.nodeValue.toString()),(b=a.getAttributeNode("comment"))&&(c.comment=b.nodeValue.toString()),(b=a.getAttributeNode("latitude"))&&(c.latitude=Number(b.nodeValue)),(b=a.getAttributeNode("longitude"))&&(c.longitude=Number(b.nodeValue)),(b=a.getAttributeNode("customnodeid"))&&
(c.customnodeid=b.nodeValue.toString()),b=a.getAttributeNode("tags"))){a=b.nodeValue.toString().split("|");for(b=0;b<a.length;b++)""==a[b]&&(a.splice(b,1),b--);c.tags=a}return c};b.prototype.Pm=function(a){for(var b={},c=a.firstChild;c;){if("mapcoords"==c.nodeName){var f={x:0,y:0};a=c.getAttributeNode("x");f.x=Number(a.nodeValue);a=c.getAttributeNode("y");f.y=Number(a.nodeValue);a=c.getAttributeNode("mapid");b[a.nodeValue.toString()]=f}c=c.nextSibling}return b};b.prototype.Ji=function(a){return a?
this.Ej[a]?this.Ej[a]:this.bh():this.zf};b.prototype.qn=function(a){a=this.Ji(a);var b=[];""!=a.latitude&&0!=a.latitude&&0!=a.longitude&&(b.push(a.latitude),b.push(a.longitude));return b};b.prototype.sn=function(a){return this.Ji(a).title};b.prototype.$e=function(a,b){var c;for(c=0;c<this.A.X.length;c++)if(this.A.X[c].time==a&&this.A.X[c].ob==b)return this.A.X[c];return!1};b.prototype.nn=function(a){var b,c=1E5,f=a,e=!1;for(b=0;b<this.A.X.length;b++)this.A.X[b].ob==a.ob&&this.A.X[b].time>a.time&&
this.A.X[b].time<c&&(f=this.A.X[b],c=f.time,e=!0);return e?f:!1};b.prototype.Vm=function(a){for(var b=[],c=0;c<this.A.X.length;c++)if(this.A.X[c].time<=a&&4==this.A.X[c].ob){for(var f=!1,e=0;e<b.length;e++)if(b[e].Qg==this.A.X[c].Qg){b[e].time<this.A.X[c].time?b.splice(e,1):f=!0;break}f||b.push(this.A.X[c])}return b};b.prototype.Nf=function(a,b,c,f){for(var e=0;e<this.ua.length;e++)if(this.ua[e].Ua&&0==this.ua[e].Ua.indexOf("__FlyIn"))return this.ua[e];e=new p.Nk;e.Ua="__FlyIn";e.zg=this.pan.c;e.Bg=
this.i.c;e.Bd=this.f.c;e.Ag=this.La;e.ed=this.Eh;a?(e.Xe=!1,e.de=!1,e.speed=this.C.Xd,e.Td=b,e.Ud=c,e.uf=f):(e.Xe=!0,e.de=!0,e.speed=this.tb.speed,e.Td=this.pan.Ra,e.Ud=this.i.Ra,e.uf=this.f.Ra);return this.lk(e)};b.prototype.lk=function(a){var b=new p.Yk;b.Ua=a.Ua;b.Oe="";b.X=[];var c=a.Ag!=a.ed&&-1!=a.ed,e=a.Td-a.zg;if(360==this.pan.max-this.pan.min){for(;-360>e;)e+=360;for(;360<e;)e-=360}var g=a.Ud-a.Bg,k=a.uf-a.Bd,h=Math.round(Math.sqrt(e*e+g*g+k*k)/a.speed*.33);c&&(h=Math.max(10,h));b.length=
h;var v,m;a.ee&&(v=Math.ceil(.7*h),v=Math.min(15,v),v=Math.max(5,v),b.length=h+v,m=.33*v);var q=a.uf,w=h,r=0,u=h-1;if(c){var t=a.Bd,x;4==a.ed?x=120:x=this.Pf(a.ed);var z=a.uf,k=z-a.Bd,n=new p.oc(0,a.Bd),C=new p.oc(h,z),A=new p.oc,y=new p.oc;y.$a(h/3,a.Bd+k/3);A.$a(2*h/3,z-k/3);if(t>x)for(;r<=h&&t>x;)t=new p.oc,t.ii(n,C,y,A,r),t=t.y,r++;else r=1;r>=.8*h&&(w=r=Math.round(.8*h));0==r&&(r=1);var B;4==a.Ag?B=120:B=this.Pf(a.Ag);x=a.uf;if(x>B)for(;u>r&&x>B;)t=new p.oc,t.ii(n,C,y,A,u),x=t.y,u--}n=new p.Bc;
n.time=0;n.ob=0;n.value=a.zg;n.type=1;n.ae=h/3;n.be=a.Xe?a.zg:a.zg+e/3;b.X.push(n);n=new p.Bc;n.time=0;n.ob=1;n.value=a.Bg;n.type=1;n.ae=h/3;n.be=a.Xe?a.Bg:a.Bg+g/3;b.X.push(n);n=new p.Bc;n.time=0;n.ob=2;n.value=a.Bd;n.type=1;n.ae=h/3;n.be=a.Xe?a.Bd:a.Bd+k/3;b.X.push(n);n=new p.Bc;n.time=0;n.ob=3;n.value=a.Ag;n.type=0;n.qb=0;b.X.push(n);c&&(n=new p.Bc,n.time=r,n.ob=3,n.value=a.ed,n.type=0,n.qb=u-r,b.X.push(n));n=new p.Bc;n.time=h;n.ob=0;n.value=a.Td;n.type=1;n.$d=2*h/3;a.de&&!a.ee?n.Nc=a.Td:n.Nc=
a.Td-e/3;a.ee&&(n.ae=h+m,n.be=n.value+m/h*e);b.X.push(n);n=new p.Bc;n.time=h;n.ob=1;n.value=a.Ud;n.type=1;n.$d=2*h/3;a.de&&!a.ee?n.Nc=a.Ud:n.Nc=a.Ud-g/3;a.ee&&(n.ae=h+m,n.be=n.value+m/h*g);b.X.push(n);n=new p.Bc;n.time=w;n.ob=2;n.value=q;n.type=1;n.$d=2*w/3;a.de?n.Nc=q:n.Nc=q-k/3;b.X.push(n);a.ee&&(n=new p.Bc,n.time=h+v,n.ob=0,n.value=a.Td,n.type=1,n.$d=h+v-m,n.Nc=a.Td,b.X.push(n),n=new p.Bc,n.time=h+v,n.ob=1,n.value=a.Ud,n.type=1,n.$d=h+v-m,n.Nc=a.Ud,b.X.push(n));this.ua.push(b);return b};b.prototype.Cp=
function(){this.s.b&&this.s.b.play()};b.prototype.Dp=function(){this.s.b&&(this.s.b.pause(),this.s.b.currentTime=0)};b.prototype.Bp=function(){this.s.b&&this.s.b.pause()};b.prototype.To=function(a){this.s.b&&(0>a&&(a=0),a>this.s.b.duration&&(a=this.s.b.duration-.1),this.s.b.currentTime=a,this.update())};b.prototype.Gn=function(){return this.s.b?this.s.b.currentTime:0};b.prototype.Fn=function(){if(this.s.b)return this.s.b};b.prototype.So=function(a){if(this.s.b){var b=!this.s.b.paused&&!this.s.b.ended,
c=this.s.b.currentTime;this.s.b.pause();isNaN(parseInt(a,10))?this.s.b.src=String(a):this.s.b.src=this.s.src[parseInt(a,10)];b&&(this.s.b.onloadedmetadata=function(){this.currentTime=c;this.play();this.onloadedmetadata=null});this.s.b.currentTime=c}};b.prototype.Nm=function(){this.bl=!0};return b}();p.a=k})(ggP2VR||(ggP2VR={}));window.ggHasHtml5Css3D=G;window.ggHasWebGL=N;window.pano2vrPlayer=ggP2VR.a;ggP2VR.a.prototype.getVersion=ggP2VR.a.prototype.xk;ggP2VR.a.prototype.readConfigString=ggP2VR.a.prototype.hj;
ggP2VR.a.prototype.readConfigUrl=ggP2VR.a.prototype.il;ggP2VR.a.prototype.readConfigUrlAsync=ggP2VR.a.prototype.uo;ggP2VR.a.prototype.readConfigXml=ggP2VR.a.prototype.jl;ggP2VR.a.prototype.openUrl=ggP2VR.a.prototype.cj;ggP2VR.a.prototype.openNext=ggP2VR.a.prototype.we;ggP2VR.a.prototype.setMargins=ggP2VR.a.prototype.Go;ggP2VR.a.prototype.addListener=ggP2VR.a.prototype.addListener;ggP2VR.a.prototype.on=ggP2VR.a.prototype.addListener;ggP2VR.a.prototype.removeEventListener=ggP2VR.a.prototype.removeEventListener;
ggP2VR.a.prototype.detectBrowser=ggP2VR.a.prototype.bk;ggP2VR.a.prototype.initWebGL=ggP2VR.a.prototype.Ec;ggP2VR.a.prototype.getPercentLoaded=ggP2VR.a.prototype.vn;ggP2VR.a.prototype.setBasePath=ggP2VR.a.prototype.Ao;ggP2VR.a.prototype.getBasePath=ggP2VR.a.prototype.Wm;ggP2VR.a.prototype.setViewerSize=ggP2VR.a.prototype.zl;ggP2VR.a.prototype.getViewerSize=ggP2VR.a.prototype.Jn;ggP2VR.a.prototype.setSkinObject=ggP2VR.a.prototype.Po;ggP2VR.a.prototype.changeViewMode=ggP2VR.a.prototype.Cm;
ggP2VR.a.prototype.getViewMode=ggP2VR.a.prototype.Hn;ggP2VR.a.prototype.changePolygonMode=ggP2VR.a.prototype.Tj;ggP2VR.a.prototype.setPolygonMode=ggP2VR.a.prototype.Tj;ggP2VR.a.prototype.getPolygonMode=ggP2VR.a.prototype.xn;ggP2VR.a.prototype.showOnePolyHotspot=ggP2VR.a.prototype.Bl;ggP2VR.a.prototype.hideOnePolyHotspot=ggP2VR.a.prototype.Bk;ggP2VR.a.prototype.changePolyHotspotColor=ggP2VR.a.prototype.Am;ggP2VR.a.prototype.toggleOnePolyHotspot=ggP2VR.a.prototype.lp;
ggP2VR.a.prototype.changeViewState=ggP2VR.a.prototype.Dm;ggP2VR.a.prototype.getViewState=ggP2VR.a.prototype.In;ggP2VR.a.prototype.setRenderFlags=ggP2VR.a.prototype.Io;ggP2VR.a.prototype.getRenderFlags=ggP2VR.a.prototype.An;ggP2VR.a.prototype.setMaxTileCount=ggP2VR.a.prototype.wl;ggP2VR.a.prototype.getVFov=ggP2VR.a.prototype.Pb;ggP2VR.a.prototype.setVFov=ggP2VR.a.prototype.yg;ggP2VR.a.prototype.getHFov=ggP2VR.a.prototype.Zm;ggP2VR.a.prototype.updatePanorama=ggP2VR.a.prototype.Ig;
ggP2VR.a.prototype.isTouching=ggP2VR.a.prototype.Pn;ggP2VR.a.prototype.getIsMobile=ggP2VR.a.prototype.dn;ggP2VR.a.prototype.setIsMobile=ggP2VR.a.prototype.Eo;ggP2VR.a.prototype.getIsTour=ggP2VR.a.prototype.fn;ggP2VR.a.prototype.getIsAutorotating=ggP2VR.a.prototype.an;ggP2VR.a.prototype.getIsLoading=ggP2VR.a.prototype.cn;ggP2VR.a.prototype.getIsLoaded=ggP2VR.a.prototype.hh;ggP2VR.a.prototype.getIsTileLoading=ggP2VR.a.prototype.en;ggP2VR.a.prototype.getLastActivity=ggP2VR.a.prototype.gn;
ggP2VR.a.prototype.getPan=ggP2VR.a.prototype.Ki;ggP2VR.a.prototype.getPanNorth=ggP2VR.a.prototype.ih;ggP2VR.a.prototype.getPanDest=ggP2VR.a.prototype.tn;ggP2VR.a.prototype.getPanN=ggP2VR.a.prototype.un;ggP2VR.a.prototype.setPan=ggP2VR.a.prototype.ug;ggP2VR.a.prototype.setPanNorth=ggP2VR.a.prototype.oj;ggP2VR.a.prototype.changePan=ggP2VR.a.prototype.Sj;ggP2VR.a.prototype.changePanLog=ggP2VR.a.prototype.zm;ggP2VR.a.prototype.getTilt=ggP2VR.a.prototype.Mi;ggP2VR.a.prototype.getTiltDest=ggP2VR.a.prototype.Cn;
ggP2VR.a.prototype.setTilt=ggP2VR.a.prototype.xg;ggP2VR.a.prototype.changeTilt=ggP2VR.a.prototype.Uj;ggP2VR.a.prototype.changeTiltLog=ggP2VR.a.prototype.Bm;ggP2VR.a.prototype.getFov=ggP2VR.a.prototype.Of;ggP2VR.a.prototype.getFovDest=ggP2VR.a.prototype.Ym;ggP2VR.a.prototype.setFov=ggP2VR.a.prototype.qg;ggP2VR.a.prototype.changeFov=ggP2VR.a.prototype.Rj;ggP2VR.a.prototype.changeFovLog=ggP2VR.a.prototype.ni;ggP2VR.a.prototype.getRoll=ggP2VR.a.prototype.Bn;ggP2VR.a.prototype.setRoll=ggP2VR.a.prototype.xl;
ggP2VR.a.prototype.setPanTilt=ggP2VR.a.prototype.Ho;ggP2VR.a.prototype.setPanTiltFov=ggP2VR.a.prototype.vg;ggP2VR.a.prototype.setDefaultView=ggP2VR.a.prototype.Co;ggP2VR.a.prototype.setLocked=ggP2VR.a.prototype.Fo;ggP2VR.a.prototype.setLockedMouse=ggP2VR.a.prototype.sg;ggP2VR.a.prototype.setLockedKeyboard=ggP2VR.a.prototype.rg;ggP2VR.a.prototype.getLockedKeyboard=ggP2VR.a.prototype.jn;ggP2VR.a.prototype.setLockedWheel=ggP2VR.a.prototype.tg;ggP2VR.a.prototype.moveTo=ggP2VR.a.prototype.moveTo;
ggP2VR.a.prototype.moveToEx=ggP2VR.a.prototype.zh;ggP2VR.a.prototype.moveToDefaultView=ggP2VR.a.prototype.Yn;ggP2VR.a.prototype.moveToDefaultViewEx=ggP2VR.a.prototype.Zn;ggP2VR.a.prototype.addHotspotElements=ggP2VR.a.prototype.Kj;ggP2VR.a.prototype.playSound=ggP2VR.a.prototype.ze;ggP2VR.a.prototype.playPauseSound=ggP2VR.a.prototype.gl;ggP2VR.a.prototype.playStopSound=ggP2VR.a.prototype.so;ggP2VR.a.prototype.pauseSound=ggP2VR.a.prototype.dj;ggP2VR.a.prototype.activateSound=ggP2VR.a.prototype.nm;
ggP2VR.a.prototype.soundGetTime=ggP2VR.a.prototype.Zo;ggP2VR.a.prototype.soundSetTime=ggP2VR.a.prototype.$o;ggP2VR.a.prototype.isPlaying=ggP2VR.a.prototype.Fc;ggP2VR.a.prototype.stopSound=ggP2VR.a.prototype.uj;ggP2VR.a.prototype.setVolume=ggP2VR.a.prototype.Uo;ggP2VR.a.prototype.changeVolume=ggP2VR.a.prototype.Em;ggP2VR.a.prototype.removeHotspots=ggP2VR.a.prototype.ol;ggP2VR.a.prototype.addHotspot=ggP2VR.a.prototype.om;ggP2VR.a.prototype.updateHotspot=ggP2VR.a.prototype.tp;
ggP2VR.a.prototype.removeHotspot=ggP2VR.a.prototype.vo;ggP2VR.a.prototype.setActiveHotspot=ggP2VR.a.prototype.rf;ggP2VR.a.prototype.getPointHotspotIds=ggP2VR.a.prototype.wn;ggP2VR.a.prototype.getHotspot=ggP2VR.a.prototype.$m;ggP2VR.a.prototype.setFullscreen=ggP2VR.a.prototype.sf;ggP2VR.a.prototype.toggleFullscreen=ggP2VR.a.prototype.Vh;ggP2VR.a.prototype.enterFullscreen=ggP2VR.a.prototype.Om;ggP2VR.a.prototype.exitFullscreen=ggP2VR.a.prototype.exitFullscreen;ggP2VR.a.prototype.getIsFullscreen=ggP2VR.a.prototype.bn;
ggP2VR.a.prototype.startAutorotate=ggP2VR.a.prototype.Fl;ggP2VR.a.prototype.stopAutorotate=ggP2VR.a.prototype.gp;ggP2VR.a.prototype.toggleAutorotate=ggP2VR.a.prototype.kp;ggP2VR.a.prototype.startAnimation=ggP2VR.a.prototype.cp;ggP2VR.a.prototype.createLayers=ggP2VR.a.prototype.Xj;ggP2VR.a.prototype.removePanorama=ggP2VR.a.prototype.Jh;ggP2VR.a.prototype.getScreenResolution=ggP2VR.a.prototype.uk;ggP2VR.a.prototype.getMaxScreenResolution=ggP2VR.a.prototype.qk;ggP2VR.a.prototype.getNodeIds=ggP2VR.a.prototype.pn;
ggP2VR.a.prototype.getNodeUserdata=ggP2VR.a.prototype.Ji;ggP2VR.a.prototype.getNodeLatLng=ggP2VR.a.prototype.qn;ggP2VR.a.prototype.getNodeTitle=ggP2VR.a.prototype.sn;ggP2VR.a.prototype.getCurrentNode=ggP2VR.a.prototype.pk;ggP2VR.a.prototype.getNextNode=ggP2VR.a.prototype.rk;ggP2VR.a.prototype.getPrevNode=ggP2VR.a.prototype.zn;ggP2VR.a.prototype.getLastVisitedNode=ggP2VR.a.prototype.hn;ggP2VR.a.prototype.getCurrentPointHotspots=ggP2VR.a.prototype.Xm;ggP2VR.a.prototype.getPositionAngles=ggP2VR.a.prototype.yn;
ggP2VR.a.prototype.getPositionRawAngles=ggP2VR.a.prototype.sk;ggP2VR.a.prototype.nodeVisited=ggP2VR.a.prototype.co;ggP2VR.a.prototype.setElementIdPrefix=ggP2VR.a.prototype.Do;ggP2VR.a.prototype.videoPanoPlay=ggP2VR.a.prototype.Cp;ggP2VR.a.prototype.videoPanoStop=ggP2VR.a.prototype.Dp;ggP2VR.a.prototype.videoPanoPause=ggP2VR.a.prototype.Bp;ggP2VR.a.prototype.getVideoPanoTime=ggP2VR.a.prototype.Gn;ggP2VR.a.prototype.setVideoPanoTime=ggP2VR.a.prototype.To;ggP2VR.a.prototype.getVideoPanoObject=ggP2VR.a.prototype.Fn;
ggP2VR.a.prototype.setVideoPanoSource=ggP2VR.a.prototype.So;ggP2VR.a.prototype.getMediaObject=ggP2VR.a.prototype.mn;ggP2VR.a.prototype.registerVideoElement=ggP2VR.a.prototype.kl;ggP2VR.a.prototype.disableSoundLoading=ggP2VR.a.prototype.Nm;ggP2VR.a.prototype.setCrossOrigin=ggP2VR.a.prototype.Bo;ggP2VR.a.prototype.setProjection=ggP2VR.a.prototype.cd;ggP2VR.a.prototype.getProjection=ggP2VR.a.prototype.ya;ggP2VR.a.prototype.changeProjection=ggP2VR.a.prototype.oi;
ggP2VR.a.prototype.changeProjectionEx=ggP2VR.a.prototype.oi;ggP2VR.a.prototype.changeLensflares=ggP2VR.a.prototype.ym;ggP2VR.a.prototype.setTransition=ggP2VR.a.prototype.Qo;ggP2VR.a.prototype.getMapType=ggP2VR.a.prototype.ln;ggP2VR.a.prototype.getMapDetails=ggP2VR.a.prototype.kn;ggP2VR.a.prototype.getNodeMapCoords=ggP2VR.a.prototype.rn;ggP2VR.a.prototype.addVariable=ggP2VR.a.prototype.pm;ggP2VR.a.prototype.setVariableValue=ggP2VR.a.prototype.Mh;ggP2VR.a.prototype.getVariableValue=ggP2VR.a.prototype.En;
ggP2VR.a.prototype.setUseGyro=ggP2VR.a.prototype.Ro;ggP2VR.a.prototype.getUseGyro=ggP2VR.a.prototype.Dn;
